{"id":"oaks-00x","title":"Add licensing to Sources","description":"Add license tracking for data sources. When publishing data from a Source, need to assign and display appropriate licenses. Key concerns: (1) Honor licenses of external sources (Oaks of the World, iNaturalist, etc.), (2) Protect user's own preferred source data for eventual book publication, (3) Display license info in web app. Involves: researching source licenses, adding license fields to data model, updating CLI and web display.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-16T12:22:03.719103-05:00","updated_at":"2025-12-19T16:32:42.850613-05:00","closed_at":"2025-12-19T16:32:42.850613-05:00"}
{"id":"oaks-9yx","title":"Convert SpeciesDetail to SvelteKit dynamic route","description":"Convert SpeciesDetail to SvelteKit dynamic route\n\nDONE:\n- Created src/routes/species/[name]/+page.svelte\n\nTODO:\n- Update SpeciesDetail.svelte imports (./dataStore.js -\u003e $lib/stores/dataStore.js)\n- Remove onNavigate, onNavigateToTaxon, onGoHome props\n- Convert parent species links to \u003ca\u003e tags\n- Convert hybrid links to \u003ca\u003e tags\n- Convert taxonomy links to \u003ca\u003e tags\n- Import { base } from '$app/paths'","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T15:24:42.763185-05:00","updated_at":"2025-12-17T16:18:58.046244-05:00","closed_at":"2025-12-17T16:18:58.046244-05:00","dependencies":[{"issue_id":"oaks-9yx","depends_on_id":"oaks-bfk","type":"blocks","created_at":"2025-12-17T15:25:00.726778-05:00","created_by":"daemon"}]}
{"id":"oaks-p7sc","title":"web-edit: Create DeleteConfirmDialog component","description":"Create web/src/lib/components/DeleteConfirmDialog.svelte:\n\n**Features:**\n- Confirmation dialog for destructive actions\n- Entity name display (\"Delete Quercus alba?\")\n- Cascade warning when applicable:\n  - Species: \"This will also remove data from X sources.\"\n  - Taxon: \"Cannot delete: Y species use this taxon.\" (error, not confirm)\n  - Source: \"Cannot delete: Z species have data from this source.\" (error)\n- Red \"Delete\" button, gray \"Cancel\" button\n- Loading state during delete operation\n\n**Props:**\n- entityType: 'species' | 'taxon' | 'source' | 'species-source'\n- entityName: string\n- cascadeInfo?: { count: number, type: string }\n- isDeleting: boolean\n- onConfirm: () =\u003e void\n- onCancel: () =\u003e void","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T18:57:49.293232-05:00","updated_at":"2025-12-31T11:03:38.511859-05:00","closed_at":"2025-12-31T11:03:38.511859-05:00","created_by":"jeff"}
{"id":"oaks-6c8","title":"Clean up old routing code","description":"Remove obsolete code after migration:\n- Delete old App.svelte routing logic\n- Remove unused navigation handlers\n- Clean up any orphaned components\n- Update CLAUDE.md documentation\n- Final review of removed code","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T15:24:43.629934-05:00","updated_at":"2025-12-17T16:30:12.472587-05:00","closed_at":"2025-12-17T16:30:12.472587-05:00","dependencies":[{"issue_id":"oaks-6c8","depends_on_id":"oaks-p5o","type":"blocks","created_at":"2025-12-17T15:25:01.588325-05:00","created_by":"daemon"}]}
{"id":"oaks-26qm.2.1","title":"api: Add Go dependencies","description":"Add required dependencies to cli/go.mod.\n\n## Dependencies to Add\n```go\nrequire (\n    github.com/go-chi/chi/v5 v5.0.11\n    github.com/go-chi/httprate v0.7.4\n    github.com/go-chi/cors v1.2.1\n    github.com/go-playground/validator/v10 v10.16.0\n)\n```\n\n## Steps\n1. cd cli\n2. go get github.com/go-chi/chi/v5\n3. go get github.com/go-chi/httprate\n4. go get github.com/go-chi/cors\n5. go get github.com/go-playground/validator/v10\n6. go mod tidy\n\n## Verification\n- go build succeeds\n- go mod verify passes","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T17:25:34.680894-05:00","updated_at":"2025-12-29T19:50:43.890496-05:00","closed_at":"2025-12-29T19:50:43.890496-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-26qm.2.1","depends_on_id":"oaks-26qm.2","type":"parent-child","created_at":"2025-12-29T17:25:34.682823-05:00","created_by":"daemon"}]}
{"id":"oaks-whtm","title":"rust-parser: Implement scan_species function","description":"Compose the full text scanning function that finds all species mentions.\n\n## Tasks\n- [ ] Implement genus marker finder (find all \"Quercus\" and \"Q.\" in text)\n- [ ] Create `scan_species(text: \u0026str) -\u003e Vec\u003cParseResult\u003e` function\n- [ ] For each potential match:\n  - Check if position overlaps skip regions\n  - If not, attempt parse_species at that position\n  - Collect successful parses with positions\n- [ ] Return results sorted by position\n- [ ] Write tests for:\n  - Multiple species in paragraph\n  - Species near/in skip regions\n  - Overlapping potential matches\n  - Empty text, no species found\n\n## Acceptance Criteria\n- Correctly skips code blocks, links, URLs\n- Returns all valid species mentions with positions\n- Positions are byte offsets suitable for string replacement\n\n## Reference\n- openspec/changes/add-wasm-species-linker/specs/species-linker/spec.md","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-02T14:53:42.895005-05:00","updated_at":"2026-01-02T14:53:42.895005-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-whtm","depends_on_id":"oaks-ipmg","type":"blocks","created_at":"2026-01-02T14:53:55.812948-05:00","created_by":"daemon"},{"issue_id":"oaks-whtm","depends_on_id":"oaks-vh9s","type":"blocks","created_at":"2026-01-02T14:53:55.849489-05:00","created_by":"daemon"}]}
{"id":"oaks-k7t","title":"Fix cache path collision vulnerability in scraper","description":"HIGH: scrapers/oaksoftheworld/utils.py:25-35 uses only filename from URL for cache path. Multiple URLs can collide, enabling data poisoning. Use URL hash instead.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-27T14:21:45.783424-05:00","updated_at":"2025-12-27T16:35:48.439047-05:00","closed_at":"2025-12-27T16:35:48.439047-05:00"}
{"id":"oaks-sx80","title":"cli-Split CLI and API Server","description":"Refactor to separate CLI and API server into distinct binaries.\n\nSee: openspec/changes/refactor-cli-api-split/proposal.md\nDesign: openspec/changes/refactor-cli-api-split/design.md\nTasks: openspec/changes/refactor-cli-api-split/tasks.md\n\nGoals:\n- Separate API server from CLI into distinct binaries\n- Enable CLI to operate on remote API server via profiles\n- Reduce API server container size\n- Version compatibility between CLI and API","status":"closed","priority":2,"issue_type":"epic","created_at":"2025-12-30T13:21:56.232308-05:00","updated_at":"2025-12-31T10:50:01.286413-05:00","closed_at":"2025-12-31T10:50:01.286413-05:00","created_by":"jeff"}
{"id":"oaks-5v8","title":"Set up SvelteKit project structure","description":"Initialize SvelteKit project with proper configuration:\n- Create new SvelteKit project structure\n- Configure svelte.config.js with static adapter\n- Set base path to '/oaks' for GitHub Pages\n- Configure 404.html fallback for SPA routing\n- Copy over app.css and static assets\n- Update package.json dependencies","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T15:24:41.372388-05:00","updated_at":"2025-12-17T16:04:08.327998-05:00","closed_at":"2025-12-17T16:04:08.327998-05:00"}
{"id":"oaks-rtg","title":"Add interactive list/browse command to CLI","description":"Expose ListOakEntries via CLI with:\n- Pagination for browsing large datasets\n- Dynamic/interactive search (fuzzy matching, filters)\n- Possibly TUI interface for browsing\n\nRelated to the existing 'oak find' command but more interactive and browsable rather than one-shot search. Needs further design work to determine exact UX.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-15T11:02:39.444392-05:00","updated_at":"2025-12-15T11:02:39.444392-05:00"}
{"id":"oaks-0ps1","title":"api-ios: Update iOS app to use API","description":"Integrate iOS app with the new API.\n\n## Work\n- Create APIService to replace/augment StorageService\n- Implement API calls for all endpoints\n- Handle authentication (store API key securely in Keychain)\n- Error handling and user feedback\n\n## Offline Support\n- Cache API responses locally\n- Queue writes when offline, sync when online\n- Conflict resolution (last-write-wins)\n\n## Testing\n- Test against local server during development\n- Test offline scenarios","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-29T16:25:37.357997-05:00","updated_at":"2025-12-29T17:16:03.785314-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-0ps1","depends_on_id":"oaks-9yab","type":"blocks","created_at":"2025-12-29T16:25:48.942914-05:00","created_by":"daemon"}],"deleted_at":"2025-12-29T17:16:03.785314-05:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"oaks-i4wd","title":"cli: Refactor runTaxaList to reduce cognitive complexity (47→20)","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-29T20:43:13.92974-05:00","updated_at":"2025-12-29T20:43:13.92974-05:00","created_by":"jeff"}
{"id":"oaks-qby","title":"Add SQLite database export to CLI","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-14T14:23:05.953826-05:00","updated_at":"2025-12-14T16:51:24.655375-05:00","closed_at":"2025-12-14T16:51:24.655375-05:00","dependencies":[{"issue_id":"oaks-qby","depends_on_id":"oaks-e85","type":"blocks","created_at":"2025-12-14T14:23:15.384634-05:00","created_by":"daemon"}]}
{"id":"oaks-ixue","title":"api: Parser grammar (ParseSpecies function)","description":"Create api/internal/parser/grammar.go with species name parsing logic.\n\n## Implementation\n\n1. Create grammar.go with parsing logic using **composable regex patterns** (not one monolithic regex)\n2. Define named pattern components:\n   ```go\n   var (\n       genusPattern   = `(?:Quercus|Q\\.)`\n       hybridPattern  = `[×xX]`\n       epithetPattern = `[a-z]+(?:-[a-z]+)?`\n       rankPattern    = `(?i:subsp|ssp|var|...)`  // case-insensitive\n   )\n   ```\n3. Implement parsing for:\n   - Genus matching (Quercus | Q., capital Q required)\n   - Hybrid marker matching (×, x, X with optional space)\n   - Epithet matching (lowercase, allow hyphens like castello-paivae)\n   - Rank matching with all variants (see cli/docs/infraspecific-ranks.md)\n   - Infraspecific parsing (rank + epithet)\n   - Author parsing (see Author Citation Patterns in design.md)\n4. Export: ParseSpecies(text string) (*ParseResult, error)\n5. Write grammar_test.go with ICN-compliant test cases\n\n## Critical: The f. Disambiguation\n\nThe abbreviation `f.` has two meanings:\n- **Infraspecific rank**: forma (e.g., `Q. alba f. claudei`)\n- **Author suffix**: filius/son (e.g., `Q. alba Hook.f.`)\n\n**Rule**: If followed by lowercase word → rank. Otherwise → author suffix.\n```\nQ. alba f. claudei     → f. is rank\nQ. alba Hook.f.        → f. is author suffix\n```\n\nUse regex lookahead or post-match logic to disambiguate.\n\n## Design Decisions\n- Grammar is REGULAR (no recursion) - regex is appropriate\n- Use composable patterns, not monolithic regex\n- Genus is case-sensitive (Quercus/Q. only)\n- Species epithet must be lowercase\n- Ranks are case-insensitive\n- Period after rank is optional\n- Preserve original text in Raw field (dont normalize)\n- Author citations: match common patterns, gracefully degrade on unrecognized\n\n## Reference\n- openspec/changes/add-species-name-parser/design.md (updated with f. disambiguation)\n- cli/docs/infraspecific-ranks.md\n- gnparser (github.com/gnames/gnparser) - reference implementation\n\nDepends on (1):\n  → oaks-hdur: api: Parser core types (ParseResult, Infraspecific) [P1]\n\nBlocks (1):\n  ← oaks-pi38: api: Parser scanner (ScanSpecies function) [P1 - open]","status":"tombstone","priority":1,"issue_type":"task","created_at":"2026-01-02T14:03:49.655126-05:00","updated_at":"2026-01-02T14:41:21.996079-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-ixue","depends_on_id":"oaks-hdur","type":"blocks","created_at":"2026-01-02T14:04:46.446612-05:00","created_by":"daemon"}],"deleted_at":"2026-01-02T14:41:21.996079-05:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"oaks-e9p","title":"Determine web app data format strategy (JSON vs SQLite for PWA)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T14:13:34.815793-05:00","updated_at":"2025-12-14T17:09:47.971131-05:00","closed_at":"2025-12-14T17:09:47.971131-05:00","dependencies":[{"issue_id":"oaks-e9p","depends_on_id":"oaks-e85","type":"blocks","created_at":"2025-12-14T14:13:53.106712-05:00","created_by":"daemon"},{"issue_id":"oaks-e9p","depends_on_id":"oaks-5oo","type":"blocks","created_at":"2025-12-14T14:15:40.631518-05:00","created_by":"daemon"}]}
{"id":"oaks-d86j","title":"Content Expansion (taxa pages, articles, auto-linking)","description":"Transform Oak Compendium from species-only database to comprehensive reference with:\n- Taxa content: Markdown pages at subgenus/section/subsection/complex levels\n- Reference articles: Standalone guides, book reviews, identification essays\n- Species auto-linking: Bidirectional links between content and species pages\n\nSee openspec/changes/add-content-expansion/ for full design.\n\nDependencies:\n- web-data-layer refactor (DONE)\n- species-name-parser (oaks-lqfj) for Phase 3 only","status":"open","priority":1,"issue_type":"epic","created_at":"2026-01-02T13:51:46.575285-05:00","updated_at":"2026-01-02T13:51:46.575285-05:00","created_by":"jeff"}
{"id":"oaks-get","title":"Implement default source selection logic (is_preferred, then most data)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T15:17:31.467711-05:00","updated_at":"2025-12-15T16:13:08.595411-05:00","closed_at":"2025-12-15T16:13:08.595411-05:00"}
{"id":"oaks-6m2","title":"Convert TaxonomyTree to SvelteKit route","description":"Convert TaxonomyTree to SvelteKit route\n\nDONE:\n- Created src/routes/taxonomy/+page.svelte\n- Updated TaxonomyTree.svelte imports to use $lib/stores/dataStore.js\n- Converted all species buttons to \u003ca\u003e links with {base}/species/{name}/\n- Added text-decoration: none to .species-leaf and .species-leaf-flat styles\n\nSTATUS: Route complete, component updated. Ready to close.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T15:24:42.355231-05:00","updated_at":"2025-12-17T16:16:38.021054-05:00","closed_at":"2025-12-17T16:16:38.021054-05:00","dependencies":[{"issue_id":"oaks-6m2","depends_on_id":"oaks-bfk","type":"blocks","created_at":"2025-12-17T15:25:00.40317-05:00","created_by":"daemon"}]}
{"id":"oaks-cpe8","title":"Design markdown format for species notes","description":"Define the markdown format that the iOS app will generate and CLI will import.\n\n## Requirements\n- Species name in H1\n- Fields as H2 headers (Leaves, Bark, Acorns, Range, etc.)\n- Must match existing species_sources fields\n- Support for partial entries (not all fields required)\n\n## Example\n```markdown\n# Quercus alba\n\n## Common Names\nwhite oak, eastern white oak\n\n## Leaves\nLeaves 5-9 lobed, 12-22 cm long...\n\n## Acorns\nAcorn 1.5-2.5 cm, cup shallow...\n```\n\n## Decisions Needed\n- Filename convention (species name? timestamp?)\n- How to handle updates vs new entries\n- Metadata (source book, page number, date?)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T15:40:38.391379-05:00","updated_at":"2025-12-27T16:05:36.098562-05:00","closed_at":"2025-12-27T16:05:36.098562-05:00"}
{"id":"oaks-red","title":"Document full data pipeline from CLI to browser","description":"Document the complete data flow:\n\n1. **Data Sources** - Where data comes from (scrapers, manual entry, iNaturalist)\n2. **CLI Database** - How data is imported/created with the CLI tool (oak_compendium.db)\n3. **JSON Export** - How CLI exports to quercus_data.json\n4. **Web App Loading** - How web app fetches JSON and populates IndexedDB\n5. **IndexedDB Role** - Caching, offline support, update detection\n\nAdd documentation to:\n- Top-level README.md (overview section)\n- CLAUDE.md (detailed technical reference)\n- AGENTS.md if relevant\n\nInclude diagrams if helpful.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T17:08:22.318176-05:00","updated_at":"2025-12-15T17:20:28.203612-05:00","closed_at":"2025-12-15T17:20:28.203612-05:00"}
{"id":"oaks-r9ma","title":"api-web: Evaluate migrating web app to API","description":"Evaluate and potentially migrate web app from static JSON to live API.\n\n## Current State\n- Web loads quercus_data.json at startup\n- Populates IndexedDB for offline queries\n- Static deployment to GitHub Pages\n\n## Options\n1. Keep static JSON (simpler, works well)\n2. Hybrid: API for fresh data, fallback to cached JSON\n3. Full API: all data from API\n\n## Considerations\n- Do we need real-time updates on web?\n- GitHub Pages is free, API hosting has cost\n- Added complexity worth it?\n\n## Decision needed before implementation","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-29T16:25:37.540667-05:00","updated_at":"2025-12-29T17:16:03.785925-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-r9ma","depends_on_id":"oaks-9yab","type":"blocks","created_at":"2025-12-29T16:25:48.975699-05:00","created_by":"daemon"}],"deleted_at":"2025-12-29T17:16:03.785925-05:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"oaks-ezs","title":"Compact desktop layout for species detail page","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-19T12:45:12.163793-05:00","updated_at":"2025-12-19T15:48:01.381659-05:00","closed_at":"2025-12-19T15:48:01.381659-05:00"}
{"id":"oaks-fnid","title":"cli-Implement API client for remote operations","description":"Create HTTP client for CLI to communicate with API server.\n\nSee: openspec/changes/refactor-cli-api-split/tasks.md Section 4\nSee: openspec/changes/refactor-cli-api-split/specs/cli-api-client/spec.md\nSee: openspec/changes/refactor-cli-api-split/design.md Decision 5, 8\n\nTasks:\n- Remove cli/cmd/serve.go\n- Remove cli/internal/api/ directory\n- Create cli/internal/client/client.go - base HTTP client\n- Implement version compatibility checking\n- Create cli/internal/client/species.go - species operations\n- Create cli/internal/client/taxa.go - taxa operations\n- Create cli/internal/client/sources.go - source operations\n- Verify CLI builds","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T13:22:32.704698-05:00","updated_at":"2025-12-30T15:22:14.139698-05:00","closed_at":"2025-12-30T15:22:14.139698-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-fnid","depends_on_id":"oaks-s1de","type":"blocks","created_at":"2025-12-30T14:06:29.015528-05:00","created_by":"daemon"},{"issue_id":"oaks-fnid","depends_on_id":"oaks-yh14","type":"blocks","created_at":"2025-12-30T14:06:28.974503-05:00","created_by":"daemon"}]}
{"id":"oaks-koq","title":"Research map boundary data sources","description":"Find GeoJSON/TopoJSON datasets for administrative boundaries (countries, states/provinces, counties). Candidates: Natural Earth, GADM, geoBoundaries. Evaluate size, licensing, and granularity options.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-16T10:45:14.084162-05:00","updated_at":"2025-12-16T10:45:14.084162-05:00"}
{"id":"oaks-0vt","title":"Add metadata/versioning to CLI JSON export","description":"The CLI export command produces JSON without a metadata section. The web app's IndexedDB caching uses metadata.version to detect updates, but currently gets synthetic '1.0-legacy' version every time, so updates are never detected. Need to add metadata section with version (timestamp or hash), exported_at, and species_count to the export output.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T18:15:42.15763-05:00","updated_at":"2025-12-15T21:45:04.764226-05:00","closed_at":"2025-12-15T21:45:04.764226-05:00"}
{"id":"oaks-pi38","title":"api: Parser scanner (ScanSpecies function)","description":"Create api/internal/parser/scanner.go for scanning text for species mentions.\n\n## Implementation\n\n1. Create scanner.go\n2. Implement ScanSpecies(text string) []ParseResult\n3. Return matches with start/end byte positions\n4. Skip regions that should not be linked:\n   - Code blocks (``` and ` regions)\n   - Existing markdown links ([...] and [...](...)\n   - Image alt text (![...])\n   - URLs (https://... and path targets in links)\n5. Handle punctuation boundaries:\n   - Exclude sentence-ending periods\n   - Preserve periods in abbreviations (Q., var.)\n6. Write scanner_test.go\n\n## Tasks from OpenSpec\n- 3.1-3.6 (see openspec/changes/add-species-name-parser/tasks.md)\n\n## Tests Required\n- Multiple species in paragraph\n- Position information accuracy\n- Empty text and no matches\n- Code block skipping (inline and fenced)\n- Existing link skipping (inline, reference, images)\n- URL skipping\n- Punctuation boundary handling\n\n## Reference\nSee: openspec/changes/add-species-name-parser/specs/species-name-parser/spec.md","status":"tombstone","priority":1,"issue_type":"task","created_at":"2026-01-02T14:04:02.629318-05:00","updated_at":"2026-01-02T14:41:21.997183-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-pi38","depends_on_id":"oaks-ixue","type":"blocks","created_at":"2026-01-02T14:04:46.59846-05:00","created_by":"daemon"}],"deleted_at":"2026-01-02T14:41:21.997183-05:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"oaks-6vxm","title":"Test and fix mobile responsiveness of edit forms","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-31T13:27:03.640388-05:00","updated_at":"2025-12-31T13:32:49.638879-05:00","closed_at":"2025-12-31T13:32:49.638879-05:00","created_by":"jeff"}
{"id":"oaks-zgu8","title":"api: Articles table schema and migration","description":"Create articles table for standalone reference content.\n\nSchema:\n```sql\nCREATE TABLE articles (\n    id INTEGER PRIMARY KEY AUTOINCREMENT,\n    slug TEXT NOT NULL UNIQUE,          -- URL-friendly identifier\n    title TEXT NOT NULL,\n    author TEXT NOT NULL DEFAULT 'Jeff Clark',\n    published_at TEXT NOT NULL,         -- ISO 8601 date\n    updated_at TEXT,\n    tags TEXT,                          -- JSON array of strings\n    content TEXT NOT NULL,              -- Markdown content\n    is_published INTEGER NOT NULL DEFAULT 1\n);\n\nCREATE INDEX idx_articles_slug ON articles(slug);\nCREATE INDEX idx_articles_published ON articles(published_at);\n```\n\nFiles:\n- api/internal/db/schema.go or migrations\n- api/internal/models/article.go\n\nPart of: Content Expansion (Phase 2: Reference Articles)\nSpec: openspec/changes/add-content-expansion/specs/reference-articles/spec.md","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-02T13:52:40.178848-05:00","updated_at":"2026-01-02T13:52:40.178848-05:00","created_by":"jeff"}
{"id":"oaks-7gi","title":"Ensure forms are accessible","description":"All form inputs must have associated labels (via label element or aria-labelledby). Error messages must be programmatically associated with inputs. Required fields should be indicated accessibly.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T21:47:57.813564-05:00","updated_at":"2025-12-23T19:01:03.982844-05:00","closed_at":"2025-12-23T19:01:03.982844-05:00"}
{"id":"oaks-db6","title":"Fix page titles to match current screen","description":"Currently the page title is always the same (e.g., 'Quercus Database') regardless of which screen is loaded. This causes two problems:\n\n1. **Shared links lack context** - When sharing a URL, the title doesn't indicate what page is being shared\n2. **Browser tabs are indistinguishable** - Multiple tabs all show the same title\n\nShould update document.title dynamically based on current route:\n- Home: 'Quercus Database'\n- Species detail: 'Quercus alba - Quercus Database'\n- Search results: 'Search: [query] - Quercus Database'\n- About: 'About - Quercus Database'\n- etc.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-16T22:36:11.899758-05:00","updated_at":"2025-12-17T15:25:09.715216-05:00","closed_at":"2025-12-17T15:25:09.715216-05:00"}
{"id":"oaks-4271","title":"Enhance CLI API client with retry logic","description":"**Spec Reference:** openspec/changes/consolidate-db-code/tasks.md Section 3\n\nImprove CLI HTTP client robustness.\n\n**Tasks:**\n- [ ] Add retry logic for transient failures (5xx, timeouts)\n- [ ] Implement exponential backoff\n- [ ] Add configurable timeout\n- [ ] Test client with mock server\n- [ ] Handle connection refused gracefully","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T17:03:59.383823-05:00","updated_at":"2025-12-30T17:26:50.806259-05:00","closed_at":"2025-12-30T17:26:50.806259-05:00","created_by":"jeff"}
{"id":"oaks-in5","title":"Missing hybrid entries referenced by parent species","description":"20 species reference hybrids in their 'hybrids' array that don't exist in the database. Examples: budensis, kiusiana, grandidentata, cantabrica. These were likely never scraped from Oaks of the World.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-17T15:32:45.109664-05:00","updated_at":"2025-12-29T11:19:58.165198-05:00","closed_at":"2025-12-29T11:19:58.165198-05:00"}
{"id":"oaks-btd","title":"Audit CSS/styling for consistency and best practices","description":"Review web app styling for consistency and best practices:\n\n- Check CSS custom properties usage (are all colors/shadows using variables?)\n- Identify inline styles that should use CSS classes or variables\n- Look for duplicated style definitions across components\n- Ensure Tailwind and custom CSS are used consistently (not mixed randomly)\n- Consider consolidating common patterns into reusable classes\n- Review app.css organization","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-16T10:17:16.086541-05:00","updated_at":"2025-12-16T10:26:20.413395-05:00","closed_at":"2025-12-16T10:26:20.413395-05:00"}
{"id":"oaks-2gt","title":"Reconcile JSON export structure with UI rendering","description":"The JSON export structure (subsection, complex) doesn't fully match what the UI expects/renders (series, etc). Audit both sides and ensure consistency between the CLI export format and web app display logic.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T11:44:34.31974-05:00","updated_at":"2025-12-15T15:17:43.785179-05:00","closed_at":"2025-12-15T15:17:43.785179-05:00"}
{"id":"oaks-0om","title":"Update service worker to cache SQLite database","notes":"Obsolete - abandoned SQLite WASM approach in favor of IndexedDB","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T14:23:06.124819-05:00","updated_at":"2025-12-14T20:17:16.446688-05:00","closed_at":"2025-12-14T15:41:40.09483-05:00","dependencies":[{"issue_id":"oaks-0om","depends_on_id":"oaks-2qj","type":"blocks","created_at":"2025-12-14T14:23:15.518848-05:00","created_by":"daemon"}]}
{"id":"oaks-2qj","title":"Implement IndexedDB for offline data storage in web app","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-14T14:23:05.785614-05:00","updated_at":"2025-12-14T19:40:36.986106-05:00","closed_at":"2025-12-14T19:40:36.986106-05:00","dependencies":[{"issue_id":"oaks-2qj","depends_on_id":"oaks-t8h","type":"blocks","created_at":"2025-12-14T16:51:25.071622-05:00","created_by":"daemon"},{"issue_id":"oaks-2qj","depends_on_id":"oaks-j9s","type":"blocks","created_at":"2025-12-14T14:23:15.249999-05:00","created_by":"daemon"}]}
{"id":"oaks-5ui","title":"Garbage data in hybrid parent1/parent2 fields","description":"19 hybrids have parsing errors in parent fields. Examples: ×hispanica has parent1=e, parent2=A; ×cerrioides has parent1=1931; ×avellaniformis has parent1=ile, parent2=f. These are scraper parsing failures.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-17T15:32:45.249635-05:00","updated_at":"2025-12-29T11:12:53.682762-05:00","closed_at":"2025-12-29T11:12:53.682762-05:00"}
{"id":"oaks-93p","title":"Integrate Bear notes into oak data pipeline","description":"Create a workflow to import notes from Bear into the oak database.\n\n## Workflow\n1. Write notes in Bear (iOS/Mac) with tagging convention\n2. Script reads Bear's SQLite database\n3. Parses notes and maps to species\n4. Imports into oak_compendium.db as source-attributed data\n5. Triggers export and deploy\n\n## Resolved Decisions\n- **Source ID**: 3 (Oak Compendium / Personal Observation)\n- **Tagging convention**: `#Quercus/{subgenus}/{section}/{species}` or `#Quercus/{subgenus}/{section}/x/{hybrid}`\n- **Case handling**: Case-insensitive matching\n- **Field mapping**:\n  - Common Name(s) → local_names\n  - Leaf → leaves\n  - Acorn → fruits\n  - Bark → bark\n  - Buds → buds\n  - Form → growth_habit\n  - Range \u0026 Habitat → range\n  - Field Notes → miscellaneous\n  - Resources → miscellaneous (appended)\n\n## Technical Notes\n- Bear SQLite location: ~/Library/Group Containers/9K33E3U3T4.net.shinyfrog.bear/Application Data/database.sqlite\n- Run manually via `oak import-bear` command\n\n## Bear Note Template\n```markdown\n# Quercus {species}\n\n## Common Name(s):\n## Taxonomy:\n#Quercus/{subgenus}/{section}/{species}\n## Identification:\n### Leaf:\n### Acorn:\n### Bark:\n### Buds:\n### Form:\n## Range \u0026 Habitat:\n## Field Notes:\n## Resources:\n## Photos:\n```","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-19T12:17:58.039669-05:00","updated_at":"2025-12-19T13:52:06.224851-05:00","closed_at":"2025-12-19T13:52:06.224851-05:00"}
{"id":"oaks-ubf","title":"Data entry workflow improvements","description":"## Overview\nReduce friction in data entry from physical books/papers to the oak database.\n\n## Solution: Oak Notes iOS App\nField-by-field dictation app that saves markdown to iCloud for CLI import.\n\n### Workflow\n1. Open app, select/create species\n2. Tap field (Leaves, Bark, Acorns, etc.) → dictate → next field\n3. Markdown saved to iCloud\n4. CLI `oak import-notes` reads and imports\n\n### Why This Approach\n- Typing is the primary bottleneck (not lookup, not editing)\n- Dictation is book-agnostic (works with any source format)\n- iOS-native Speech framework is free (no API costs)\n- iCloud sync is simple and reliable\n\n### Future Enhancements\n- OCR mode (photo → text extraction)\n- Miller \u0026 Lamb book-specific parsing\n\n### Constraints\n- iOS, OSS only, TestFlight deployment","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-27T14:16:24.743965-05:00","updated_at":"2025-12-27T15:40:28.9368-05:00","dependencies":[{"issue_id":"oaks-ubf","depends_on_id":"oaks-updl","type":"blocks","created_at":"2025-12-27T15:41:12.592272-05:00","created_by":"daemon"},{"issue_id":"oaks-ubf","depends_on_id":"oaks-piru","type":"blocks","created_at":"2025-12-27T15:41:12.687248-05:00","created_by":"daemon"},{"issue_id":"oaks-ubf","depends_on_id":"oaks-pcu","type":"blocks","created_at":"2025-12-27T14:16:49.445383-05:00","created_by":"daemon"}]}
{"id":"oaks-31a","title":"Update Go models and DB layer for species_sources","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T14:51:08.97521-05:00","updated_at":"2025-12-15T15:00:22.117038-05:00","closed_at":"2025-12-15T15:00:22.117038-05:00","dependencies":[{"issue_id":"oaks-31a","depends_on_id":"oaks-qhj","type":"blocks","created_at":"2025-12-15T14:51:18.159233-05:00","created_by":"daemon"}]}
{"id":"oaks-niv","title":"Convert LandingPage to SvelteKit home route","description":"Convert LandingPage.svelte to routes/+page.svelte:\n- Add svelte:head with 'Quercus Compendium' title\n- Update navigation to use goto() or links\n- Remove callback props, use SvelteKit navigation","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T15:24:41.752499-05:00","updated_at":"2025-12-17T16:08:34.635392-05:00","closed_at":"2025-12-17T16:08:34.635392-05:00","dependencies":[{"issue_id":"oaks-niv","depends_on_id":"oaks-bfk","type":"blocks","created_at":"2025-12-17T15:24:59.940114-05:00","created_by":"daemon"}]}
{"id":"oaks-fb8","title":"Convert SpeciesList to SvelteKit route","description":"Convert SpeciesList.svelte to routes/list/+page.svelte:\n- Add svelte:head with 'Browse Species - Quercus Compendium' title\n- Handle search query in title: 'Search: [query] - Quercus Compendium'\n- Update species selection to use goto('/[species]')","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T15:24:42.155985-05:00","updated_at":"2025-12-17T16:08:34.698355-05:00","closed_at":"2025-12-17T16:08:34.698355-05:00","dependencies":[{"issue_id":"oaks-fb8","depends_on_id":"oaks-bfk","type":"blocks","created_at":"2025-12-17T15:25:00.245824-05:00","created_by":"daemon"}]}
{"id":"oaks-vtpw","title":"web-edit: Document delete cascade behavior","description":"Create user-facing and developer documentation:\n\n**User-facing (in app):**\n- Delete confirmation dialogs explain cascades\n- Error messages for constraint violations are clear\n\n**Developer documentation (CLAUDE.md):**\n\n### Delete Cascade Behavior\n\n| Entity | Cascade | Constraint |\n|--------|---------|------------|\n| Species | Deletes all species_sources | Auto-cascade |\n| Taxon | Cannot delete if species reference | 409 Conflict |\n| Source | Cannot delete if species_sources exist | 409 Conflict |\n| Species-Source | No dependents | Always deletable |\n\n**API behavior:**\n- Species DELETE: cascades to species_sources\n- Taxon DELETE: returns 409 if in use\n- Source DELETE: returns 409 if in use\n\n**UI handling:**\n- Pre-flight checks where possible\n- Clear error messages for 409 responses","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-30T19:01:47.835067-05:00","updated_at":"2025-12-31T13:29:01.527422-05:00","closed_at":"2025-12-31T13:29:01.527422-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-vtpw","depends_on_id":"oaks-q6gt","type":"blocks","created_at":"2025-12-30T19:01:55.872745-05:00","created_by":"daemon"}]}
{"id":"oaks-7qp","title":"Research editing format alternatives for multi-line content","description":"Investigate alternatives to YAML for editing oak species data, particularly for fields that contain:\n- Multi-line text (descriptions, notes)\n- Formatted content (bulleted lists, paragraphs)\n- The miscellaneous/notes section which is especially problematic\n\n**Requirements to consider:**\n- Easy to edit in $EDITOR\n- Preserves formatting when displayed in UI\n- Supports rich text features (lists, paragraphs, emphasis)\n- Validates well / has clear error messages\n- Round-trips cleanly (edit → save → edit)\n\n**Possible approaches to evaluate:**\n- Markdown within YAML (multiline strings)\n- Pure Markdown with frontmatter\n- TOML\n- Custom format\n- Hybrid approaches\n\n**PM NOTE:** When executing this issue, put on your PM hat. Focus on gathering requirements, understanding user needs, and evaluating trade-offs before jumping to implementation. Document findings thoroughly.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T10:13:12.970332-05:00","updated_at":"2025-12-19T10:25:03.939733-05:00","closed_at":"2025-12-19T10:25:03.939733-05:00"}
{"id":"oaks-v2fg","title":"cli-Update deployment for standalone API","description":"Update Docker and Fly.io config for new api/ structure.\n\nSee: openspec/changes/refactor-cli-api-split/tasks.md Section 6\n\nTasks:\n- Create api/Dockerfile (minimal alpine image)\n- Update fly.toml to reference api/Dockerfile\n- Update .github/workflows/deploy-api.yml for new structure\n- Test local Docker build: docker build -f api/Dockerfile .","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T13:22:47.925609-05:00","updated_at":"2025-12-30T15:16:18.497947-05:00","closed_at":"2025-12-30T15:16:18.497947-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-v2fg","depends_on_id":"oaks-yh14","type":"blocks","created_at":"2025-12-30T14:06:37.353771-05:00","created_by":"daemon"}]}
{"id":"oaks-vh9s","title":"rust-parser: Skip region detection","description":"Implement detection of regions to skip when scanning for species mentions.\n\n## Skip Regions\n1. **Code blocks**: Fenced (```) and inline (`)\n2. **Markdown links**: [text](url) and ![alt](url)\n3. **Reference-style links**: [text][ref]\n4. **URLs**: http:// and https:// patterns\n\n## Tasks\n- [ ] Create `src/scanner.rs` module\n- [ ] Implement fenced code block detection (``` to ```)\n- [ ] Implement inline code detection (` to `)\n- [ ] Implement markdown link detection [...](...) and ![...](...) \n- [ ] Implement URL detection (http:// https://)\n- [ ] Create `find_skip_regions(text: \u0026str) -\u003e Vec\u003c(usize, usize)\u003e` function\n- [ ] Write tests for each skip type\n- [ ] Test nested/overlapping regions\n\n## Reference\n- openspec/changes/add-wasm-species-linker/specs/species-linker/spec.md (Skip requirements)","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-02T14:53:30.44751-05:00","updated_at":"2026-01-02T14:53:30.44751-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-vh9s","depends_on_id":"oaks-qcti","type":"blocks","created_at":"2026-01-02T14:53:42.746652-05:00","created_by":"daemon"}]}
{"id":"oaks-wtdy","title":"rust-parser: WASM build configuration","description":"Configure the crate for WASM compilation with wasm-bindgen.\n\n## Tasks\n- [ ] Add wasm-bindgen attributes to exported functions in `src/lib.rs`:\n  ```rust\n  #[wasm_bindgen]\n  pub fn parse_species(text: \u0026str) -\u003e JsValue { ... }\n  \n  #[wasm_bindgen]\n  pub fn scan_species(text: \u0026str) -\u003e JsValue { ... }\n  ```\n- [ ] Configure serde-wasm-bindgen for struct serialization\n- [ ] Add release profile optimizations in Cargo.toml:\n  ```toml\n  [profile.release]\n  opt-level = \"z\"     # Optimize for size\n  lto = true          # Link-time optimization\n  codegen-units = 1   # Better optimization\n  panic = \"abort\"     # Smaller binary\n  ```\n- [ ] Create wasm-pack build script or Makefile target\n- [ ] Verify build succeeds: `wasm-pack build --target web --release`\n- [ ] Check output size (target: \u003c100KB gzipped)\n- [ ] Verify TypeScript definitions generated in pkg/\n\n## Acceptance Criteria\n- `wasm-pack build --target web --release` succeeds\n- pkg/ contains .wasm, .js, and .d.ts files\n- Gzipped WASM \u003c 100KB\n\n## Reference\n- openspec/changes/add-wasm-species-linker/design.md (WASM Target section)","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-02T14:53:55.995574-05:00","updated_at":"2026-01-02T14:53:55.995574-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-wtdy","depends_on_id":"oaks-whtm","type":"blocks","created_at":"2026-01-02T14:54:06.682042-05:00","created_by":"daemon"}]}
{"id":"oaks-7k7w","title":"web-edit: Create FormField component","description":"Create web/src/lib/components/FormField.svelte:\n\n**Features:**\n- Labeled input wrapper with consistent styling\n- Error state display (red border, error message below)\n- Required field indicator (*)\n- Help text support\n- Multiple input types via slot\n\n**Props:**\n- label: string\n- name: string (for htmlFor)\n- error?: string\n- required?: boolean\n- helpText?: string\n\n**Slots:**\n- default: input element (input, textarea, select, TagInput, etc.)\n\n**Accessibility:**\n- Label properly associated with input\n- Error linked via aria-describedby\n- aria-invalid when error present","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T18:57:49.465865-05:00","updated_at":"2025-12-31T11:00:59.41883-05:00","closed_at":"2025-12-31T11:00:59.41883-05:00","created_by":"jeff"}
{"id":"oaks-26qm.4.5","title":"api: Configure custom domain","description":"Set up api.oakcompendium.com domain.\n\n## DNS Configuration\nAdd CNAME record:\n```\napi.oakcompendium.com -\u003e oak-compendium-api.fly.dev\n```\n\n## Fly.io Certificate\n```bash\nfly certs add api.oakcompendium.com\nfly certs show api.oakcompendium.com\n```\n\n## Verification\n- Wait for DNS propagation (up to 24h, usually minutes)\n- fly certs check api.oakcompendium.com\n- curl https://api.oakcompendium.com/api/v1/health\n\n## Notes\n- Fly.io auto-provisions Let's Encrypt certificate\n- Certificate renews automatically\n- Both apex and www handled (if configured)","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T17:26:04.307214-05:00","updated_at":"2025-12-30T11:55:29.646326-05:00","closed_at":"2025-12-30T11:55:29.646326-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-26qm.4.5","depends_on_id":"oaks-26qm.4","type":"parent-child","created_at":"2025-12-29T17:26:04.307677-05:00","created_by":"daemon"},{"issue_id":"oaks-26qm.4.5","depends_on_id":"oaks-26qm.4.3","type":"blocks","created_at":"2025-12-29T17:28:01.105082-05:00","created_by":"daemon"}]}
{"id":"oaks-qsal","title":"Integration testing for CLI embedded and remote modes","description":"**Spec Reference:** openspec/changes/consolidate-db-code/tasks.md Section 6\n\nAdd comprehensive integration tests for the new architecture.\n\n**Tasks:**\n- [ ] Add integration tests for embedded API mode\n- [ ] Add integration tests for remote API mode\n- [ ] Test bidirectional relationship consistency (hybrid parents)\n- [ ] Test mode switching (--local vs --profile)\n- [ ] Run full test suite and fix any failures","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T17:04:20.131933-05:00","updated_at":"2025-12-30T18:10:00.604578-05:00","closed_at":"2025-12-30T18:10:00.604578-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-qsal","depends_on_id":"oaks-ub3s","type":"blocks","created_at":"2025-12-30T17:04:37.587238-05:00","created_by":"daemon"}]}
{"id":"oaks-sugk","title":"Secure YAML deserialization in CLI","description":"HIGH: cli/internal/editor/editor.go:195,344 uses yaml.v3 without safe mode. YAML tags could execute code. Use KnownFields(true) and validate after unmarshaling.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-27T14:21:45.98309-05:00","updated_at":"2025-12-27T14:36:57.961933-05:00","closed_at":"2025-12-27T14:36:57.961933-05:00"}
{"id":"oaks-fol8","title":"cli-Document CLI/API split changes","description":"Update documentation for new project structure.\n\nSee: openspec/changes/refactor-cli-api-split/tasks.md Section 8\n\nTasks:\n- Update CLAUDE.md with new project structure\n- Update cli/README.md with remote mode and profile docs\n- Create api/README.md for server documentation\n- Update data flow diagram to show CLI↔API relationship\n- Add example ~/.oak/config.yaml to docs\n- Update CLAUDE.md CLI/API workflow sections with new build instructions (Makefiles)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T13:22:48.281308-05:00","updated_at":"2025-12-30T15:51:26.066895-05:00","closed_at":"2025-12-30T15:51:26.066895-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-fol8","depends_on_id":"oaks-hecy","type":"blocks","created_at":"2025-12-30T14:06:51.272692-05:00","created_by":"daemon"},{"issue_id":"oaks-fol8","depends_on_id":"oaks-v2fg","type":"blocks","created_at":"2025-12-30T14:06:51.315391-05:00","created_by":"daemon"}]}
{"id":"oaks-jc6e","title":"web-edit: Handle source delete with constraint checking","description":"Implement source deletion with referential integrity:\n\n**API constraints:**\n- Cannot delete source if species_sources reference it (409 Conflict)\n- This is a hard constraint - sources with data cannot be deleted\n\n**Delete flow:**\n1. User clicks Delete\n2. Pre-flight check: count species using this source\n3. If species exist: show error \"Cannot delete: X species have data from this source\"\n4. If deletable (no species_sources): show confirm dialog\n5. On confirm: call deleteSource()\n6. Handle 409 gracefully with user-friendly message\n\n**UI:**\n- Clear error explaining why deletion is blocked\n- Suggest: \"Remove this source's data from all species first\"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T19:00:12.935237-05:00","updated_at":"2025-12-31T13:09:28.963769-05:00","closed_at":"2025-12-31T13:09:28.963769-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-jc6e","depends_on_id":"oaks-p7sc","type":"blocks","created_at":"2025-12-30T19:00:20.970264-05:00","created_by":"daemon"},{"issue_id":"oaks-jc6e","depends_on_id":"oaks-9r8n","type":"blocks","created_at":"2025-12-30T19:00:21.012206-05:00","created_by":"daemon"}]}
{"id":"oaks-26qm","title":"api: CRUD API Server Implementation","description":"Master epic for implementing the Oak Compendium CRUD API server.\n\n## Overview\nRESTful API server exposing CRUD operations for all database tables, deployed to Fly.io.\n\n## OpenSpec Reference\nSee `openspec/changes/add-crud-api-server/` for full specification:\n- `proposal.md` - scope and rationale\n- `design.md` - 14 technical decisions\n- `spec.md` - 17 requirements, 68 scenarios\n- `tasks.md` - implementation checklist\n\n## Key Decisions\n- Framework: Chi router\n- Auth: API key for writes only (reads public)\n- Rate limiting: All endpoints\n- Deployment: Fly.io with persistent volume\n- Domain: api.oakcompendium.com\n\n## Work Areas\n1. Core Infrastructure (setup, middleware, serve command)\n2. CRUD Endpoints (species, taxa, sources, species-sources)\n3. Deployment (Fly.io, GitHub Actions, custom domain)\n4. Operations (backup, security review)\n5. Web App Integration (future phase)","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-29T17:22:14.346804-05:00","updated_at":"2025-12-30T12:56:34.875405-05:00","closed_at":"2025-12-30T12:56:34.875405-05:00","created_by":"jeff"}
{"id":"oaks-8qt","title":"Accessibility improvements for web app","description":"Ensure the Quercus Compendium web app meets WCAG 2.1 AA accessibility standards. This epic covers all standard accessibility requirements including keyboard navigation, screen reader support, color contrast, focus management, and more.","status":"closed","priority":2,"issue_type":"epic","created_at":"2025-12-15T21:47:27.282883-05:00","updated_at":"2025-12-23T19:02:03.019381-05:00","closed_at":"2025-12-23T19:02:03.019381-05:00","dependencies":[{"issue_id":"oaks-8qt","depends_on_id":"oaks-s9j","type":"blocks","created_at":"2025-12-15T21:48:05.483497-05:00","created_by":"daemon"},{"issue_id":"oaks-8qt","depends_on_id":"oaks-uj5","type":"blocks","created_at":"2025-12-15T21:48:05.322925-05:00","created_by":"daemon"},{"issue_id":"oaks-8qt","depends_on_id":"oaks-8qs","type":"blocks","created_at":"2025-12-15T21:48:05.154286-05:00","created_by":"daemon"},{"issue_id":"oaks-8qt","depends_on_id":"oaks-q7i","type":"blocks","created_at":"2025-12-15T21:48:05.090175-05:00","created_by":"daemon"},{"issue_id":"oaks-8qt","depends_on_id":"oaks-cfu","type":"blocks","created_at":"2025-12-15T21:48:05.02564-05:00","created_by":"daemon"},{"issue_id":"oaks-8qt","depends_on_id":"oaks-746","type":"blocks","created_at":"2025-12-15T21:48:05.186548-05:00","created_by":"daemon"},{"issue_id":"oaks-8qt","depends_on_id":"oaks-7gi","type":"blocks","created_at":"2025-12-15T21:48:05.354-05:00","created_by":"daemon"},{"issue_id":"oaks-8qt","depends_on_id":"oaks-cya","type":"blocks","created_at":"2025-12-15T21:48:05.450225-05:00","created_by":"daemon"},{"issue_id":"oaks-8qt","depends_on_id":"oaks-k8f","type":"blocks","created_at":"2025-12-15T21:48:05.121178-05:00","created_by":"daemon"},{"issue_id":"oaks-8qt","depends_on_id":"oaks-7k9","type":"blocks","created_at":"2025-12-15T21:48:05.418325-05:00","created_by":"daemon"},{"issue_id":"oaks-8qt","depends_on_id":"oaks-0xw","type":"blocks","created_at":"2025-12-15T21:48:05.385643-05:00","created_by":"daemon"},{"issue_id":"oaks-8qt","depends_on_id":"oaks-0kb","type":"blocks","created_at":"2025-12-15T21:48:05.058846-05:00","created_by":"daemon"}]}
{"id":"oaks-fmr","title":"Handle edge case: species with no sources in detail view","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T15:17:32.152804-05:00","updated_at":"2025-12-15T16:22:41.324531-05:00","closed_at":"2025-12-15T16:22:41.324531-05:00","dependencies":[{"issue_id":"oaks-fmr","depends_on_id":"oaks-8oo","type":"blocks","created_at":"2025-12-15T15:17:38.015344-05:00","created_by":"daemon"}]}
{"id":"oaks-26qm.3.4","title":"api: Implement sources endpoints","description":"Create CRUD endpoints for sources table.\n\n## File: cli/internal/api/handlers/sources.go\n\n## Endpoints\nGET    /api/v1/sources      - List all\nGET    /api/v1/sources/:id  - Get by ID\nPOST   /api/v1/sources      - Create (auth required)\nPUT    /api/v1/sources/:id  - Update (auth required)\nDELETE /api/v1/sources/:id  - Delete (auth required)\n\n## Request Body\n```json\n{\n  \"source_type\": \"website\",\n  \"name\": \"iNaturalist\",\n  \"description\": \"Citizen science platform\",\n  \"author\": null,\n  \"year\": 2024,\n  \"url\": \"https://inaturalist.org\",\n  \"license\": \"CC BY-NC\",\n  \"license_url\": \"...\"\n}\n```\n\n## Validation\n- source_type: required\n- name: required\n\n## Response (create)\n- Return created source with assigned ID\n- Status 201 Created\n\n## Notes\n- No pagination (very small dataset, ~5 sources)\n- ID is auto-increment integer","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T17:25:37.763843-05:00","updated_at":"2025-12-30T11:07:50.43561-05:00","closed_at":"2025-12-30T11:07:50.43561-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-26qm.3.4","depends_on_id":"oaks-26qm.3.1","type":"blocks","created_at":"2025-12-29T17:27:08.80783-05:00","created_by":"daemon"},{"issue_id":"oaks-26qm.3.4","depends_on_id":"oaks-26qm.3","type":"parent-child","created_at":"2025-12-29T17:25:37.764354-05:00","created_by":"daemon"}]}
{"id":"oaks-p7dq","title":"Implement embedded API mode for CLI local operations","description":"**Spec Reference:** openspec/changes/consolidate-db-code/tasks.md Section 2\n\nEnable CLI to use the API server for local operations by embedding it in-process.\n\n**Behavior:**\n- `oak --local` spawns embedded API on localhost\n- Uses HTTP client to communicate (same as remote)\n- Shuts down API when command completes\n- Auth bypassed for localhost connections\n\n**Tasks:**\n- [ ] Create cli/internal/embedded/ package\n- [ ] Implement embedded server startup (localhost-only, random port)\n- [ ] Add --local flag behavior to root command\n- [ ] Ensure auth bypass for embedded mode\n- [ ] Test embedded mode with all CLI commands","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-30T17:03:59.230639-05:00","updated_at":"2025-12-30T17:31:38.311087-05:00","closed_at":"2025-12-30T17:31:38.311087-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-p7dq","depends_on_id":"oaks-r7jm","type":"blocks","created_at":"2025-12-30T17:04:36.871761-05:00","created_by":"daemon"}]}
{"id":"oaks-30ot","title":"web-edit: Implement species delete with cascade warning","description":"Implement species deletion:\n\n**Delete flow:**\n1. User clicks Delete → DeleteConfirmDialog opens\n2. Show cascade warning: \"Delete Quercus alba? This will also remove data from X sources.\"\n3. User confirms → show loading state\n4. Call deleteSpecies(name)\n5. On success:\n   - Close dialog\n   - Show success toast\n   - Navigate to species list\n   - Trigger data refresh\n6. On error:\n   - Show error toast\n   - Keep dialog open\n\n**Cascade info:**\n- Count sources from species.sources array\n- Display in dialog: \"This will also remove data from 3 sources.\"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T18:58:28.72451-05:00","updated_at":"2025-12-31T12:06:45.84282-05:00","closed_at":"2025-12-31T12:06:45.84282-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-30ot","depends_on_id":"oaks-9r8n","type":"blocks","created_at":"2025-12-30T18:58:43.554443-05:00","created_by":"daemon"},{"issue_id":"oaks-30ot","depends_on_id":"oaks-p7sc","type":"blocks","created_at":"2025-12-30T18:58:43.520098-05:00","created_by":"daemon"}]}
{"id":"oaks-l5p8","title":"api: Include articles in export","description":"Add articles to JSON export endpoint.\n\nExport format:\n```json\n{\n  \"articles\": [\n    {\n      \"slug\": \"documenting-oaks\",\n      \"title\": \"How to Document an Oak\",\n      \"author\": \"Jeff Clark\",\n      \"published_at\": \"2025-01-15\",\n      \"updated_at\": \"2025-01-20\",\n      \"tags\": [\"guides\"],\n      \"content\": \"# How to Document...\"\n    }\n  ]\n}\n```\n\nNotes:\n- Only include published articles (is_published=true)\n- Export format is additive (old clients ignore articles key)\n\nFiles:\n- api/internal/export/export.go\n\nPart of: Content Expansion (Phase 2: Reference Articles)","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-02T13:52:40.515643-05:00","updated_at":"2026-01-02T13:52:40.515643-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-l5p8","depends_on_id":"oaks-j28k","type":"blocks","created_at":"2026-01-02T13:53:38.310832-05:00","created_by":"daemon"}]}
{"id":"oaks-lhyt","title":"ios-dictation-ux: Reduce taps to start dictation","description":"Improve dictation UX - currently requires too many taps to start dictating.\n\n## Current Flow (problematic)\n1. Open note\n2. Tap field\n3. Tap small blue mic icon\n4. Enter dictation panel\n5. Press blue mic icon to start\n\n## Desired Improvements\n- When there's no content, go directly to edit view with all fields empty\n- Find a way to start dictation without clicking small mic icon\n- Consider: auto-start dictation when entering dictation panel?\n- Consider: larger/more prominent dictation button?\n- Consider: shake-to-dictate or other gesture?\n\n## Goal\nMinimize friction for field dictation in the note editor.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-29T16:01:10.309437-05:00","updated_at":"2025-12-29T16:01:10.309437-05:00","created_by":"jeff"}
{"id":"oaks-1i8","title":"Implement source comparison view","description":"Build the component showing two sources side-by-side for a species. Display all fields from both sources in a comparable format.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-16T10:45:15.14032-05:00","updated_at":"2025-12-23T19:37:42.677637-05:00","closed_at":"2025-12-23T19:37:42.67764-05:00","dependencies":[{"issue_id":"oaks-1i8","depends_on_id":"oaks-p2o","type":"blocks","created_at":"2025-12-16T10:45:30.226347-05:00","created_by":"daemon"}]}
{"id":"oaks-pqh2","title":"web-edit: Add ARIA labels and focus management","description":"Implement screen reader accessibility:\n\n**Modal ARIA:**\n- role=\"dialog\" on modal container\n- aria-modal=\"true\"\n- aria-labelledby pointing to modal title\n- aria-describedby for optional description\n\n**Form field ARIA:**\n- aria-label or aria-labelledby for all inputs\n- aria-invalid=\"true\" when field has error\n- aria-describedby linking to error message\n- aria-required=\"true\" for required fields\n\n**Focus management:**\n- Move focus to modal when opened\n- Return focus to trigger element when closed\n- Announce errors to screen readers (aria-live region)\n\n**Testing:**\n- Test with VoiceOver (macOS) or NVDA (Windows)\n- Verify all interactive elements are reachable\n- Verify form submission feedback is announced","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T19:01:08.450636-05:00","updated_at":"2025-12-31T13:21:17.853995-05:00","closed_at":"2025-12-31T13:21:17.853995-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-pqh2","depends_on_id":"oaks-2d63","type":"blocks","created_at":"2025-12-30T19:01:16.661089-05:00","created_by":"daemon"}]}
{"id":"oaks-mi2t","title":"web-edit: Implement full data refresh after write operations","description":"Create data refresh mechanism for post-edit consistency:\n\n**Refresh flow:**\n1. After successful write operation\n2. Fetch fresh data from `/api/v1/export`\n3. Clear existing IndexedDB tables\n4. Repopulate IndexedDB with fresh data\n5. Update Svelte stores from refreshed IndexedDB\n6. Show loading indicator during refresh\n\n**Implementation in dataStore.js:**\n```javascript\nexport async function refreshData() {\n  isRefreshing.set(true);\n  try {\n    const data = await fetchExportData();\n    await clearIndexedDB();\n    await populateFromJson(data);\n    await loadStoresFromIndexedDB();\n  } finally {\n    isRefreshing.set(false);\n  }\n}\n```\n\n**Integration points:**\n- Call after: createSpecies, updateSpecies, deleteSpecies\n- Call after: all taxa CRUD operations\n- Call after: all source CRUD operations\n- Call after: all species-source CRUD operations\n\n**Edge cases:**\n- Handle refresh failure gracefully (show error, don't lose confirmation)\n- Disable edit buttons during refresh (prevent race condition)\n- Return to correct view after refresh (species may have been renamed)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T19:01:07.625469-05:00","updated_at":"2025-12-31T13:10:47.382049-05:00","closed_at":"2025-12-31T13:10:47.382049-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-mi2t","depends_on_id":"oaks-9r8n","type":"blocks","created_at":"2025-12-30T19:01:16.339609-05:00","created_by":"daemon"}]}
{"id":"oaks-ux10","title":"web-edit: Create TaxonEditForm component","description":"Create web/src/lib/components/TaxonEditForm.svelte:\n\n**Fields:**\n- name (text input, required)\n- level (dropdown: subgenus, section, subsection, complex)\n- parent (TaxonSelect, filtered by level hierarchy)\n- author (text input)\n- notes (textarea)\n- links (TagInput for URLs)\n\n**Parent selection rules:**\n- subgenus: no parent (or genus-level, optional)\n- section: parent must be subgenus\n- subsection: parent must be section\n- complex: parent must be subsection or section\n\n**Validation:**\n- Name required\n- Level required\n- Parent must be valid for level\n- API validates hierarchy server-side\n\n**Form behavior:**\n- Pre-fill for edit mode\n- Empty for create mode\n- toApiFormat conversion before submit","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T18:59:43.25157-05:00","updated_at":"2025-12-31T13:02:56.159115-05:00","closed_at":"2025-12-31T13:02:56.159115-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-ux10","depends_on_id":"oaks-7k7w","type":"blocks","created_at":"2025-12-30T18:59:51.026227-05:00","created_by":"daemon"},{"issue_id":"oaks-ux10","depends_on_id":"oaks-v3qw","type":"blocks","created_at":"2025-12-30T18:59:51.061302-05:00","created_by":"daemon"},{"issue_id":"oaks-ux10","depends_on_id":"oaks-d1d3","type":"blocks","created_at":"2025-12-30T18:59:51.096039-05:00","created_by":"daemon"},{"issue_id":"oaks-ux10","depends_on_id":"oaks-2d63","type":"blocks","created_at":"2025-12-30T18:59:50.991849-05:00","created_by":"daemon"}]}
{"id":"oaks-tzr","title":"Architecture audit","description":"Review overall system architecture, data flow, component boundaries, and design decisions. Identify technical debt and improvement opportunities","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T14:16:35.685695-05:00","updated_at":"2025-12-27T14:43:44.743674-05:00","closed_at":"2025-12-27T14:43:44.743674-05:00"}
{"id":"oaks-o9i","title":"Define taxonomy structure and hierarchy details","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T15:51:46.202303-05:00","updated_at":"2025-12-14T16:36:22.917603-05:00","closed_at":"2025-12-14T16:36:22.917603-05:00"}
{"id":"oaks-l6y3","title":"api-cli-client: Add API client mode to CLI","description":"Enable CLI to operate in API client mode (optional, for remote editing).\n\n## Use Case\n- Edit data from a machine that doesn't have the SQLite DB\n- CLI talks to API instead of local DB\n\n## Implementation\n- Add --api-url and --api-key flags\n- Route commands through API client instead of direct DB\n- Useful for: editing from laptop while server runs elsewhere\n\n## Priority\nLower priority - direct DB access works fine when on same machine as DB.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-29T16:25:38.130392-05:00","updated_at":"2025-12-29T17:16:03.787756-05:00","created_by":"jeff","deleted_at":"2025-12-29T17:16:03.787756-05:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"oaks-aty","title":"Make taxonomy levels clickable to show taxon view","description":"On the species detail page, make each taxonomy level (Subgenus, Section, Subsection, Complex) clickable. Clicking should navigate to a taxon view showing all species in that taxon, plus any sub-taxa within it.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-15T11:44:01.523346-05:00","updated_at":"2025-12-15T21:52:53.727328-05:00","closed_at":"2025-12-15T21:52:53.727328-05:00","dependencies":[{"issue_id":"oaks-aty","depends_on_id":"oaks-bx0","type":"blocks","created_at":"2025-12-15T16:38:25.714933-05:00","created_by":"daemon"},{"issue_id":"oaks-aty","depends_on_id":"oaks-ry7","type":"blocks","created_at":"2025-12-15T16:44:18.132403-05:00","created_by":"daemon"},{"issue_id":"oaks-aty","depends_on_id":"oaks-4zk","type":"blocks","created_at":"2025-12-15T11:44:20.93163-05:00","created_by":"daemon"}]}
{"id":"oaks-0qt","title":"Implement Markdown frontmatter parser in CLI","description":"Create a parser that handles Markdown with YAML frontmatter format:\n- Parse YAML frontmatter (between --- markers)\n- Parse ## Section headers and map to database fields\n- Handle section-to-field mapping (case-insensitive)\n- Generate template in new format\n- Change temp file extension to .md for syntax highlighting","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T10:24:48.244715-05:00","updated_at":"2025-12-19T12:20:12.085016-05:00","closed_at":"2025-12-19T12:20:12.085016-05:00","dependencies":[{"issue_id":"oaks-0qt","depends_on_id":"oaks-791","type":"blocks","created_at":"2025-12-19T10:24:57.41443-05:00","created_by":"daemon"}]}
{"id":"oaks-77w","title":"Improve data editing format for multi-line content","description":"Reduce friction in the data editing workflow, particularly for notes and observations.\n\n## Problem\n- CLI-only workflow requires laptop, multiple steps\n- YAML editing is awkward for multi-line content\n- No mobile capture option\n- High friction from note → published\n\n## Solution Architecture\n- **Bear** = Quick capture layer (mobile, low friction)\n- **CLI** = Bulk import, source/taxonomy management, `oak note` for laptop editing\n- **Web** = Read-only display with Markdown rendering\n\n## Use Cases\n1. Quick notes/observations → Bear\n2. Bulk import → CLI\n3. Source management → CLI\n4. Taxonomy management → CLI","status":"closed","priority":2,"issue_type":"epic","created_at":"2025-12-19T10:12:57.284565-05:00","updated_at":"2025-12-21T10:48:29.566932-05:00","closed_at":"2025-12-21T10:48:29.566932-05:00","dependencies":[{"issue_id":"oaks-77w","depends_on_id":"oaks-93p","type":"blocks","created_at":"2025-12-19T12:18:03.565464-05:00","created_by":"daemon"},{"issue_id":"oaks-77w","depends_on_id":"oaks-7qp","type":"blocks","created_at":"2025-12-19T10:13:24.853214-05:00","created_by":"daemon"},{"issue_id":"oaks-77w","depends_on_id":"oaks-0qt","type":"blocks","created_at":"2025-12-19T10:24:57.74271-05:00","created_by":"daemon"},{"issue_id":"oaks-77w","depends_on_id":"oaks-bt7","type":"blocks","created_at":"2025-12-19T10:24:57.8435-05:00","created_by":"daemon"}]}
{"id":"oaks-26qm.1.2","title":"api: Security review and hardening","description":"Comprehensive security review before production.\n\n## Checklist\n\n### Authentication\n- [ ] All POST/PUT/DELETE require valid API key\n- [ ] API key comparison is constant-time\n- [ ] API key not logged anywhere\n- [ ] 401 response doesn't leak info\n\n### Input Validation\n- [ ] All endpoints validate input\n- [ ] SQL injection prevented (parameterized queries)\n- [ ] Path traversal prevented\n- [ ] JSON size limits enforced\n\n### Rate Limiting\n- [ ] All endpoints rate limited\n- [ ] Rate limits appropriate for use case\n- [ ] 429 response includes Retry-After\n\n### CORS\n- [ ] Only oakcompendium.org/com allowed\n- [ ] localhost allowed only in dev\n- [ ] Credentials handling correct\n\n### Headers\n- [ ] X-Content-Type-Options: nosniff\n- [ ] X-Frame-Options: DENY\n- [ ] Content-Security-Policy set\n\n### Dependencies\n- [ ] Run govulncheck\n- [ ] No known vulnerabilities\n- [ ] Dependencies up to date\n\n### Logging\n- [ ] Sensitive data not logged\n- [ ] Request IDs for tracing\n- [ ] Errors logged with context\n\n## Verification\n```bash\ncd cli\ngovulncheck ./...\n```","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T17:25:36.939284-05:00","updated_at":"2025-12-30T12:05:15.60149-05:00","closed_at":"2025-12-30T12:05:15.60149-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-26qm.1.2","depends_on_id":"oaks-26qm.1","type":"parent-child","created_at":"2025-12-29T17:25:36.942943-05:00","created_by":"daemon"}]}
{"id":"oaks-n75a","title":"Add security testing to CI/CD","description":"LOW: Add npm audit, pip audit, go mod verify to GitHub Actions. Regular dependency vulnerability scanning.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-27T14:21:58.855342-05:00","updated_at":"2025-12-27T14:58:15.102887-05:00","closed_at":"2025-12-27T14:58:15.102887-05:00"}
{"id":"oaks-26qm.4","title":"api: Deployment \u0026 Infrastructure","description":"Deploy API server to Fly.io with CI/CD.\n\n## Scope\n- Dockerfile for containerized deployment\n- fly.toml configuration\n- Fly.io app and volume setup\n- Custom domain (api.oakcompendium.com)\n- GitHub Actions workflow for automated deployment\n- Database seeding to production\n\n## Fly.io Configuration\n- Region: sjc (San Jose)\n- Machine: shared-cpu-1x, 256MB RAM\n- Volume: oak_data mounted at /data\n- Auto-stop disabled (keep responsive)\n- TLS via Fly.io edge\n\n## Custom Domain Setup\n1. Add CNAME record: api.oakcompendium.com -\u003e oak-compendium-api.fly.dev\n2. Run: fly certs add api.oakcompendium.com\n3. Fly.io auto-provisions TLS certificate\n\n## Environment Variables\n- OAK_DB_PATH=/data/oak_compendium.db\n- OAK_API_KEY (secret)\n- OAK_ENV=production\n\n## Parallelization\n- Dockerfile and fly.toml can be created in parallel\n- GitHub Actions depends on Fly.io setup\n- Custom domain depends on initial deployment","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-29T17:23:00.893112-05:00","updated_at":"2025-12-30T12:22:18.301412-05:00","closed_at":"2025-12-30T12:22:18.301412-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-26qm.4","depends_on_id":"oaks-26qm.2","type":"blocks","created_at":"2025-12-29T17:26:34.143996-05:00","created_by":"daemon"},{"issue_id":"oaks-26qm.4","depends_on_id":"oaks-26qm","type":"parent-child","created_at":"2025-12-29T17:23:00.895219-05:00","created_by":"daemon"}]}
{"id":"oaks-apqj","title":"Research iOS Speech framework for dictation","description":"Research Apple's Speech framework for field-by-field dictation.\n\n## Questions to Answer\n- Speech framework vs SFSpeechRecognizer vs dictation keyboard\n- On-device vs server-side recognition (privacy, offline support)\n- How to handle punctuation, scientific names, Latin terms\n- Background audio handling\n- Required permissions and privacy considerations\n\n## Prototype Goals\n- Simple SwiftUI view with dictation button\n- Display recognized text in real-time\n- Test accuracy with botanical terminology","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T15:40:46.36343-05:00","updated_at":"2025-12-27T16:05:36.206577-05:00","closed_at":"2025-12-27T16:05:36.206577-05:00"}
{"id":"oaks-doc9","title":"api-impl: Implement oak serve command","description":"Implement the API server in the existing CLI codebase.\n\n## Work\n- Add `oak serve` command\n- Implement CRUD endpoints for notes, sources\n- Implement read endpoints for species, taxonomy\n- Reuse existing DB layer (internal/db)\n- JSON serialization\n- Graceful shutdown\n\n## Technical Decisions\n- Router choice (stdlib, chi, gin?)\n- Request logging\n- Error handling patterns","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-29T16:25:36.817778-05:00","updated_at":"2025-12-29T17:16:03.78341-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-doc9","depends_on_id":"oaks-t41l","type":"blocks","created_at":"2025-12-29T16:25:48.809604-05:00","created_by":"daemon"}],"deleted_at":"2025-12-29T17:16:03.78341-05:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"oaks-6xf","title":"Multi-source UI: Add source selector dropdown to species detail","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-15T15:17:31.301617-05:00","updated_at":"2025-12-19T16:21:08.115332-05:00","closed_at":"2025-12-19T16:21:08.115332-05:00"}
{"id":"oaks-fszu","title":"web-edit: Allow deleting species-source records","description":"Enable removing a source's data from a species:\n\n**Use case:**\n- Species has data from 3 sources\n- User wants to remove Source 2's data (not the species itself)\n- Delete just the species_source record\n\n**UI:**\n- Delete button within each source tab (near Edit button)\n- Red/destructive styling\n- DeleteConfirmDialog: \"Remove Oaks of the World data from Quercus alba?\"\n- No cascade (species-source has no dependents)\n\n**API:**\n- Call deleteSpeciesSource(speciesName, sourceId)\n- On success: toast, refresh, close\n- Tab for that source disappears from view","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T18:59:10.305042-05:00","updated_at":"2025-12-31T12:17:38.531102-05:00","closed_at":"2025-12-31T12:17:38.531102-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-fszu","depends_on_id":"oaks-p7sc","type":"blocks","created_at":"2025-12-30T18:59:20.545885-05:00","created_by":"daemon"},{"issue_id":"oaks-fszu","depends_on_id":"oaks-9r8n","type":"blocks","created_at":"2025-12-30T18:59:20.579346-05:00","created_by":"daemon"}]}
{"id":"oaks-tpq9","title":"web-edit: Create LoadingSpinner component","description":"Create web/src/lib/components/LoadingSpinner.svelte:\n\n**Use cases:**\n- Save button loading state\n- Data refresh indicator\n- Form submission in progress\n\n**Features:**\n- Inline spinner (for buttons)\n- Full-screen overlay option (for page-level operations)\n- Size variants (small, medium, large)\n- Optional message text\n\n**Props:**\n- size?: 'sm' | 'md' | 'lg'\n- overlay?: boolean\n- message?: string\n\n**Accessibility:**\n- aria-busy=\"true\" on parent\n- aria-label for spinner\n- Screen reader announcement of loading state","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T18:57:50.189118-05:00","updated_at":"2025-12-31T11:00:41.872185-05:00","closed_at":"2025-12-31T11:00:41.872185-05:00","created_by":"jeff"}
{"id":"oaks-pcu","title":"User interview: data entry pain points","description":"## Interview Summary (2025-12-27)\n\n### Current Workflow\n- Physical books/papers → manual typing via CLI\n- ~5 min per species, 10-15 species per session (~1 hour)\n- Sources: field guides, technical botany books, dichotomous keys (semi-structured)\n- Key book: \"Oaks of North America\" (Miller \u0026 Lamb) - only oak-dedicated book\n\n### Primary Pain Point\n- **Typing is the main bottleneck** - no digital sources to copy from\n\n### Desired Solution\niOS app with field-by-field dictation:\n1. Select/create species entry\n2. Tap field → dictate → next field (Leaves? → Bark? → Acorns? etc.)\n3. Optional: OCR mode for future enhancement (photo → text)\n4. Saves as markdown to iCloud\n5. CLI imports from iCloud folder\n\n### Why Dictation First (vs OCR)\n- Each book is structured differently\n- Dictation is book-agnostic, OCR would need per-book parsing rules\n\n### Constraints\n- iOS only\n- OSS only (no budget for paid APIs)\n- Can deploy via TestFlight (has Apple Dev account)\n- No App Store submission needed\n\n### Proposed Architecture\n- **iOS App**: SwiftUI, Speech framework for dictation, saves markdown to iCloud\n- **CLI Command**: `oak import-notes` reads markdown from iCloud folder\n- **Markdown Format**: Structured with H2 headers per field, species name in H1","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T14:16:35.882642-05:00","updated_at":"2025-12-27T15:40:19.271883-05:00","closed_at":"2025-12-27T15:40:19.271883-05:00"}
{"id":"oaks-r2tn","title":"web-edit: Add 'Create Taxon' in taxonomy browser","description":"Add entry point for creating new taxa:\n\n**UI options:**\n1. \"+ Add\" button in taxonomy browser header\n2. Context menu \"Add child\" on each taxon\n\n**Recommended: Header button approach:**\n- \"+\" or \"Create Taxon\" button\n- Opens TaxonEditForm in create mode\n- Pre-select parent based on current view context (optional)\n\n**Create flow:**\n- Fill form with name, level, parent\n- Submit → API creates taxon\n- Refresh taxonomy data\n- Navigate to new taxon in tree","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T18:59:43.413865-05:00","updated_at":"2025-12-31T13:00:53.624055-05:00","closed_at":"2025-12-31T13:00:53.624055-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-r2tn","depends_on_id":"oaks-ux10","type":"blocks","created_at":"2025-12-30T18:59:51.227837-05:00","created_by":"daemon"},{"issue_id":"oaks-r2tn","depends_on_id":"oaks-9r8n","type":"blocks","created_at":"2025-12-30T18:59:51.262097-05:00","created_by":"daemon"}]}
{"id":"oaks-0e8","title":"Add statistics command to CLI","status":"open","priority":4,"issue_type":"feature","created_at":"2025-12-14T19:16:00.587531-05:00","updated_at":"2025-12-23T18:52:44.025852-05:00"}
{"id":"oaks-8jz2","title":"Add global 401 handling to web/src/lib/apiClient.js","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-31T11:56:28.548301-05:00","updated_at":"2025-12-31T11:57:23.910081-05:00","closed_at":"2025-12-31T11:57:23.910081-05:00","created_by":"jeff"}
{"id":"oaks-h865","title":"Extend apiClient.js with authenticated write methods","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-31T11:51:49.86708-05:00","updated_at":"2025-12-31T11:56:06.436655-05:00","closed_at":"2025-12-31T11:56:06.436655-05:00","created_by":"jeff"}
{"id":"oaks-26qm.3.1","title":"api: Implement health endpoints","description":"Create health check endpoints for monitoring.\n\n## File: cli/internal/api/handlers/health.go\n\n## Endpoints\nGET /api/v1/health - Liveness check (always 200 if server running)\nGET /api/v1/health/ready - Readiness check (verifies DB connection)\n\n## Responses\nLiveness:\n```json\n{\"status\": \"ok\"}\n```\n\nReadiness (success):\n```json\n{\"status\": \"ready\", \"database\": \"connected\"}\n```\n\nReadiness (failure - 503):\n```json\n{\"status\": \"unavailable\", \"database\": \"error\", \"error\": \"...\"}\n```\n\n## Implementation\n- Liveness: immediate 200 response\n- Readiness: execute `SELECT 1` to verify DB\n- No authentication required\n\n## Rate Limiting Exception\nHealth endpoints are **exempted from rate limiting** (unlike other endpoints).\nRationale: Monitoring systems (Fly.io, uptime monitors) need reliable access.\nThis is a deliberate exception to the \"rate limit all endpoints\" design decision.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T17:25:37.311845-05:00","updated_at":"2025-12-30T11:01:25.832193-05:00","closed_at":"2025-12-30T11:01:25.832193-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-26qm.3.1","depends_on_id":"oaks-26qm.3","type":"parent-child","created_at":"2025-12-29T17:25:37.312371-05:00","created_by":"daemon"}]}
{"id":"oaks-4oed","title":"api: Update taxa handlers for content field","description":"Update API taxa endpoints to handle content field:\n\n1. GET /api/v1/taxa/:level/:name - include content and content_updated_at in response\n2. PUT /api/v1/taxa/:level/:name - accept content field, update content_updated_at timestamp\n3. GET /api/v1/export - include taxa content fields in export\n\nFiles to modify:\n- api/internal/handlers/taxa.go\n- api/internal/db/taxa.go\n- api/internal/models/taxa.go\n- api/internal/export/export.go\n\nTests:\n- Add tests for content CRUD via existing taxa endpoints\n- Test export includes content\n\nPart of: Content Expansion (Phase 1: Taxa Content)\nSpec: openspec/changes/add-content-expansion/specs/taxa-content/spec.md","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-02T13:52:11.79992-05:00","updated_at":"2026-01-02T13:52:11.79992-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-4oed","depends_on_id":"oaks-rwz0","type":"blocks","created_at":"2026-01-02T13:53:36.715882-05:00","created_by":"daemon"}]}
{"id":"oaks-k7h","title":"Configure Vite for GitHub Pages base path","description":"Set the base path in vite.config.js for GitHub Pages deployment. May need to be '/oaks/' or '/' depending on whether using custom domain or username.github.io/oaks.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-16T12:16:16.765902-05:00","updated_at":"2025-12-16T12:49:41.365275-05:00","closed_at":"2025-12-16T12:49:41.365275-05:00"}
{"id":"oaks-oei9","title":"Refactor Web Data Layer to Stateless Fetch-Per-View","description":"Remove IndexedDB, remove static JSON, implement fetch-per-view architecture. Each component fetches its own data on mount. No client-side persistence.\n\nSee: openspec/changes/refactor-web-data-layer/\n\n## Branching Strategy\n\n**IMPORTANT**: This work is intentionally separate from the web-editing branch.\n\n1. Create new branch `refactor-data-layer` directly off `main`\n2. Implement all changes on this branch\n3. Test thoroughly (do NOT merge web-editing changes)\n4. Merge to `main` and deploy to production\n5. THEN merge `main` into `web-editing` to bring the refactor into that branch\n\nThis keeps the refactor isolated and testable without entangling it with the edit feature changes.\n\n## Phases\n\n1. API additions (non-breaking)\n2. Web app changes  \n3. API cleanup (remove export endpoint)\n4. Documentation updates\n","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-31T19:56:20.656161-05:00","updated_at":"2026-01-01T20:50:48.15452-05:00","closed_at":"2026-01-01T20:50:48.15452-05:00","created_by":"jeff"}
{"id":"oaks-utut","title":"web-edit: Create Toast notification component","description":"Create web/src/lib/components/Toast.svelte and toastStore.js:\n\n**Toast types:**\n- success: green, checkmark icon\n- error: red, X icon  \n- warning: yellow, warning icon\n- info: blue, info icon\n\n**Features:**\n- Auto-dismiss after 3 seconds (configurable)\n- Manual dismiss via X button\n- Stack multiple toasts\n- Slide-in animation\n\n**Store API:**\n```javascript\ntoast.success('Species updated successfully');\ntoast.error('Failed to save: ' + error.message);\ntoast.warning('Connection lost. Changes preserved.');\n```\n\n**Placement:**\n- Bottom-right of viewport (or top-right on mobile)\n\n**Accessibility:**\n- role=\"alert\" for errors\n- role=\"status\" for success/info\n- aria-live=\"polite\"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T18:57:50.00464-05:00","updated_at":"2025-12-31T11:01:30.074959-05:00","closed_at":"2025-12-31T11:01:30.074959-05:00","created_by":"jeff"}
{"id":"oaks-uxcx","title":"ios-notes-organization: Research taxonomy-based notes organization","description":"Research how to organize notes list by taxonomy for scalability.\n\n## Problem\n- Current flat list won't scale as note collection grows\n- Need efficient search and data entry\n- Should mirror the website approach\n\n## Questions to Answer\n- How does the web app organize species data?\n- What taxonomy hierarchy levels to expose? (subgenus/section/species)\n- Search UX: filter by taxonomy vs full-text search vs both?\n- Navigation: drill-down vs flat list with filters?\n- How to handle hybrids in taxonomy view?\n\n## Deliverable\nDesign document with recommended approach, considering:\n- Consistency with web app\n- iOS-native patterns\n- Scalability for large datasets","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-29T16:01:10.453328-05:00","updated_at":"2025-12-29T16:01:10.453328-05:00","created_by":"jeff"}
{"id":"oaks-26qm.1.3","title":"api: Integration test suite","description":"Create comprehensive API integration tests.\n\n## File: cli/internal/api/api_test.go\n\n## Test Categories\n\n### Health\n- TestHealthEndpoint\n- TestReadinessEndpoint\n- TestReadinessWithDBError\n\n### Authentication\n- TestPublicReadEndpoints (GET species, taxa, sources, export)\n- TestWriteRequiresAuth\n- TestInvalidAPIKey\n- TestMissingAPIKey\n\n### Species CRUD\n- TestListSpecies\n- TestListSpeciesPagination\n- TestListSpeciesFilters (subgenus, section, hybrid)\n- TestGetSpecies\n- TestGetSpeciesNotFound\n- TestCreateSpecies\n- TestCreateSpeciesDuplicate\n- TestUpdateSpecies\n- TestUpdateSpeciesNotFound\n- TestDeleteSpecies\n- TestDeleteSpeciesCascades\n- TestSearchSpecies\n\n### Taxa CRUD\n- TestListTaxa\n- TestListTaxaByLevel\n- TestGetTaxon\n- TestGetTaxonNotFound\n- TestCreateTaxon\n- TestUpdateTaxon\n- TestDeleteTaxon\n\n### Sources CRUD\n- TestListSources\n- TestGetSource\n- TestGetSourceNotFound\n- TestCreateSource\n- TestUpdateSource\n- TestDeleteSource\n\n### Species-Sources CRUD\n- TestListSpeciesSources\n- TestGetSpeciesSource\n- TestCreateSpeciesSource\n- TestUpdateSpeciesSource\n- TestDeleteSpeciesSource\n- TestSpeciesSourceForNonexistentSpecies\n\n### Export\n- TestExportEndpoint\n- TestExportMatchesWebFormat\n\n### Rate Limiting\n- TestRateLimitReads\n- TestRateLimitWrites\n- TestRateLimitHeaders\n- TestHealthExemptFromRateLimit\n\n### Error Handling\n- TestValidationErrors\n- TestNotFoundErrors\n- TestConflictErrors\n- TestInternalErrors\n\n## Test Setup\n- In-memory SQLite database\n- Test fixtures for species/taxa/sources\n- Helper functions for auth headers\n- Table-driven tests where appropriate\n\n## Running\n```bash\ncd cli\ngo test -v ./internal/api/...\ngo test -cover ./internal/api/...\ngo test -race ./internal/api/...  # Check for race conditions\n```","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T17:25:43.783726-05:00","updated_at":"2025-12-30T12:02:36.005124-05:00","closed_at":"2025-12-30T12:02:36.005124-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-26qm.1.3","depends_on_id":"oaks-26qm.1","type":"parent-child","created_at":"2025-12-29T17:25:43.787051-05:00","created_by":"daemon"}]}
{"id":"oaks-b4b","title":"Replace source selector dropdown with tabs","description":"Redesign the source selector in SpeciesDetail.svelte:\n\n**Current issues:**\n- Dropdown feels like a form element, not navigation\n- Unclear which data belongs to which source\n- Takes up a full section for just a control\n\n**New design:**\n- Replace dropdown with horizontal tabs\n- Group all source-dependent fields into a single visual container under the tabs\n- Show license as an icon next to source name with hover tooltip\n- Makes source-to-content relationship explicit\n\n**Affected fields (source-dependent):**\nrange, growth_habit, leaves, fruits, flowers, bark, twigs, buds, local_names, hardiness_habitat, miscellaneous","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-19T16:38:41.765347-05:00","updated_at":"2025-12-19T16:47:04.283087-05:00","closed_at":"2025-12-19T16:47:04.283087-05:00"}
{"id":"oaks-l1n","title":"Add external links to species (name, URL, logo)","description":"Add support for external links on species entries. Each link should have:\n- Name (e.g., 'Wikipedia', 'USDA Plants', 'iNaturalist')\n- URL (the direct link to that species on the external site)\n- Logo (icon/image for visual identification)\n\nThese are reference links to external sources that won't be imported into the database - just linking out for users who want more information.\n\nAffects:\n- CLI database schema (new table or JSON field)\n- JSON export format\n- Web app display (likely in SpeciesDetail component)","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-21T16:10:59.8499-05:00","updated_at":"2025-12-21T16:22:58.250937-05:00","closed_at":"2025-12-21T16:22:58.250937-05:00"}
{"id":"oaks-hecy","title":"cli-Integrate API client into CLI commands","description":"Update CLI commands to use API client for remote operations.\n\nSee: openspec/changes/refactor-cli-api-split/tasks.md Section 5\nSee: openspec/changes/refactor-cli-api-split/specs/cli-api-client/spec.md (Remote operations)\n\nTasks:\n- Update oak find to support remote queries\n- Update oak new to support remote creation (with profile confirmation)\n- Update oak edit to fetch/push via API (with profile confirmation)\n- Update oak delete to support remote deletion (with profile confirmation)\n- Add --local / --remote flags\n- Update oak export with --from-api flag\n- Update oak version to show API version when connected\n- Add --skip-version-check flag","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T13:22:32.866574-05:00","updated_at":"2025-12-30T15:30:32.766215-05:00","closed_at":"2025-12-30T15:30:32.766215-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-hecy","depends_on_id":"oaks-fnid","type":"blocks","created_at":"2025-12-30T14:06:35.241311-05:00","created_by":"daemon"}]}
{"id":"oaks-3y5u","title":"iOS: Notes list view","description":"Build NotesListView with navigation. Create/delete notes. Basic app shell working.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T16:05:55.559466-05:00","updated_at":"2025-12-27T16:55:42.679353-05:00","closed_at":"2025-12-27T16:55:42.679353-05:00","dependencies":[{"issue_id":"oaks-3y5u","depends_on_id":"oaks-jhat","type":"blocks","created_at":"2025-12-27T16:06:04.857918-05:00","created_by":"daemon"}]}
{"id":"oaks-rddo","title":"Migrate CLI write commands to use API client","description":"**Spec Reference:** openspec/changes/consolidate-db-code/tasks.md Section 4\n\nUpdate write commands to use HTTP client instead of direct db access.\n\n**Commands to migrate:**\n- [ ] oak new - create species via POST\n- [ ] oak edit - fetch via GET, update via PUT\n- [ ] oak delete - delete via DELETE\n\n**Notes:**\n- Commands should work with both embedded and remote API\n- Preserve existing UX (editor workflow, confirmations)\n- Error messages should be user-friendly","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T17:03:59.545227-05:00","updated_at":"2025-12-30T17:40:21.929865-05:00","closed_at":"2025-12-30T17:40:21.929865-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-rddo","depends_on_id":"oaks-p7dq","type":"blocks","created_at":"2025-12-30T17:04:37.017249-05:00","created_by":"daemon"},{"issue_id":"oaks-rddo","depends_on_id":"oaks-4271","type":"blocks","created_at":"2025-12-30T17:04:37.051961-05:00","created_by":"daemon"}]}
{"id":"oaks-8oo","title":"Update SpeciesDetail to read source-attributed fields from selected source","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T15:17:31.804541-05:00","updated_at":"2025-12-15T16:17:17.677217-05:00","closed_at":"2025-12-15T16:17:17.677217-05:00","dependencies":[{"issue_id":"oaks-8oo","depends_on_id":"oaks-a81","type":"blocks","created_at":"2025-12-15T15:17:37.953153-05:00","created_by":"daemon"}]}
{"id":"oaks-1hy","title":"Design scraper output format to match unified schema","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T14:13:34.971498-05:00","updated_at":"2025-12-14T20:20:26.316468-05:00","closed_at":"2025-12-14T20:20:26.316468-05:00","dependencies":[{"issue_id":"oaks-1hy","depends_on_id":"oaks-e85","type":"blocks","created_at":"2025-12-14T14:13:53.241871-05:00","created_by":"daemon"}]}
{"id":"oaks-4eui","title":"API: Deploy Phase 1 changes","description":"Deploy non-breaking API additions to Fly.io:\n\n- Run API tests locally\n- Deploy to Fly.io\n- Verify /species/{name}/full endpoint works\n- Verify gzip compression working\n- Verify delete cascade protection working\n\nSee tasks.md section 4","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-31T19:56:38.504669-05:00","updated_at":"2025-12-31T19:56:38.504669-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-4eui","depends_on_id":"oaks-3lfb","type":"blocks","created_at":"2025-12-31T19:57:28.315598-05:00","created_by":"daemon"}]}
{"id":"oaks-zp6","title":"Update cli/README.md for Go implementation","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T14:04:39.442439-05:00","updated_at":"2025-12-19T14:11:46.546781-05:00","closed_at":"2025-12-19T14:11:46.546781-05:00"}
{"id":"oaks-rrg","title":"Test GitHub Pages deployment","description":"Verify the site loads correctly at the GitHub Pages URL. Check that all routes work, data loads, and PWA features function.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-16T12:16:17.437707-05:00","updated_at":"2025-12-19T16:22:38.832405-05:00","closed_at":"2025-12-19T16:22:38.832405-05:00","dependencies":[{"issue_id":"oaks-rrg","depends_on_id":"oaks-cws","type":"blocks","created_at":"2025-12-16T12:16:26.797442-05:00","created_by":"daemon"}]}
{"id":"oaks-luqy","title":"web: Expand Vitest component tests for UI behaviors","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T11:23:59.584136-05:00","updated_at":"2026-01-02T15:04:56.860382-05:00","closed_at":"2026-01-02T15:04:56.860382-05:00","created_by":"jeff"}
{"id":"oaks-26qm.2","title":"api: Core Infrastructure","description":"Set up the foundational API server infrastructure.\n\n## Scope\n- Go dependencies (chi, httprate, cors, validator)\n- Server struct with Start/Stop lifecycle\n- Middleware stack (logging, recovery, request ID, auth, rate limiting, CORS)\n- Error response helpers\n- CLI command (oak serve)\n\n## Technical Decisions\n- Chi router v5 for HTTP routing (lightweight, idiomatic Go)\n- go-playground/validator for input validation\n- log/slog for structured JSON logging\n- API key auth via Bearer token (writes only)\n- Rate limits: 10 req/s reads, 5 req/s writes per IP\n\n## Files to Create\n- cli/internal/api/server.go\n- cli/internal/api/middleware.go\n- cli/internal/api/auth.go\n- cli/internal/api/errors.go\n- cli/internal/api/response.go\n- cli/cmd/serve.go\n\n## Parallelization\nThese tasks are sequential - middleware depends on server, auth depends on middleware.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-29T17:22:57.887108-05:00","updated_at":"2025-12-30T12:22:18.296442-05:00","closed_at":"2025-12-30T12:22:18.296442-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-26qm.2","depends_on_id":"oaks-26qm","type":"parent-child","created_at":"2025-12-29T17:22:57.88765-05:00","created_by":"daemon"}]}
{"id":"oaks-iiwp","title":"rust-parser: f. disambiguation (forma vs filius)","description":"Implement disambiguation for the f. abbreviation which has two meanings.\n\n## The Problem\n- `f.` as **infraspecific rank**: forma (e.g., `Q. robur f. fastigiata`)\n- `f.` as **author suffix**: filius/son (e.g., `Q. glauca Hook.f.`)\n\n## Disambiguation Rule\nLook at what follows `f.`:\n- Followed by **lowercase word** → infraspecific rank (`f. fastigiata`)\n- Followed by **end, uppercase, or connector** → author suffix (`Hook.f.`, `Hook.f. et Thomson`)\n\n## Tasks\n- [ ] Implement forma_rank parser that requires lowercase epithet after f.\n- [ ] Implement author_f_suffix parser for f. at word boundary\n- [ ] Use nom ordering (try forma first, fall back to author suffix)\n- [ ] Write tests for disambiguation:\n  - `Q. alba f. claudei` → f. is rank\n  - `Q. alba Hook.f.` → f. is author suffix\n  - `Q. alba Hook.f. et Arn` → f. is author suffix\n\n## Reference\n- openspec/changes/add-wasm-species-linker/design.md (The f. Disambiguation Problem section)","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-02T14:52:38.951617-05:00","updated_at":"2026-01-02T14:52:38.951617-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-iiwp","depends_on_id":"oaks-tvc0","type":"blocks","created_at":"2026-01-02T14:52:52.372381-05:00","created_by":"daemon"}]}
{"id":"oaks-4qf","title":"Push repository to GitHub","description":"Create GitHub repo and push the oaks codebase. Ensure .gitignore is correct and no sensitive data is included.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-16T12:16:17.094174-05:00","updated_at":"2025-12-16T12:29:30.690609-05:00","closed_at":"2025-12-16T12:29:30.690609-05:00","dependencies":[{"issue_id":"oaks-4qf","depends_on_id":"oaks-0mo","type":"blocks","created_at":"2025-12-16T12:16:26.73387-05:00","created_by":"daemon"},{"issue_id":"oaks-4qf","depends_on_id":"oaks-3w0","type":"blocks","created_at":"2025-12-16T12:24:15.898651-05:00","created_by":"daemon"},{"issue_id":"oaks-4qf","depends_on_id":"oaks-k7h","type":"blocks","created_at":"2025-12-16T12:16:26.702468-05:00","created_by":"daemon"}]}
{"id":"oaks-95g","title":"Refactor SpeciesList to SearchResults and simplify main page","description":"Rename SpeciesList.svelte to SearchResults.svelte and update all references. Remove the alphabetical browse link from the main page. Main page should have three sections: Taxonomy View, ID Tool (Coming Soon), and Sources List.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-21T15:16:13.812167-05:00","updated_at":"2025-12-21T15:29:29.130358-05:00","closed_at":"2025-12-21T15:29:29.130358-05:00"}
{"id":"oaks-746","title":"Ensure proper heading hierarchy","description":"Audit heading structure: single h1 per page, no skipped levels (h1→h3), headings used for structure not styling. Screen reader users rely on heading navigation.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T21:47:42.280667-05:00","updated_at":"2025-12-23T19:01:03.980666-05:00","closed_at":"2025-12-23T19:01:03.980666-05:00"}
{"id":"oaks-pyz","title":"Add testing infrastructure for web app","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T14:10:20.035826-05:00","updated_at":"2025-12-23T18:20:47.625569-05:00","closed_at":"2025-12-23T18:20:47.625569-05:00"}
{"id":"oaks-3n6","title":"Refactor: move source helpers from db.js to separate utils module","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T16:13:44.458148-05:00","updated_at":"2025-12-17T15:28:02.712543-05:00","closed_at":"2025-12-17T15:28:02.712543-05:00"}
{"id":"oaks-j05j","title":"Add error boundary for web JSON loading","description":"fetchAndCacheData() (lines 198-229): If JSON parsing fails mid-stream, stores left partially populated without error state. Wrap in try/catch that clears stores on failure and shows error UI.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-27T14:48:09.475761-05:00","updated_at":"2025-12-27T14:48:09.475761-05:00"}
{"id":"oaks-p93e","title":"web-edit: Update web/CLAUDE.md with editing documentation","description":"Document the editing feature in CLAUDE.md:\n\n**Sections to add:**\n\n**## Web Editing**\n- Overview of editing capabilities\n- Authentication requirements\n\n**### Auth Store**\n- How API key is stored/managed\n- Session timeout behavior\n\n**### Edit Components**\n- List of components (EditModal, *EditForm, etc.)\n- Component props and usage\n\n**### Data Flow**\n- Edit → API → Refresh → IndexedDB → UI\n- Diagram if helpful\n\n**### Security Considerations**\n- XSS risk documentation\n- localStorage limitations\n- Concurrent tabs limitation\n\n**### Testing Editing**\n- How to test locally\n- Test API key setup","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-30T19:01:47.659726-05:00","updated_at":"2025-12-31T13:28:24.497961-05:00","closed_at":"2025-12-31T13:28:24.497961-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-p93e","depends_on_id":"oaks-q6gt","type":"blocks","created_at":"2025-12-30T19:01:55.834858-05:00","created_by":"daemon"}]}
{"id":"oaks-anhk","title":"Docs: Update for new data architecture","description":"Update documentation to reflect fetch-per-view architecture:\n\n1. Update CLAUDE.md data flow diagram\n2. Update CLAUDE.md architecture section\n3. Update web/CLAUDE.md with new data flow\n4. Remove references to IndexedDB, offline support, quercus_data.json\n5. Document fetch-per-view pattern\n\nSee tasks.md section 17","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-31T19:57:14.549541-05:00","updated_at":"2025-12-31T19:57:14.549541-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-anhk","depends_on_id":"oaks-2euq","type":"blocks","created_at":"2025-12-31T19:57:29.101023-05:00","created_by":"daemon"}]}
{"id":"oaks-4zk","title":"Add tree-based browse view for taxonomy navigation","description":"Replace the current busy species list with a tree-based browse view organized by taxonomy hierarchy.\n\n**Hierarchy:** Subgenus → Section → Subsection → Complex → Species\n\n**Key design decisions:**\n1. Tree Structure: Build from allSpecies via derived store (taxonomyTree) - no separate data source\n2. Expansion State: Local component state, resets when switching views\n3. Routing: Add 'taxonomy' view alongside 'list' and 'detail'\n4. Sparse Hierarchy: Species without subsection/complex shown directly under parent level\n5. Search Behavior: Auto-switch to list when searching, return to tree when cleared\n\n**Sub-tasks:**\n- oaks-22c: Add taxonomyTree derived store\n- oaks-jqj: Create TaxonomyTree.svelte component\n- oaks-pt4: Add view toggle to App.svelte","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-15T11:44:01.683386-05:00","updated_at":"2025-12-15T12:06:52.744799-05:00","closed_at":"2025-12-15T12:06:52.744799-05:00"}
{"id":"oaks-ner","title":"Web app data caching issues - tracking and resolution","description":"# Web App Data Caching Issues - Comprehensive History\n\n## Current Problem (2025-12-23)\nIndexedDB data is 2 days stale despite multiple page visits. External links added to species are visible locally but not in production. The `checkForUpdates()` background task appears to either not run or fail silently.\n\n## Root Causes Identified\n\n### 1. GitHub Pages CDN Caching (10 minutes)\n- GitHub Pages sets `cache-control: max-age=600` on all static files\n- `cache: 'no-store'` in fetch only affects browser cache, NOT CDN\n- **Fix applied (33e99b1)**: Added timestamp query param `?t=Date.now()` to bypass CDN\n\n### 2. Silent Error Handling\n- `checkForUpdates()` catches all errors and only logs to console (line 255-258)\n- User never sees if background update fails\n- No visibility into whether updates are actually happening\n\n### 3. Version Check Logic (potentially fragile)\n- Compares `currentVersion?.value === metadata?.version` \n- Both are ISO timestamp strings - should work but debugging is difficult\n- If versions match (due to stale cache), no update occurs\n\n### 4. WRONG BASE_URL FOR FETCH (ROOT CAUSE FOUND 2025-12-24)\n- `import.meta.env.BASE_URL` does NOT work correctly in SvelteKit\n- The update check was fetching the WRONG URL, causing 404 errors\n- Console showed: `[DataStore] Update check failed: HTTP 404`\n- **Fix applied (7bdf97d)**: Use `$app/paths` base instead\n\n## Historical Attempts to Fix Caching\n\n### Commits (chronological):\n1. **5d83c4b** - Initial IndexedDB integration\n2. **7379217** - Added metadata section for cache invalidation\n3. **b92f496** - Removed vite-plugin-pwa (was causing issues)\n4. **b4db446** - Added kill switch service worker to clear old PWA cache\n5. **3332278** - Added `cache: 'no-store'` to update check fetch\n6. **33e99b1** - Added timestamp query param for CDN cache busting\n7. **009b5f2** - Added version display, force refresh button, diagnostic logging\n8. **7bdf97d** - Fixed BASE_URL issue - use `$app/paths` instead of `import.meta.env.BASE_URL`\n\n### Related Beads:\n- oaks-j9s: Failed SQLite WASM POC (abandoned)\n- oaks-2qj: IndexedDB implementation (closed)\n- oaks-0om: Service worker caching (obsolete)\n- oaks-5oo: SQLite research (closed)\n- oaks-9et: PWA setup (closed)\n- oaks-pi1: Offline functionality test (closed)\n\n## Current Architecture\n1. JSON fetched from `/quercus_data.json?t=timestamp`\n2. Version compared against IndexedDB metadata\n3. If different, IndexedDB cleared and repopulated\n4. `checkForUpdates()` runs in background after loading cached data\n\n## Session 2025-12-24: New Findings\n\n### Dexie Version Multiplier (IMPORTANT)\n- Dexie internally multiplies schema versions by 10\n- `db.version(2)` creates IndexedDB with version 20\n- This is intentional - allows intermediate upgrade steps\n- **Version 20 in IndexedDB is CORRECT** (not corruption)\n\n### Resolution (Morning)\n- Manually deleted IndexedDB via DevTools: `indexedDB.deleteDatabase('QuercusDB')`\n- Database recreated fresh with correct data version `2025-12-24T02:38:24Z`\n- External links now working correctly\n\n### ROOT CAUSE FOUND (Evening)\nAfter deploying Sibley Guide data, caching issue recurred:\n- User's IndexedDB: `2025-12-24T02:38:24Z`\n- Server: `2025-12-24T19:16:55Z`\n- Versions DIFFERENT but update not happening\n\n**Discovery via console logging:**\n```\n[DataStore] Checking for updates...\n[DataStore] Update check failed: HTTP 404\n```\n\n**Root Cause**: `import.meta.env.BASE_URL` does not resolve correctly in SvelteKit production builds. The fetch URL was malformed, causing 404 errors. This explains why updates NEVER worked - the update check was silently failing every time!\n\n**Fix**: Changed from `import.meta.env.BASE_URL` to `base` from `$app/paths` (commit 7bdf97d)\n\n### New Features Added (009b5f2)\n- **Version display** on landing page shows current data version\n- **Force Refresh button** to manually clear IndexedDB and reload\n- **Console logging** for `[DataStore]` and `[DB]` operations\n\n## What Was Tried\n- [x] Showing data version in UI so user can see staleness\n- [x] Force refresh button in UI\n- [x] Visible error reporting when updates fail (console logging)\n- [ ] More aggressive update checking (on focus, periodic)\n\n## Current Status\n- ROOT CAUSE IDENTIFIED: Wrong BASE_URL for fetch requests\n- Fix committed (7bdf97d), awaiting deployment\n- Version display and force refresh button now available\n\n## Success Criteria\nUser reports that production data updates reliably within reasonable time after deployment WITHOUT needing to manually delete IndexedDB. If manual deletion is required again, root cause investigation needed.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-23T21:53:03.194802-05:00","updated_at":"2025-12-29T12:04:54.036161-05:00","closed_at":"2025-12-29T12:04:54.036161-05:00"}
{"id":"oaks-7sfz","title":"cli: Fix INSERT OR REPLACE ID issue in SaveSpeciesSource","description":"In db.go:922, SaveSpeciesSource uses INSERT OR REPLACE which deletes and re-inserts rows. This causes issues:\n\n1. The auto-increment ID changes on updates\n2. The ID assignment logic at lines 935-940 may return wrong ID on replace\n\nCurrent code:\n```go\nresult, err := db.conn.Exec(\n    \\`INSERT OR REPLACE INTO species_sources ...\\`)\n// ...\nif ss.ID == 0 {\n    id, err := result.LastInsertId()\n    ss.ID = id\n}\n```\n\nFix: Use INSERT ... ON CONFLICT DO UPDATE (upsert) instead:\n```go\nINSERT INTO species_sources (...) VALUES (...)\nON CONFLICT(scientific_name, source_id) DO UPDATE SET ...\n```\n\nThis preserves the original ID on updates.","status":"open","priority":1,"issue_type":"bug","created_at":"2025-12-30T11:36:01.73996-05:00","updated_at":"2025-12-30T11:36:01.73996-05:00","created_by":"jeff"}
{"id":"oaks-qhj","title":"Create migration to drop data_points and add species_sources table","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T14:51:08.804939-05:00","updated_at":"2025-12-15T14:55:43.360518-05:00","closed_at":"2025-12-15T14:55:43.360518-05:00","dependencies":[{"issue_id":"oaks-qhj","depends_on_id":"oaks-1tc","type":"blocks","created_at":"2025-12-15T14:51:18.022442-05:00","created_by":"daemon"}]}
{"id":"oaks-7k9","title":"Ensure text is resizable up to 200%","description":"Test that the app remains usable when browser text size is increased to 200%. No content should be cut off or overlap. Use relative units (rem/em) instead of fixed px for text.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T21:47:58.159081-05:00","updated_at":"2025-12-23T19:01:03.983287-05:00","closed_at":"2025-12-23T19:01:03.983287-05:00"}
{"id":"oaks-j9s","title":"Create wa-sqlite proof-of-concept in web app","description":"FAILED: Claude Code provided incorrect advice about SQLite WASM maturity and browser support. Initial research was overly optimistic and not validated through actual implementation. wa-sqlite has critical integration issues with Vite - WASM factory hangs indefinitely despite successful file loading (200 status). Technology is too immature and unstable for production use. The confident recommendation to proceed with SQLite was premature and not based on hands-on testing.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T14:23:05.624887-05:00","updated_at":"2025-12-14T15:27:27.32805-05:00","closed_at":"2025-12-14T15:26:38.620123-05:00","dependencies":[{"issue_id":"oaks-j9s","depends_on_id":"oaks-nov","type":"blocks","created_at":"2025-12-14T14:23:15.117014-05:00","created_by":"daemon"}]}
{"id":"oaks-b8i","title":"Research DB migration tools for Go (golang-migrate, goose, etc.)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T14:55:59.782354-05:00","updated_at":"2025-12-29T12:10:07.693928-05:00","closed_at":"2025-12-29T12:10:07.693928-05:00"}
{"id":"oaks-ch8","title":"Add USDA Plants and herbarium external links","description":"Continue adding external links for species:\n\n## USDA Plants Database\n- URL: https://plants.usda.gov/home/plantProfile?symbol={CODE}\n- Requires symbol code lookup (not constructable from name)\n- Need to research if there's an API or downloadable mapping\n\n## Online Herbaria\nResearch URL patterns and coverage for:\n- JSTOR Global Plants\n- SEINet\n- iDigBio\n- Consortium of California Herbaria (CCH2)\n- Others?\n\nFollows from oaks-ze3 which added FNA and FEIS links.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-23T21:09:47.915242-05:00","updated_at":"2025-12-30T10:48:30.344422-05:00"}
{"id":"oaks-pzc","title":"Update import commands to use species_sources table","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T14:51:09.14-05:00","updated_at":"2025-12-15T15:00:22.11817-05:00","closed_at":"2025-12-15T15:00:22.11817-05:00","dependencies":[{"issue_id":"oaks-pzc","depends_on_id":"oaks-31a","type":"blocks","created_at":"2025-12-15T14:51:18.297623-05:00","created_by":"daemon"}]}
{"id":"oaks-pi1","title":"Test and verify offline PWA functionality","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T14:10:19.888602-05:00","updated_at":"2025-12-19T17:01:17.550652-05:00","closed_at":"2025-12-19T17:01:17.550652-05:00"}
{"id":"oaks-b14","title":"Add source data extraction to db.js","description":"Add function to extract unique sources from species data with coverage stats (count, percentage). Sources are currently embedded in species objects - need to aggregate them.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T10:53:41.93357-05:00","updated_at":"2025-12-21T10:55:57.883855-05:00","closed_at":"2025-12-21T10:55:57.883855-05:00"}
{"id":"oaks-ge6m","title":"Add input validation to edit forms","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-31T13:10:23.934851-05:00","updated_at":"2025-12-31T13:17:12.406617-05:00","closed_at":"2025-12-31T13:17:12.406617-05:00","created_by":"jeff"}
{"id":"oaks-856","title":"Create stable taxonomy seed file for DB initialization","description":"Create a version-controlled file that defines the complete Quercus taxonomy as defined by iNaturalist.\n\n**Purpose:**\n- Easily recreate a fresh database if it gets corrupted\n- Single source of truth for taxonomy structure\n- Useful during early-stage development when schema/data may need resets\n\n**File should include:**\n- All taxonomy levels (subgenus, section, subsection, complex)\n- Hierarchy relationships\n- Based on iNaturalist's Quercus taxonomy\n\n**Format:** TBD (YAML, JSON, or SQL seed file)\n\n**Location:** Likely in cli/ or a new data/ directory, checked into git","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-15T17:08:30.792124-05:00","updated_at":"2025-12-15T17:12:05.337204-05:00","closed_at":"2025-12-15T17:12:05.337204-05:00"}
{"id":"oaks-hoyx","title":"web-edit: Add per-source Edit buttons in species detail","description":"Modify SpeciesDetail.svelte source tabs:\n\n**Current behavior:**\n- Species detail shows tabs for each source (iNaturalist, Oaks of the World, etc.)\n- Each tab displays that source's data (leaves, range, local_names, etc.)\n\n**Add per-source editing:**\n- Add Edit button within each source tab\n- Button visible only when canEdit is true\n- Click opens SpeciesSourceEditForm pre-filled with THAT source's data\n- Each source can be edited independently\n\n**Example:**\nFor Quercus alba with data from Sources 1, 2, 3:\n- Source 1 tab has its own Edit button\n- Source 2 tab has its own Edit button\n- Editing Source 2 only updates alba's Source 2 data","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T18:59:09.83304-05:00","updated_at":"2025-12-31T12:13:29.763988-05:00","closed_at":"2025-12-31T12:13:29.763988-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-hoyx","depends_on_id":"oaks-81fv","type":"blocks","created_at":"2025-12-30T18:59:20.240641-05:00","created_by":"daemon"}]}
{"id":"oaks-26qm.1.4","title":"api: Write API documentation","description":"Create comprehensive API documentation.\n\n## File: cli/docs/api.md\n\n## Sections\n\n### Overview\n- Base URL: https://api.oakcompendium.com\n- Versioning: /api/v1/\n- Authentication model\n- Rate limits\n\n### Authentication\n- How to get API key\n- Using Bearer token\n- Which endpoints need auth\n\n### Endpoints\nFor each endpoint:\n- Method and path\n- Description\n- Query parameters\n- Request body (with example)\n- Response (with example)\n- Error responses\n- Code examples (curl)\n\n### Error Handling\n- Error response format\n- Common error codes\n- Troubleshooting\n\n### Rate Limiting\n- Limits by endpoint type\n- Rate limit headers\n- What to do when limited\n\n### Examples\n- List all species\n- Get species details\n- Create a note (species-source)\n- Search species\n- Export data\n\n## Also Update\n- CLAUDE.md: Add API architecture section\n- openspec/project.md: Add API details","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T17:25:50.694391-05:00","updated_at":"2025-12-30T12:09:35.250541-05:00","closed_at":"2025-12-30T12:09:35.250541-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-26qm.1.4","depends_on_id":"oaks-26qm.1","type":"parent-child","created_at":"2025-12-29T17:25:50.697221-05:00","created_by":"daemon"},{"issue_id":"oaks-26qm.1.4","depends_on_id":"oaks-26qm.1.1","type":"blocks","created_at":"2025-12-29T17:28:13.804274-05:00","created_by":"daemon"},{"issue_id":"oaks-26qm.1.4","depends_on_id":"oaks-26qm.1.2","type":"blocks","created_at":"2025-12-29T17:28:13.839816-05:00","created_by":"daemon"},{"issue_id":"oaks-26qm.1.4","depends_on_id":"oaks-26qm.1.3","type":"blocks","created_at":"2025-12-29T17:28:13.873938-05:00","created_by":"daemon"}]}
{"id":"oaks-0xw","title":"Support reduced motion preferences","description":"Respect prefers-reduced-motion media query. Disable or reduce animations/transitions for users who have enabled reduced motion in their OS settings.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T21:47:57.987401-05:00","updated_at":"2025-12-23T18:59:59.529392-05:00","closed_at":"2025-12-23T18:59:59.529392-05:00"}
{"id":"oaks-s1de","title":"cli-Add profile-based API configuration","description":"Add support for named profiles in CLI config.\n\nSee: openspec/changes/refactor-cli-api-split/tasks.md Section 3\nSee: openspec/changes/refactor-cli-api-split/specs/cli-api-client/spec.md (Configuration requirements)\nSee: openspec/changes/refactor-cli-api-split/design.md Decision 7\n\nTasks:\n- Create cli/internal/config/ package\n- Implement profile config file parsing (~/.oak/config.yaml)\n- Implement profile resolution (flag → env → config → local)\n- Add --profile global flag to root command\n- Create oak config show command\n- Create oak config list command\n- Add profile name to destructive operation prompts (remote only)\n\nDefault: local database (safe for development)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T13:22:21.048337-05:00","updated_at":"2025-12-30T15:06:41.063143-05:00","closed_at":"2025-12-30T15:06:41.063143-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-s1de","depends_on_id":"oaks-q8of","type":"blocks","created_at":"2025-12-30T14:06:21.294484-05:00","created_by":"daemon"}]}
{"id":"oaks-mniz","title":"ios-icloud-sync: Research two-way iCloud data sync options","description":"Research and plan iCloud data sync implementation for Oak Notes.\n\n## Goals\n- Explore options for two-way iCloud data sync\n- Consider short-term vs long-term needs\n- Build out implementation plan\n\n## Questions to Answer\n- CloudKit vs iCloud Documents vs Core Data with CloudKit?\n- How to handle conflict resolution?\n- What's the migration path from local storage?\n- Performance implications for large note collections?\n\n## Deliverable\nImplementation plan with recommended approach and trade-offs.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T16:01:10.166975-05:00","updated_at":"2025-12-29T16:25:49.139523-05:00","closed_at":"2025-12-29T16:25:49.139523-05:00","created_by":"jeff"}
{"id":"oaks-lcb7","title":"web-css-cleanup: Final cleanup pass and verification","description":"## Goal\nFinal cleanup after all CSS consolidation is complete.\n\n## Tasks\n1. Remove any orphaned/unused styles from component style blocks\n2. Verify no visual regressions (manual testing)\n3. Run build to check for CSS warnings\n4. Measure final CSS bundle size vs baseline\n5. Update web/CLAUDE.md with new styling conventions\n\n## Acceptance Criteria\n- All major components use shared utilities where appropriate\n- No duplicate style blocks remain\n- Build succeeds without CSS warnings\n- Visual appearance unchanged\n- Documentation updated\n\n## Metrics to Capture\n- Before: ~2,200 lines of component CSS\n- Target: ~1,400-1,600 lines (30-40% reduction)\n- Bundle size comparison","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-29T11:07:58.320243-05:00","updated_at":"2025-12-29T11:44:58.038505-05:00","closed_at":"2025-12-29T11:44:58.038505-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-lcb7","depends_on_id":"oaks-vmwd","type":"blocks","created_at":"2025-12-29T11:08:06.068961-05:00","created_by":"daemon"},{"issue_id":"oaks-lcb7","depends_on_id":"oaks-r9vn","type":"blocks","created_at":"2025-12-29T11:08:05.905787-05:00","created_by":"daemon"},{"issue_id":"oaks-lcb7","depends_on_id":"oaks-f4j4","type":"blocks","created_at":"2025-12-29T11:08:05.946603-05:00","created_by":"daemon"},{"issue_id":"oaks-lcb7","depends_on_id":"oaks-qwjb","type":"blocks","created_at":"2025-12-29T11:08:05.988098-05:00","created_by":"daemon"},{"issue_id":"oaks-lcb7","depends_on_id":"oaks-huej","type":"blocks","created_at":"2025-12-29T11:08:06.028174-05:00","created_by":"daemon"}]}
{"id":"oaks-3v1n","title":"cli: Refactor ListOakEntries to reduce cognitive complexity (39→20)","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-29T20:43:14.411715-05:00","updated_at":"2025-12-29T20:43:14.411715-05:00","created_by":"jeff"}
{"id":"oaks-t601","title":"cli: Make rate limits configurable","description":"Rate limits in middleware.go are hardcoded:\n\n```go\nfunc DefaultRateLimitConfig() RateLimitConfig {\n    return RateLimitConfig{\n        ReadLimit:    10, // 10 req/sec\n        WriteLimit:   5,  // 5 req/sec\n        BackupLimit:  1,  // 1 req/min\n        Window:       time.Second,\n        BackupWindow: time.Minute,\n    }\n}\n```\n\nThese should be configurable via:\n- Environment variables (OAK_RATE_LIMIT_READ, OAK_RATE_LIMIT_WRITE)\n- Command line flags (--rate-limit-read, --rate-limit-write)\n\nThis allows different settings for development vs production.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-30T11:36:02.118159-05:00","updated_at":"2025-12-30T11:36:02.118159-05:00","created_by":"jeff"}
{"id":"oaks-33g","title":"Update species detail page to match taxa detail page styling","description":"The species detail page should be updated to use the same breadcrumb navigation and top header formatting as the taxa detail pages for visual consistency across the app.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-20T14:45:02.437574-05:00","updated_at":"2025-12-20T14:57:53.566537-05:00","closed_at":"2025-12-20T14:57:53.566537-05:00"}
{"id":"oaks-5se","title":"Create Source detail page component","description":"Create SourceDetail.svelte showing: source metadata (name, author, URL, license, description), coverage summary stats, and expandable/clickable list of all species from that source.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T10:53:42.152119-05:00","updated_at":"2025-12-21T10:57:58.881789-05:00","closed_at":"2025-12-21T10:57:58.881789-05:00","dependencies":[{"issue_id":"oaks-5se","depends_on_id":"oaks-b14","type":"blocks","created_at":"2025-12-21T10:53:53.619505-05:00","created_by":"daemon"}]}
{"id":"oaks-9r8n","title":"web-edit: Add fetchApiAuthenticated and write methods","description":"Extend apiClient.js with authenticated write operations:\n\n**Core wrapper:**\n```javascript\nasync function fetchApiAuthenticated(endpoint, options = {}) {\n  const apiKey = get(authStore);\n  if (!apiKey) throw new ApiError('Not authenticated', 401, 'UNAUTHENTICATED');\n  return fetchApi(endpoint, {\n    ...options,\n    headers: {\n      ...options.headers,\n      'Authorization': \\`Bearer \\${apiKey}\\`,\n      'Content-Type': 'application/json'\n    }\n  });\n}\n```\n\n**Write methods to add:**\n- createSpecies, updateSpecies, deleteSpecies\n- createTaxon, updateTaxon, deleteTaxon  \n- createSource, updateSource, deleteSource\n- createSpeciesSource, updateSpeciesSource, deleteSpeciesSource\n\n**Error handling:**\n- 400: Parse validation errors, return structured field errors\n- 429: Extract Retry-After header, throw RateLimitError\n- 401: Handled globally (see oaks-d66k)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T18:57:07.95501-05:00","updated_at":"2026-01-03T12:27:25.527421-05:00","closed_at":"2026-01-03T12:27:25.527421-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-9r8n","depends_on_id":"oaks-ipzv","type":"blocks","created_at":"2025-12-30T18:57:48.962729-05:00","created_by":"daemon"}]}
{"id":"oaks-q7ao","title":"web: Article authoring (create, edit, publish)","description":"Add article authoring when authenticated.\n\nImplementation:\n1. ArticleEditor component with:\n   - Title input\n   - Tags input (comma-separated or chips)\n   - Markdown editor with live preview\n   - Publish/Unpublish toggle\n   - Save/Cancel buttons\n2. 'New Article' button on articles list (when authenticated)\n3. 'Edit' button on article view (when authenticated)\n4. /articles/new route\n5. /articles/:slug/edit route\n6. Delete with confirmation\n\nWorkflow:\n- New articles default to draft (is_published=false)\n- Drafts visible in list when authenticated (visually distinguished)\n- Publish button sets is_published=true\n\nDependencies:\n- Requires web auth state management (see oaks-eth7 epic)\n- Requires API article handlers\n\nPart of: Content Expansion (Phase 2: Reference Articles)\nSpec: openspec/changes/add-content-expansion/specs/reference-articles/spec.md","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-02T13:52:40.858344-05:00","updated_at":"2026-01-02T13:52:40.858344-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-q7ao","depends_on_id":"oaks-s4lg","type":"blocks","created_at":"2026-01-02T13:53:41.096515-05:00","created_by":"daemon"},{"issue_id":"oaks-q7ao","depends_on_id":"oaks-eth7","type":"blocks","created_at":"2026-01-02T13:53:42.017494-05:00","created_by":"daemon"}]}
{"id":"oaks-nov","title":"Update CLAUDE.md with SQLite architecture decision","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T14:23:05.468399-05:00","updated_at":"2025-12-14T14:24:41.101215-05:00","closed_at":"2025-12-14T14:24:41.101215-05:00"}
{"id":"oaks-noc3","title":"cli: Refactor runImportBear to reduce cognitive complexity (42→20)","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-29T20:43:14.248353-05:00","updated_at":"2025-12-29T20:43:14.248353-05:00","created_by":"jeff"}
{"id":"oaks-i9g7","title":"Epic: Consolidate duplicated DB code between CLI and API","description":"Eliminate ~1,000+ lines of duplicated database code between cli/internal/db and api/internal/db.\n\n**Spec Reference:** openspec/changes/consolidate-db-code/\n\n**Problem:**\n- 38+ duplicated functions with identical implementations\n- Critical bug: API missing bidirectional hybrid relationship management\n- Maintenance nightmare with diverging implementations\n\n**Solution:**\nAPI becomes single source of truth. CLI uses embedded API for local ops, remote API for prod.\n\n**Deferred:** Bulk import endpoints (rare operation, handle after core consolidation)","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-30T17:03:27.867176-05:00","updated_at":"2025-12-30T18:21:56.872107-05:00","closed_at":"2025-12-30T18:21:56.872107-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-i9g7","depends_on_id":"oaks-jsh3","type":"blocks","created_at":"2025-12-30T17:05:06.916162-05:00","created_by":"daemon"}]}
{"id":"oaks-83pl","title":"Break up large Svelte components","description":"SpeciesDetail.svelte is 380+ lines, LandingPage.svelte is 280+ lines. Consider splitting into smaller sub-components for maintainability. Lower priority - works fine as-is.","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-27T14:43:34.280163-05:00","updated_at":"2025-12-29T12:10:07.423466-05:00","closed_at":"2025-12-29T12:10:07.423466-05:00"}
{"id":"oaks-2euq","title":"API: Remove export endpoint","description":"Remove deprecated /api/v1/export endpoint (breaking change):\n\n1. Delete handleExport handler\n2. Remove route registration\n3. Delete export-related tests\n4. Deploy to production\n\nIMPORTANT: Only do this AFTER web app is deployed and no longer uses /export.\n\nSee tasks.md section 16","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-31T19:57:08.367866-05:00","updated_at":"2025-12-31T19:57:08.367866-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-2euq","depends_on_id":"oaks-hm0o","type":"blocks","created_at":"2025-12-31T19:57:28.891991-05:00","created_by":"daemon"}]}
{"id":"oaks-q3x","title":"Import Oaks of the World scraped data into database","description":"Import the scraped data from oaksoftheworld.fr into the CLI-managed SQLite database. This requires: 1) Mapping scraped fields to database schema, 2) Deciding how to handle inconsistencies between sources (e.g., taxonomy differences, conflicting data), 3) Setting up the 'Oaks of the World' source entry, 4) Handling the morphological text fields (leaves, flowers, fruits, etc.) that don't have structured equivalents in current schema.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T11:46:14.029849-05:00","updated_at":"2025-12-23T18:47:00.481312-05:00","closed_at":"2025-12-23T18:47:00.481312-05:00","dependencies":[{"issue_id":"oaks-q3x","depends_on_id":"oaks-97p","type":"blocks","created_at":"2025-12-15T11:46:19.625528-05:00","created_by":"daemon"}]}
{"id":"oaks-26qm.3","title":"api: CRUD Endpoints","description":"Implement CRUD endpoints for all database tables.\n\n## Scope\nAll endpoints follow REST conventions with JSON request/response bodies.\n\n### Species (oak_entries)\n- GET /api/v1/species - list with pagination\n- GET /api/v1/species/:name - get by scientific name\n- POST /api/v1/species - create (auth required)\n- PUT /api/v1/species/:name - update (auth required)\n- DELETE /api/v1/species/:name - delete (auth required, cascades)\n- GET /api/v1/species/search?q= - search\n\n### Taxonomy (taxa)\n- GET /api/v1/taxa - list (optional level filter)\n- GET /api/v1/taxa/:level/:name - get specific\n- POST /api/v1/taxa - create (auth required)\n- PUT /api/v1/taxa/:level/:name - update (auth required)\n- DELETE /api/v1/taxa/:level/:name - delete (auth required)\n\n### Sources\n- GET /api/v1/sources - list\n- GET /api/v1/sources/:id - get by ID\n- POST /api/v1/sources - create (auth required)\n- PUT /api/v1/sources/:id - update (auth required)\n- DELETE /api/v1/sources/:id - delete (auth required)\n\n### Species-Sources\n- GET /api/v1/species/:name/sources - list for species\n- GET /api/v1/species/:name/sources/:sourceId - get specific\n- POST /api/v1/species/:name/sources - create (auth required)\n- PUT /api/v1/species/:name/sources/:sourceId - update (auth required)\n- DELETE /api/v1/species/:name/sources/:sourceId - delete (auth required)\n\n### Operational\n- GET /api/v1/health - liveness\n- GET /api/v1/health/ready - readiness\n- GET /api/v1/export - full JSON export\n\n## Parallelization\nAll four entity handler files can be developed in parallel after core infrastructure is complete.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-29T17:22:58.810457-05:00","updated_at":"2025-12-30T12:22:18.299472-05:00","closed_at":"2025-12-30T12:22:18.299472-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-26qm.3","depends_on_id":"oaks-26qm","type":"parent-child","created_at":"2025-12-29T17:22:58.812684-05:00","created_by":"daemon"},{"issue_id":"oaks-26qm.3","depends_on_id":"oaks-26qm.2","type":"blocks","created_at":"2025-12-29T17:26:34.102552-05:00","created_by":"daemon"}]}
{"id":"oaks-t8h","title":"Design IndexedDB schema for web app","description":"Design IndexedDB schema aligned with SQL schema but optimized for browser queries. Define indexes for search/filter operations using Dexie.js.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T16:46:09.077538-05:00","updated_at":"2025-12-14T19:25:56.770116-05:00","closed_at":"2025-12-14T19:25:56.770116-05:00","dependencies":[{"issue_id":"oaks-t8h","depends_on_id":"oaks-ki0","type":"blocks","created_at":"2025-12-14T16:51:24.928996-05:00","created_by":"daemon"}]}
{"id":"oaks-rma","title":"Update export command to use species_sources table","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T14:51:09.314154-05:00","updated_at":"2025-12-15T15:00:22.118563-05:00","closed_at":"2025-12-15T15:00:22.118563-05:00","dependencies":[{"issue_id":"oaks-rma","depends_on_id":"oaks-31a","type":"blocks","created_at":"2025-12-15T14:51:18.437872-05:00","created_by":"daemon"}]}
{"id":"oaks-5oo","title":"Research SQLite options for offline PWA (sql.js, WASM, etc.)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T14:15:33.38687-05:00","updated_at":"2025-12-14T14:22:56.343694-05:00","closed_at":"2025-12-14T14:22:56.343694-05:00"}
{"id":"oaks-r9vn","title":"web-css-prose: Add .prose-content global utility for markdown","description":"## Goal\nAdd a `.prose-content` utility class to app.css that consolidates the duplicated markdown rendering styles.\n\n## Current State\nThree nearly identical blocks exist:\n- SpeciesDetail: `.detail-text :global(...)` (~40 lines)\n- SpeciesDetail: `.field-text :global(...)` (~40 lines)  \n- SourceComparison: `.markdown-content :global(...)` (~25 lines)\n\n## Implementation\n1. Add to app.css using `@layer components`:\n```css\n@layer components {\n  .prose-content :global(p) { margin: 0 0 0.75rem 0; }\n  .prose-content :global(p:last-child) { margin-bottom: 0; }\n  .prose-content :global(ul), \n  .prose-content :global(ol) { margin: 0.5rem 0; padding-left: 1.5rem; }\n  .prose-content :global(li) { margin: 0.25rem 0; }\n  .prose-content :global(a) { color: var(--color-forest-700); text-decoration: underline; }\n  .prose-content :global(strong) { font-weight: 600; }\n  .prose-content :global(em) { font-style: italic; }\n}\n```\n\n2. Update SpeciesDetail.svelte - replace `.detail-text` and `.field-text` blocks with `.prose-content` class\n3. Update SourceComparison.svelte - replace `.markdown-content` with `.prose-content` class\n4. Remove old style blocks\n\n## Estimated Savings\n~100 lines of CSS","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T11:07:32.702447-05:00","updated_at":"2025-12-29T11:13:16.645325-05:00","closed_at":"2025-12-29T11:13:16.645325-05:00","created_by":"jeff"}
{"id":"oaks-pmyp","title":"web-edit: Test mobile responsiveness of edit forms","description":"Verify forms work on mobile devices:\n\n**Layout testing:**\n- Modal fills screen appropriately on mobile\n- Fields are readable and tappable\n- TagInput chips don't overflow\n- TaxonSelect dropdown is usable\n\n**Scroll behavior:**\n- Long forms scroll within modal\n- Keyboard doesn't obscure active field\n- Bottom buttons remain accessible\n\n**Touch interactions:**\n- Edit/Delete buttons are touch-friendly (min 44px)\n- TagInput X buttons are tappable\n- Dropdown selection works with touch\n\n**Devices to test:**\n- iPhone SE (small screen)\n- iPhone 14 (medium)\n- iPad (tablet)\n\n**Breakpoints:**\n- Consider full-page form on very small screens\n- Adjust modal max-width for tablets","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T19:01:47.491198-05:00","updated_at":"2026-01-03T12:34:00.186617-05:00","closed_at":"2026-01-03T12:34:00.186617-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-pmyp","depends_on_id":"oaks-koo8","type":"blocks","created_at":"2025-12-30T19:01:55.761109-05:00","created_by":"daemon"},{"issue_id":"oaks-pmyp","depends_on_id":"oaks-metl","type":"blocks","created_at":"2025-12-30T19:01:55.797591-05:00","created_by":"daemon"}]}
{"id":"oaks-9yab","title":"api-deploy: Set up hosting and deployment","description":"Deploy the API server.\n\n## Hosting Evaluation\n- Fly.io (free tier, good for Go)\n- Railway\n- Home server + Tailscale\n- VPS (DigitalOcean, Linode)\n\n## Deployment\n- Dockerfile or direct binary deploy\n- CI/CD pipeline (GitHub Actions)\n- Environment configuration\n- Domain/DNS setup\n\n## Operations\n- Logging and monitoring\n- Health checks\n- Backup strategy for SQLite DB\n- Rollback process","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-29T16:25:37.17606-05:00","updated_at":"2025-12-29T17:16:03.784711-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-9yab","depends_on_id":"oaks-doc9","type":"blocks","created_at":"2025-12-29T16:25:48.878024-05:00","created_by":"daemon"},{"issue_id":"oaks-9yab","depends_on_id":"oaks-qinn","type":"blocks","created_at":"2025-12-29T16:25:48.910808-05:00","created_by":"daemon"}],"deleted_at":"2025-12-29T17:16:03.784711-05:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"oaks-1i43","title":"Fix author name parsing edge cases","description":"name_parser.py lines 219-244: Complex author names like 'Morrison, non C.A.Mey.' get mangled. Uses naive split() without handling quoted/parenthetical names. Need proper tokenization.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-27T14:48:09.251634-05:00","updated_at":"2025-12-29T11:01:36.859849-05:00","closed_at":"2025-12-29T11:01:36.859849-05:00"}
{"id":"oaks-6wm","title":"Automate Bear-to-deploy pipeline","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-19T14:04:39.655031-05:00","updated_at":"2025-12-19T15:12:52.353903-05:00","closed_at":"2025-12-19T15:12:52.353903-05:00","dependencies":[{"issue_id":"oaks-6wm","depends_on_id":"oaks-dhm","type":"blocks","created_at":"2025-12-19T14:04:44.32971-05:00","created_by":"daemon"}]}
{"id":"oaks-3nk","title":"Integrate map into species detail view","description":"Add the map component to the species detail page, displaying highlighted range regions for the current species.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-16T10:45:14.771866-05:00","updated_at":"2025-12-16T10:45:14.771866-05:00","dependencies":[{"issue_id":"oaks-3nk","depends_on_id":"oaks-b8o","type":"blocks","created_at":"2025-12-16T10:45:30.088733-05:00","created_by":"daemon"},{"issue_id":"oaks-3nk","depends_on_id":"oaks-xb5","type":"blocks","created_at":"2025-12-16T10:45:30.056937-05:00","created_by":"daemon"}]}
{"id":"oaks-a59c","title":"api: Expand species search to include more fields","description":"After API is deployed, revisit species search to potentially match on range, growth_habit, and other descriptive fields. Currently only matches scientific name, common names, and synonyms.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-29T17:12:47.356267-05:00","updated_at":"2025-12-29T17:12:47.356267-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-a59c","depends_on_id":"oaks-26qm.3.2","type":"blocks","created_at":"2025-12-29T17:28:44.467506-05:00","created_by":"daemon"}]}
{"id":"oaks-cws","title":"Enable GitHub Pages in repo settings","description":"In GitHub repo settings, enable Pages and configure to deploy from gh-pages branch (created by the Actions workflow).","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-16T12:16:17.261522-05:00","updated_at":"2025-12-19T16:22:38.834149-05:00","closed_at":"2025-12-19T16:22:38.834149-05:00","dependencies":[{"issue_id":"oaks-cws","depends_on_id":"oaks-4qf","type":"blocks","created_at":"2025-12-16T12:16:26.764894-05:00","created_by":"daemon"}]}
{"id":"oaks-g0h","title":"Add /sources routes","description":"Add SvelteKit routes: /sources/ (index) and /sources/[id]/ (detail). Wire up to components.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T10:53:42.796913-05:00","updated_at":"2025-12-21T11:00:10.072588-05:00","closed_at":"2025-12-21T11:00:10.072588-05:00","dependencies":[{"issue_id":"oaks-g0h","depends_on_id":"oaks-5se","type":"blocks","created_at":"2025-12-21T10:53:53.715452-05:00","created_by":"daemon"}]}
{"id":"oaks-3lfb","title":"API: Add full species endpoint, gzip, delete cascade protection","description":"Phase 1 API additions (non-breaking):\n\n1. Full Species Endpoint\n   - GET /api/v1/species/{name}/full\n   - Returns species with embedded sources\n   - Include source metadata (name, URL)\n   - Order sources by is_preferred DESC, source_id ASC\n\n2. Delete Cascade Protection\n   - Check for hybrids referencing species as parent before delete\n   - Return 409 Conflict with blocking hybrids list\n\n3. Gzip Compression\n   - Add gzip middleware\n   - Configure minimum size threshold (~1KB)\n\nSee tasks.md sections 1, 2, 3","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-31T19:56:32.615052-05:00","updated_at":"2025-12-31T19:56:32.615052-05:00","created_by":"jeff"}
{"id":"oaks-krc","title":"Make hybrid links clickable in species detail view","description":"In the species detail view, the hybrids list shows hybrid names but they are not clickable links. Should link to the hybrid's detail page.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-15T18:18:04.705257-05:00","updated_at":"2025-12-15T21:46:27.822349-05:00","closed_at":"2025-12-15T21:46:27.822349-05:00"}
{"id":"oaks-zgi","title":"Migrate web app to SvelteKit","description":"Replace manual routing in App.svelte with SvelteKit's file-based routing. This will provide proper page title management, cleaner navigation, and better scalability as we add more pages.\n\nBenefits:\n- File-based routing eliminates ~150 lines of manual routing code\n- Built-in page title management via svelte:head\n- Navigation becomes simple \u003ca\u003e tags instead of custom handlers\n- Better code organization as app grows\n- SSR/prerendering available if ever needed\n\nSee discussion in oaks-db6 for context.","status":"closed","priority":2,"issue_type":"epic","created_at":"2025-12-17T15:24:18.097727-05:00","updated_at":"2025-12-17T16:30:12.597966-05:00","closed_at":"2025-12-17T16:30:12.597966-05:00","dependencies":[{"issue_id":"oaks-zgi","depends_on_id":"oaks-6c8","type":"blocks","created_at":"2025-12-17T15:25:01.750124-05:00","created_by":"daemon"}]}
{"id":"oaks-tvc0","title":"rust-parser: Infraspecific rank parser","description":"Implement parser for all ICN infraspecific rank abbreviations.\n\n## Tasks\n- [ ] Implement rank parser accepting ALL ranks from cli/docs/infraspecific-ranks.md:\n  - Standard: subsp., ssp., subspecies, var., variety, varietas, subvar., f., form, forma, subf.\n  - Hybrid ranks: nothosubsp., nothovar., nothof.\n  - Historical/deprecated: cv., prol., proles, lusus, convar., stirps, agamosp., microf.\n- [ ] Make rank matching case-insensitive (var., VAR., Var. all accepted)\n- [ ] Make period optional (var foo and var. foo both work)\n- [ ] Handle spacing variations (var.foo and var. foo)\n- [ ] Compose infraspecific parser: rank + optional period + space + epithet\n- [ ] Write comprehensive tests for all rank variants\n\n## Acceptance Criteria\n- All 20+ rank abbreviations recognized\n- Case insensitive matching\n- Period optional\n- Spacing flexible\n\n## Reference\n- cli/docs/infraspecific-ranks.md (complete rank list)\n- openspec/changes/add-wasm-species-linker/design.md","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-02T14:52:25.319223-05:00","updated_at":"2026-01-02T14:52:25.319223-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-tvc0","depends_on_id":"oaks-0pg2","type":"blocks","created_at":"2026-01-02T14:52:38.797324-05:00","created_by":"daemon"}]}
{"id":"oaks-3hbq","title":"rust-parser: Author citation patterns","description":"Implement parser for ICN author citation patterns.\n\n## Author Citation Patterns (finite set, NOT recursive)\n| Pattern | Example | Structure |\n|---------|---------|-----------|\n| Single | `L.` | name |\n| With filius | `Hook.f.` | name + \"f.\" |\n| Multiple | `Hook.f. et Thomson` | name (\"et\"|\"\u0026\") name |\n| Parenthetical | `(L.) Pers.` | \"(\" name \")\" name |\n| With \"ex\" | `Nutt. ex Seem.` | name \"ex\" name |\n| With \"in\" | `Clarke in Hook.f.` | name \"in\" name |\n| Complex | `(Hook. \u0026 Arn.) A.Gray ex S.Watson` | combined |\n\n## Tasks\n- [ ] Implement author_name parser (uppercase start, allows periods, lowercase)\n- [ ] Implement parenthetical author parser\n- [ ] Implement connector parsers (et, ex, in, \u0026)\n- [ ] Compose full author parser with alternation for patterns\n- [ ] Handle graceful degradation (unrecognized patterns return empty author)\n- [ ] Write tests for each pattern type\n\n## Design Notes\n- Match common patterns; gracefully degrade on unrecognized\n- False negatives acceptable (species still gets linked without author)\n- Coordinate with f. disambiguation (Hook.f. is author suffix)\n\n## Reference\n- openspec/changes/add-wasm-species-linker/design.md (Author Citation Patterns)","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-02T14:52:52.528973-05:00","updated_at":"2026-01-02T14:52:52.528973-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-3hbq","depends_on_id":"oaks-iiwp","type":"blocks","created_at":"2026-01-02T14:53:05.810622-05:00","created_by":"daemon"}]}
{"id":"oaks-qcti","title":"rust-parser: Create crate and core types","description":"Set up the Rust crate for the species name parser.\n\n## Tasks\n- [ ] Create `rust-parser/` directory at project root\n- [ ] Initialize Cargo.toml with dependencies:\n  - wasm-bindgen = \"0.2\"\n  - nom = \"7\"\n  - serde = { version = \"1\", features = [\"derive\"] }\n  - serde-wasm-bindgen = \"0.6\"\n- [ ] Configure for WASM target in Cargo.toml:\n  ```toml\n  [lib]\n  crate-type = [\"cdylib\", \"rlib\"]\n  ```\n- [ ] Create `src/types.rs` with core types:\n  ```rust\n  pub struct ParseResult {\n      pub genus: String,\n      pub species: String,\n      pub is_hybrid: bool,\n      pub infraspecific: Option\u003cInfraspecific\u003e,\n      pub author: String,\n      pub raw: String,\n      pub start: usize,\n      pub end: usize,\n  }\n\n  pub struct Infraspecific {\n      pub rank: String,\n      pub epithet: String,\n  }\n  ```\n- [ ] Create `src/lib.rs` with module structure\n- [ ] Verify `cargo check` passes\n\n## Reference\n- openspec/changes/add-wasm-species-linker/design.md","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-02T14:51:47.35422-05:00","updated_at":"2026-01-02T14:51:47.35422-05:00","created_by":"jeff"}
{"id":"oaks-s96y","title":"api: Backlinks endpoint for species pages","description":"Add endpoint to find content referencing a species.\n\nEndpoint: GET /api/v1/species/:name/backlinks\n\nImplementation:\nSince content stores resolved links like '/species/alba', backlinks are found by pattern matching:\n\n```go\n// Search for pattern: /species/{name})\npattern := fmt.Sprintf(\"/species/%s)\", speciesName)\n\n// Search taxa content\ntaxa := db.FindTaxaWithContentMatching(pattern)\n\n// Search articles\narticles := db.FindArticlesWithContentMatching(pattern)\n```\n\nResponse format:\n```json\n{\n  \"backlinks\": [\n    {\"type\": \"taxon\", \"name\": \"Quercus\", \"level\": \"section\"},\n    {\"type\": \"article\", \"slug\": \"white-oak-guide\", \"title\": \"White Oak Guide\"}\n  ]\n}\n```\n\nPart of: Content Expansion (Phase 3: Species Auto-Linking)\nSpec: openspec/changes/add-content-expansion/specs/species-linking/spec.md","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-02T13:53:02.383958-05:00","updated_at":"2026-01-02T13:53:02.383958-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-s96y","depends_on_id":"oaks-0dwi","type":"blocks","created_at":"2026-01-02T13:53:45.794123-05:00","created_by":"daemon"}]}
{"id":"oaks-61dx","title":"Web: Update components for fetch-per-view","description":"Update all components to fetch their own data on mount:\n\n1. Species List Component\n   - Fetch GET /api/v1/species on mount\n   - Local state, loading spinner, error state\n   - Use scientific_name field\n\n2. Species Detail Component\n   - Fetch GET /api/v1/species/{name}/full on mount\n   - Use API format fields (scientific_name, flat taxonomy)\n\n3. Taxonomy Browser Component\n   - Fetch GET /api/v1/taxa on mount\n\n4. Search Component\n   - Use GET /api/v1/species/search?q=...\n   - Add debouncing\n   - Cancel pending requests on new search\n\n5. Edit Forms\n   - Fetch sources for dropdown (GET /api/v1/sources)\n   - Update for API format\n   - Note: Remove format conversion (Task 6.3) AFTER this\n\n6. Edit Flow Updates\n   - Refetch data after save with retry\n   - Navigate after create/delete\n   - Handle 409 Conflict for blocked deletes\n\n7. Error Handling\n   - 'Unable to connect' message\n   - Retry button on error states\n   - Remove offline detection code\n\nSee tasks.md sections 8-14","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-31T19:56:57.984157-05:00","updated_at":"2025-12-31T19:56:57.984157-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-61dx","depends_on_id":"oaks-y3yj","type":"blocks","created_at":"2025-12-31T19:57:28.601106-05:00","created_by":"daemon"}]}
{"id":"oaks-4v56","title":"web-edit: Add session timeout for API key","description":"Implement session timeout for security:\n\n**Behavior:**\n- Store timestamp alongside API key in localStorage\n- On app load, check if \u003e24 hours old\n- If expired: clear key, redirect to settings, show message\n- Configurable timeout (localStorage setting, default 24h)\n\n**Implementation:**\n```javascript\nconst SESSION_TIMEOUT_MS = 24 * 60 * 60 * 1000; // 24 hours\n\nfunction setKeyWithTimestamp(key) {\n  localStorage.setItem('oak_api_key', key);\n  localStorage.setItem('oak_api_key_timestamp', Date.now().toString());\n}\n\nfunction isSessionValid() {\n  const timestamp = localStorage.getItem('oak_api_key_timestamp');\n  if (!timestamp) return false;\n  return Date.now() - parseInt(timestamp) \u003c SESSION_TIMEOUT_MS;\n}\n```\n\n**Settings page:**\n- Show remaining session time\n- Option to extend/reset session\n- Option to configure timeout duration","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T19:01:07.784542-05:00","updated_at":"2025-12-31T13:16:43.654256-05:00","closed_at":"2025-12-31T13:16:43.654256-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-4v56","depends_on_id":"oaks-ipzv","type":"blocks","created_at":"2025-12-30T19:01:16.393855-05:00","created_by":"daemon"}]}
{"id":"oaks-26qm.3.2","title":"api: Implement species endpoints","description":"Create CRUD endpoints for oak_entries table.\n\n## File: cli/internal/api/handlers/species.go\n\n## Endpoints\nGET    /api/v1/species              - List (paginated)\nGET    /api/v1/species/:name        - Get by scientific name\nPOST   /api/v1/species              - Create (auth required)\nPUT    /api/v1/species/:name        - Update (auth required)\nDELETE /api/v1/species/:name        - Delete (auth required)\nGET    /api/v1/species/search       - Search by query\n\n## Query Parameters (list)\n- limit: max results (default 50, max 500)\n- offset: skip results (default 0)\n- sort: field to sort by (default: scientific_name)\n- order: asc/desc (default: asc)\n- subgenus: filter by subgenus\n- section: filter by section\n- hybrid: true/false filter\n\n## Request Body (create/update)\n```json\n{\n  \"scientific_name\": \"alba\",\n  \"author\": \"L. 1753\",\n  \"is_hybrid\": false,\n  \"conservation_status\": \"LC\",\n  \"subgenus\": \"Quercus\",\n  \"section\": \"Quercus\",\n  \"synonyms\": [\"alba var. repanda\"]\n}\n```\n\n## Validation\n- scientific_name: required, 2-100 chars\n- subgenus: must be valid (Quercus, Cerris, Cyclobalanopsis)\n- conservation_status: must be valid IUCN code\n\n## Delete Behavior\n- Cascades to species_sources (ON DELETE CASCADE)\n- Returns 404 if species doesn't exist","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T17:25:37.460131-05:00","updated_at":"2025-12-30T11:08:08.013839-05:00","closed_at":"2025-12-30T11:08:08.013839-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-26qm.3.2","depends_on_id":"oaks-26qm.3","type":"parent-child","created_at":"2025-12-29T17:25:37.460657-05:00","created_by":"daemon"},{"issue_id":"oaks-26qm.3.2","depends_on_id":"oaks-26qm.3.1","type":"blocks","created_at":"2025-12-29T17:27:08.731562-05:00","created_by":"daemon"}]}
{"id":"oaks-26qm.4.3","title":"api: Set up Fly.io app and volume","description":"Create Fly.io application and persistent volume.\n\n## Prerequisites\n- Fly CLI installed: brew install flyctl\n- Authenticated: fly auth login\n\n## Steps\n1. Create app:\n```bash\nfly apps create oak-compendium-api\n```\n\n2. Create volume (sjc region):\n```bash\nfly volumes create oak_data --region sjc --size 1\n```\n\n3. Set secrets:\n```bash\nfly secrets set OAK_API_KEY=$(openssl rand -base64 32)\n```\n\n4. Initial deploy:\n```bash\nfly deploy\n```\n\n## Verification\n- fly status\n- fly logs\n- curl https://oak-compendium-api.fly.dev/api/v1/health","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T17:26:04.004108-05:00","updated_at":"2025-12-30T11:31:27.244282-05:00","closed_at":"2025-12-30T11:31:27.244282-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-26qm.4.3","depends_on_id":"oaks-26qm.4","type":"parent-child","created_at":"2025-12-29T17:26:04.00611-05:00","created_by":"daemon"},{"issue_id":"oaks-26qm.4.3","depends_on_id":"oaks-26qm.4.1","type":"blocks","created_at":"2025-12-29T17:28:00.995272-05:00","created_by":"daemon"},{"issue_id":"oaks-26qm.4.3","depends_on_id":"oaks-26qm.4.2","type":"blocks","created_at":"2025-12-29T17:28:01.035067-05:00","created_by":"daemon"}]}
{"id":"oaks-3w0","title":"Set up dual-license structure (MIT code, protected data)","description":"Add licensing to the repository: (1) Add MIT LICENSE file for source code, (2) Add DATA_LICENSE file for data (All Rights Reserved or CC BY-NC-ND), (3) Update README with license section explaining the separation, (4) Add license headers/notices to data files (quercus_data.json, cli/data/*.yaml). This protects data for eventual book while keeping code open source.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-16T12:24:10.06544-05:00","updated_at":"2025-12-16T12:29:30.689554-05:00","closed_at":"2025-12-16T12:29:30.689554-05:00"}
{"id":"oaks-j28k","title":"api: Article CRUD handlers with slug generation","description":"Implement article API endpoints:\n\nEndpoints:\n- GET /api/v1/articles - list articles (supports ?tag=, ?limit=, ?offset=)\n- GET /api/v1/articles/:slug - get by slug\n- POST /api/v1/articles - create (auth required)\n- PUT /api/v1/articles/:slug - update (auth required)\n- DELETE /api/v1/articles/:slug - delete (auth required)\n- GET /api/v1/articles/tags - list unique tags\n\nSlug generation:\n- Auto-generate from title: 'How to Document an Oak' → 'how-to-document-an-oak'\n- Allow explicit slug on create\n- Slug immutable after creation (ignored on PUT)\n- Handle duplicates with numeric suffix\n\nAuth behavior:\n- Unpublished articles: 404 without auth, visible with auth\n- List endpoint: hides unpublished without auth\n\nValidation:\n- title: required, max 200 chars\n- content: required\n- tags: max 10, each max 50 chars\n- author: defaults to 'Jeff Clark'\n\nPart of: Content Expansion (Phase 2: Reference Articles)\nSpec: openspec/changes/add-content-expansion/specs/reference-articles/spec.md","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-02T13:52:40.343048-05:00","updated_at":"2026-01-02T13:52:40.343048-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-j28k","depends_on_id":"oaks-zgu8","type":"blocks","created_at":"2026-01-02T13:53:37.617875-05:00","created_by":"daemon"}]}
{"id":"oaks-om2g","title":"web-edit: Add input sanitization and length limits","description":"Implement input validation for security:\n\n**Max field lengths (client-side):**\n- scientific_name: 100 chars\n- author: 200 chars\n- local_names: 100 chars each\n- range, leaves, etc.: 5000 chars each\n- url: 500 chars\n\n**HTML escaping:**\n- All user content escaped on display (Svelte does this by default)\n- Verify no raw HTML insertion points\n\n**Character validation:**\n- scientific_name: allow letters, spaces, × symbol, dashes\n- url: validate URL format\n\n**Server-side backup:**\n- API enforces same limits\n- Client validation is UX, server is security","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T19:01:07.942552-05:00","updated_at":"2025-12-31T13:16:58.436243-05:00","closed_at":"2025-12-31T13:16:58.436243-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-om2g","depends_on_id":"oaks-koo8","type":"blocks","created_at":"2025-12-30T19:01:16.441289-05:00","created_by":"daemon"}]}
{"id":"oaks-3wbs","title":"Research USDA Oak Field Guide scraper","description":"Investigate the USDA Oak Field Guide as a potential data source for the Quercus database. Tasks include:\n- Locate the USDA Oak Field Guide online (likely plants.usda.gov or fs.usda.gov)\n- Assess the data available (species coverage, morphological data, range info)\n- Determine if the data complements or duplicates Oaks of the World\n- Evaluate scraping feasibility (static HTML vs dynamic content, rate limits)\n- Design scraper architecture if viable","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-27T17:33:49.961336-05:00","updated_at":"2025-12-27T17:35:48.13502-05:00","created_by":"jeff"}
{"id":"oaks-yhyi","title":"web-edit: Test auth flow and session management","description":"Test authentication scenarios:\n\n**Valid key flow:**\n- Enter valid key → key accepted → admin mode shown\n- Key persists across page reload\n- Key persists across browser restart\n\n**Invalid key flow:**\n- Enter invalid key → error shown → not stored\n- Enter malformed key → validation error\n\n**Session timeout:**\n- Set short timeout (for testing)\n- Wait for expiry → key cleared → message shown\n\n**Logout flow:**\n- Click logout → key cleared → admin mode hidden\n- Edit buttons disabled after logout\n\n**401 handling:**\n- Simulate 401 response → key cleared\n- Toast notification shown\n- Redirect to settings (if implemented)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T19:01:47.325475-05:00","updated_at":"2025-12-31T13:25:33.314268-05:00","closed_at":"2025-12-31T13:25:33.314268-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-yhyi","depends_on_id":"oaks-4v56","type":"blocks","created_at":"2025-12-30T19:01:55.62261-05:00","created_by":"daemon"}]}
{"id":"oaks-ki0","title":"Design web app export JSON format","description":"Define the JSON structure that CLI exports for web app consumption. Should balance completeness with performance/size for browser loading.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T16:46:08.907526-05:00","updated_at":"2025-12-14T19:24:16.8906-05:00","closed_at":"2025-12-14T19:24:16.8906-05:00","dependencies":[{"issue_id":"oaks-ki0","depends_on_id":"oaks-e9p","type":"blocks","created_at":"2025-12-14T16:51:24.790191-05:00","created_by":"daemon"}]}
{"id":"oaks-a81","title":"Add source selector dropdown component to SpeciesDetail","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T15:17:31.632726-05:00","updated_at":"2025-12-15T16:13:50.915193-05:00","closed_at":"2025-12-15T16:13:50.915193-05:00","dependencies":[{"issue_id":"oaks-a81","depends_on_id":"oaks-get","type":"blocks","created_at":"2025-12-15T15:17:37.922669-05:00","created_by":"daemon"}]}
{"id":"oaks-y76","title":"Clean up console debug output","description":"Remove or conditionalize console.log/console.warn statements used during development. Keep only essential error logging.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T12:08:45.336913-05:00","updated_at":"2025-12-15T21:54:08.679992-05:00","closed_at":"2025-12-15T21:54:08.679992-05:00"}
{"id":"oaks-szyx","title":"web: Add markdown rendering (marked + DOMPurify)","description":"Add markdown rendering capability to web app with proper sanitization.\n\nImplementation:\n1. npm install marked dompurify\n2. Create MarkdownRenderer.svelte component\n3. Configure marked for CommonMark subset\n4. Always sanitize HTML output with DOMPurify\n\nComponent API:\n```svelte\n\u003cMarkdownRenderer content={markdownString} /\u003e\n```\n\nSecurity: ALL rendered markdown MUST be sanitized before DOM insertion, even with trusted content.\n\nPart of: Content Expansion (Phase 1: Taxa Content)\nDesign: openspec/changes/add-content-expansion/design.md (Decision: Markdown Library)","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-02T13:52:11.971031-05:00","updated_at":"2026-01-02T13:52:11.971031-05:00","created_by":"jeff"}
{"id":"oaks-2zrz","title":"Fix race condition in web dataStore.js","description":"loadSpeciesData() starts background update without awaiting. If initial load is slow and update completes faster, version mismatch possible. Add semaphore flag to prevent concurrent updates.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-27T14:48:08.566486-05:00","updated_at":"2025-12-27T16:35:48.440066-05:00","closed_at":"2025-12-27T16:35:48.440066-05:00"}
{"id":"oaks-791","title":"Evaluate using a CMS vs custom CLI tooling","description":"## Summary\nEvaluated whether to use a CMS vs custom CLI tooling. Conclusion: Keep CLI for its strengths, add Bear as a capture layer.\n\n## Use Cases (Confirmed)\n1. **Quick notes/observations** → Bear (mobile, low friction)\n2. **Bulk import** → CLI (scraper, iNaturalist, YAML)\n3. **Source management** → CLI\n4. **Taxonomy management** → CLI\n\n## Architecture Decision\n- Bear = capture layer for personal notes (mobile-friendly)\n- CLI = data pipeline, source/taxonomy management, bulk operations\n- `oak note` command stays (laptop editing option)\n- Web = read-only display\n\n## Next Steps\n- Integrate Bear notes into the data pipeline\n- Bear notes sync via iCloud, script reads Bear SQLite, imports to oak DB\n\n## CMS Evaluation Result\nEvaluated Strapi, Directus, Decap, Tina. Concluded: we're not building a generic CMS, we're building a domain-specific data pipeline. The editing friction is solved by Bear, not by adopting a CMS.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-19T10:24:48.717506-05:00","updated_at":"2025-12-19T12:17:42.95872-05:00","closed_at":"2025-12-19T12:17:42.95872-05:00"}
{"id":"oaks-tuf3","title":"Remove dead code and cleanup inconsistencies","description":"1) scraper.py line 97: commented-out code from incomplete refactoring. 2) parser.py lines 385-395: inconsistent null vs empty list handling. 3) utils.py line 22: add comment explaining 0.25s rate limit. 4) scraper.py lines 169-173: catch specific exceptions instead of bare Exception.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-27T14:48:09.939903-05:00","updated_at":"2025-12-27T14:48:09.939903-05:00"}
{"id":"oaks-0u6b","title":"web-css: Research and plan CSS architecture improvements","description":"## Problem\n\nThe web app has significant CSS sprawl:\n- SpeciesDetail.svelte: 538 lines of CSS\n- LandingPage.svelte: 432 lines\n- SourceComparison.svelte: 297 lines\n- SourceDetail.svelte: 272 lines\n- TaxonView.svelte: 235 lines\n- Total: ~2,200+ lines across major components\n\n## Research Findings\n\nIdentified major duplications:\n1. **Markdown styles** - 3 nearly identical blocks (~120 lines wasted)\n2. **Taxonomy navigation** - exact duplicate between SpeciesDetail/TaxonView (~50 lines)\n3. **Header box patterns** - duplicate gradient headers\n4. **Card/section patterns** - similar structures across all components\n5. **Badge/pill patterns** - 6 variations of same concept\n6. **Interactive hover states** - repeated transform/shadow patterns\n\n## Recommended Strategy\n\nUse Tailwind 4's @layer components in app.css for truly shared patterns:\n- `.prose-content` - markdown rendering\n- `.card-base`, `.card-interactive` - card patterns\n- `.badge` - pill/badge base\n- `.section-title` - heading pattern\n\nCreate CSS partials in `src/lib/styles/` for 2-3 component shares (e.g., taxonomy nav).\n\nKeep component-specific styles local.\n\nExpected result: ~30-40% reduction in total CSS lines.\n\n## Implementation\n\nSee comments for detailed analysis and migration plan. Implementation beads to be created.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T10:58:28.558454-05:00","updated_at":"2025-12-29T11:05:03.221686-05:00","closed_at":"2025-12-29T11:05:03.221686-05:00","created_by":"jeff"}
{"id":"oaks-yd3","title":"Fix command injection risk in editor selection","description":"CRITICAL: cli/internal/editor/editor.go:92 executes $EDITOR without validation. Attacker controlling env can run arbitrary commands. Validate editor path before exec.","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-12-27T14:21:45.386539-05:00","updated_at":"2025-12-27T15:58:08.672302-05:00","closed_at":"2025-12-27T15:58:08.672302-05:00"}
{"id":"oaks-26qm.2.6","title":"api: Implement oak serve command","description":"Create the CLI command to start the API server.\n\n## File: cli/cmd/serve.go\n\n## Command\n```\noak serve [flags]\n\nFlags:\n  --port int        Port to listen on (default 8080)\n  --host string     Host to bind to (default \"0.0.0.0\")\n  --db string       Database path (default \"./oak_compendium.db\")\n  --regenerate-key  Generate new API key and exit\n\nEnvironment:\n  OAK_API_KEY       API key (overrides file)\n  OAK_DB_PATH       Database path (overrides --db)\n  OAK_PORT          Port (overrides --port)\n```\n\n## Startup Sequence\n1. Load/generate API key\n2. Open database connection\n3. Create server instance\n4. Register signal handlers (SIGINT, SIGTERM)\n5. Start HTTP server\n6. Log startup message with port\n\n## Graceful Shutdown\n- Catch interrupt signals\n- Set 30s shutdown timeout\n- Complete in-flight requests\n- Close database connection\n- Exit cleanly\n\n## Output\n```\nOak Compendium API server\nDatabase: ./oak_compendium.db\nAPI Key:  ••••••••••••••••••••••••\nListening on http://0.0.0.0:8080\n```","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T17:25:35.443325-05:00","updated_at":"2025-12-30T10:56:31.665749-05:00","closed_at":"2025-12-30T10:56:31.665749-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-26qm.2.6","depends_on_id":"oaks-26qm.2","type":"parent-child","created_at":"2025-12-29T17:25:35.443874-05:00","created_by":"daemon"},{"issue_id":"oaks-26qm.2.6","depends_on_id":"oaks-26qm.2.5","type":"blocks","created_at":"2025-12-29T17:26:58.414116-05:00","created_by":"daemon"}]}
{"id":"oaks-26qm.3.3","title":"api: Implement taxa endpoints","description":"Create CRUD endpoints for taxa table.\n\n## File: cli/internal/api/handlers/taxa.go\n\n## Endpoints\nGET    /api/v1/taxa                  - List all (optional level filter)\nGET    /api/v1/taxa/:level/:name     - Get specific taxon\nPOST   /api/v1/taxa                  - Create (auth required)\nPUT    /api/v1/taxa/:level/:name     - Update (auth required)\nDELETE /api/v1/taxa/:level/:name     - Delete (auth required)\n\n## Query Parameters (list)\n- level: filter by level (subgenus, section, subsection, complex)\n\n## URL Parameters\n- level: subgenus|section|subsection|complex\n- name: taxon name\n\n## Request Body\n```json\n{\n  \"name\": \"Quercus\",\n  \"level\": \"section\",\n  \"parent\": \"Quercus\",\n  \"author\": \"L.\",\n  \"notes\": \"White oaks\",\n  \"links\": [{\"label\": \"iNaturalist\", \"url\": \"...\"}]\n}\n```\n\n## Validation\n- name: required\n- level: required, must be valid enum\n- Composite primary key: (name, level)\n\n## Notes\n- No pagination needed (small dataset)\n- Return 404 for non-existent taxon","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T17:25:37.611997-05:00","updated_at":"2025-12-30T11:07:56.703424-05:00","closed_at":"2025-12-30T11:07:56.703424-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-26qm.3.3","depends_on_id":"oaks-26qm.3","type":"parent-child","created_at":"2025-12-29T17:25:37.612471-05:00","created_by":"daemon"},{"issue_id":"oaks-26qm.3.3","depends_on_id":"oaks-26qm.3.1","type":"blocks","created_at":"2025-12-29T17:27:08.771681-05:00","created_by":"daemon"}]}
{"id":"oaks-yu4","title":"Remove 'Unknown' taxa grouping from taxonomy tree","description":"Currently species without a subgenus/section are grouped under 'Unknown'. Instead, species should be shown directly under their parent taxon level without creating artificial 'Unknown' intermediate nodes. A species directly in a Section (without subsection) as a sibling to child subsections is fine - we just don't want 'Unknown' appearing as a taxon name.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T12:15:59.19705-05:00","updated_at":"2025-12-15T12:19:05.400404-05:00","closed_at":"2025-12-15T12:19:05.400404-05:00"}
{"id":"oaks-8gt","title":"Redesign landing page with featured species and browse links","description":"Redesign the main landing page to:\n1. Feature a random species from the database\n2. Provide view selection: List view OR Taxonomy tree view (the current view toggle buttons move here)\n3. When searching, replace the landing content with search results\n4. Links to browse both ways (alphabetical list, taxonomy tree)","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-15T11:44:01.844816-05:00","updated_at":"2025-12-16T10:11:50.1375-05:00","closed_at":"2025-12-16T10:11:50.1375-05:00","dependencies":[{"issue_id":"oaks-8gt","depends_on_id":"oaks-4zk","type":"blocks","created_at":"2025-12-15T11:44:20.963116-05:00","created_by":"daemon"}]}
{"id":"oaks-xk6v","title":"iOS: Polish and TestFlight","description":"App icon. Onboarding flow. Error handling. TestFlight build.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-27T16:05:56.446365-05:00","updated_at":"2025-12-27T16:05:56.446365-05:00","dependencies":[{"issue_id":"oaks-xk6v","depends_on_id":"oaks-xzc7","type":"blocks","created_at":"2025-12-27T16:06:05.272735-05:00","created_by":"daemon"}]}
{"id":"oaks-26qm.2.3","title":"api: Implement middleware stack","description":"Create middleware for logging, recovery, request ID, and rate limiting.\n\n## File: cli/internal/api/middleware.go\n\n## Middleware Chain Order\n1. RequestID - generate unique ID for tracing\n2. RealIP - extract client IP from headers\n3. Logger - structured request/response logging\n4. Recoverer - panic recovery\n5. Timeout - request timeout (30s default)\n6. RateLimit - per-IP rate limiting (except health endpoints)\n7. CORS - cross-origin support\n\n## Logging Format (slog JSON)\n```json\n{\n  \"time\": \"2025-01-15T10:30:00Z\",\n  \"level\": \"INFO\",\n  \"msg\": \"request completed\",\n  \"request_id\": \"abc123\",\n  \"method\": \"GET\",\n  \"path\": \"/api/v1/species/alba\",\n  \"status\": 200,\n  \"duration_ms\": 12,\n  \"client_ip\": \"1.2.3.4\"\n}\n```\n\n## Rate Limits\n- Read (GET): 10 req/sec per IP\n- Write (POST/PUT/DELETE): 5 req/sec per IP\n- Backup: 1 req/min\n- Health endpoints: EXEMPT (for monitoring)\n\n## CORS Configuration\nProduction origins:\n- https://oakcompendium.org\n- https://oakcompendium.com\n\nDevelopment origins (use AllowOriginFunc for flexibility):\n```go\nAllowOriginFunc: func(r *http.Request, origin string) bool {\n    // Allow production origins\n    if origin == \"https://oakcompendium.org\" || origin == \"https://oakcompendium.com\" {\n        return true\n    }\n    // Allow localhost in development (any port)\n    if strings.HasPrefix(origin, \"http://localhost:\") {\n        return true\n    }\n    return false\n},\n```\n\n**Note**: chi/cors wildcards like `http://localhost:*` are NOT valid. Use AllowOriginFunc for dynamic localhost port matching.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T17:25:34.981994-05:00","updated_at":"2025-12-29T20:02:01.556339-05:00","closed_at":"2025-12-29T20:02:01.556339-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-26qm.2.3","depends_on_id":"oaks-26qm.2","type":"parent-child","created_at":"2025-12-29T17:25:34.982504-05:00","created_by":"daemon"},{"issue_id":"oaks-26qm.2.3","depends_on_id":"oaks-26qm.2.2","type":"blocks","created_at":"2025-12-29T17:26:58.268908-05:00","created_by":"daemon"}]}
{"id":"oaks-nn4","title":"Add maps for species range data","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-16T10:37:50.743788-05:00","updated_at":"2025-12-16T10:37:50.743788-05:00","dependencies":[{"issue_id":"oaks-nn4","depends_on_id":"oaks-xb5","type":"blocks","created_at":"2025-12-16T10:45:30.494164-05:00","created_by":"daemon"},{"issue_id":"oaks-nn4","depends_on_id":"oaks-3nk","type":"blocks","created_at":"2025-12-16T10:45:30.524733-05:00","created_by":"daemon"},{"issue_id":"oaks-nn4","depends_on_id":"oaks-koq","type":"blocks","created_at":"2025-12-16T10:45:30.399571-05:00","created_by":"daemon"},{"issue_id":"oaks-nn4","depends_on_id":"oaks-lbk","type":"blocks","created_at":"2025-12-16T10:45:30.431406-05:00","created_by":"daemon"},{"issue_id":"oaks-nn4","depends_on_id":"oaks-b8o","type":"blocks","created_at":"2025-12-16T10:45:30.46231-05:00","created_by":"daemon"}]}
{"id":"oaks-93c","title":"Move search results count from Header to results list","description":"The 'X species found' text currently appears in the Header below the search input. This should instead be displayed at the top of the search results list in SpeciesList.svelte.\n\nCurrent location: Header.svelte / Search.svelte (in header bar)\nDesired location: SpeciesList.svelte (above the results grid)\n\nThis keeps the header clean and puts the count contextually with the results it describes.\n\nFiles:\n- web/src/lib/components/Search.svelte (remove count display)\n- web/src/lib/components/SpeciesList.svelte (add count display when filtering)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T16:43:52.814636-05:00","updated_at":"2025-12-19T15:47:10.210765-05:00","closed_at":"2025-12-19T15:47:10.210765-05:00"}
{"id":"oaks-b8o","title":"Add region assignment to CLI","description":"Add CLI commands to assign and manage geographic regions for species. Should support assigning multiple regions at different granularities.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-16T10:45:14.424262-05:00","updated_at":"2025-12-16T10:45:14.424262-05:00","dependencies":[{"issue_id":"oaks-b8o","depends_on_id":"oaks-lbk","type":"blocks","created_at":"2025-12-16T10:45:29.995845-05:00","created_by":"daemon"}]}
{"id":"oaks-qefu","title":"web: Write Playwright E2E tests for critical user flows","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T11:23:59.884862-05:00","updated_at":"2026-01-02T14:51:20.834864-05:00","closed_at":"2026-01-02T14:51:20.834864-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-qefu","depends_on_id":"oaks-inc8","type":"blocks","created_at":"2026-01-02T11:24:09.498807-05:00","created_by":"daemon"}]}
{"id":"oaks-8e5","title":"Oak identification tool","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-21T10:48:29.761281-05:00","updated_at":"2025-12-21T10:48:29.761281-05:00","dependencies":[{"issue_id":"oaks-8e5","depends_on_id":"oaks-d88","type":"blocks","created_at":"2025-12-21T10:48:53.288504-05:00","created_by":"daemon"}]}
{"id":"oaks-4y2","title":"Add header navigation with Browse and About links","description":"Add persistent header navigation with links to: Browse (taxonomy tree view) and About page. Search should remain in the header.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-15T11:44:02.007017-05:00","updated_at":"2025-12-16T10:22:51.947442-05:00","closed_at":"2025-12-16T10:22:51.947442-05:00","dependencies":[{"issue_id":"oaks-4y2","depends_on_id":"oaks-4zk","type":"blocks","created_at":"2025-12-15T11:44:20.993784-05:00","created_by":"daemon"}]}
{"id":"oaks-542","title":"Fix XSS vulnerability in markdown rendering","description":"CRITICAL: SpeciesDetail.svelte:78-87 and SourceComparison.svelte:60-67 use inadequate regex sanitization. Replace with DOMPurify library.","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-12-27T14:21:45.1871-05:00","updated_at":"2025-12-27T15:58:08.668814-05:00","closed_at":"2025-12-27T15:58:08.668814-05:00"}
{"id":"oaks-xw96","title":"cli: Ignored errors in production code","description":"Several places in production code ignore errors that could hide problems:\n\n1. db.go:153 - Migration errors silently swallowed:\n   `_, _ = db.conn.Exec(stmt) // Ignore error - column may already exist`\n   \n2. import_bear.go:149 - Parse error ignored:\n   `lastImportCoreData, _ = strconv.ParseFloat(lastImportStr, 64)`\n   \n3. health.go:24,34,45,54 - JSON encoding errors ignored:\n   `_ = json.NewEncoder(w).Encode(HealthResponse{Status: \"ok\"})`\n\nFixes:\n- db.go: Check if error is 'duplicate column' specifically, log others\n- import_bear.go: Handle parse error, use 0 as default with warning\n- health.go: Log encoding errors (rare but shouldn't be silent)","status":"open","priority":2,"issue_type":"bug","created_at":"2025-12-30T11:36:02.318377-05:00","updated_at":"2025-12-30T11:36:02.318377-05:00","created_by":"jeff"}
{"id":"oaks-vwou","title":"Sanitize error messages to avoid info leakage","description":"MEDIUM: cli/internal/editor/editor.go:98 includes $EDITOR path in error messages. Remove sensitive info from user-facing errors.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-27T14:21:58.633006-05:00","updated_at":"2025-12-29T11:03:07.917072-05:00","closed_at":"2025-12-29T11:03:07.917072-05:00"}
{"id":"oaks-uj5","title":"Add alt text to all images and icons","description":"Ensure all images have appropriate alt text. Decorative images should have empty alt=''. Icons used as buttons need aria-label. SVG icons need proper accessibility attributes.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T21:47:57.646624-05:00","updated_at":"2025-12-23T19:01:03.982298-05:00","closed_at":"2025-12-23T19:01:03.982298-05:00"}
{"id":"oaks-15m2","title":"Extract duplicate code patterns in Go CLI","description":"1) Seven identical merge loops in import_bulk.go (lines 196-266) - extract mergeStringLists() helper. 2) Repeated unmarshal+nil-check pattern in db.go - extract unmarshalJSONArray() helper. 3) Inconsistent *string vs sql.NullString conversions - standardize.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T14:48:09.030425-05:00","updated_at":"2025-12-29T12:30:02.128851-05:00","closed_at":"2025-12-29T12:30:02.128851-05:00"}
{"id":"oaks-67lm","title":"api-testing: API test suite","description":"Create comprehensive tests for the API.\n\n## Test Types\n- Unit tests for handlers\n- Integration tests against test DB\n- End-to-end tests\n\n## Coverage\n- All CRUD operations\n- Authentication (valid key, invalid key, missing key)\n- Input validation (malformed requests, edge cases)\n- Error responses\n\n## Tooling\n- Go testing stdlib\n- httptest for handler tests\n- Consider: Postman/Bruno collection for manual testing","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-29T16:25:37.935171-05:00","updated_at":"2025-12-29T17:16:03.78716-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-67lm","depends_on_id":"oaks-doc9","type":"blocks","created_at":"2025-12-29T16:25:49.007384-05:00","created_by":"daemon"}],"deleted_at":"2025-12-29T17:16:03.78716-05:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"oaks-ujn7","title":"web-edit: Design scrollable modal with field sections","description":"Design form layout for large edit forms:\n\n**Species form has many fields:**\n- Core: name, author, is_hybrid, conservation_status\n- Taxonomy: subgenus, section, subsection, complex\n- Relationships: parent1, parent2, hybrids, closely_related_to\n- Metadata: synonyms, subspecies_varieties\n\n**Layout approach:**\n- Modal with fixed header (title, close button)\n- Scrollable content area with field sections\n- Fixed footer (Cancel, Save buttons)\n- Section headers/dividers for field groups\n\n**Section groups:**\n1. Core Information (name, author, conservation)\n2. Taxonomy (subgenus through complex)\n3. Hybrid Parents (conditional, when is_hybrid)\n4. Related Species (hybrids, closely_related_to)\n5. Nomenclature (synonyms, subspecies)\n\n**CSS:**\n- max-height: 80vh for modal\n- overflow-y: auto for content\n- position: sticky for header/footer\n\n**Mobile adaptation:**\n- Full-screen on small devices\n- Native scroll behavior\n- Larger touch targets","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T19:02:07.052645-05:00","updated_at":"2025-12-31T12:02:12.36682-05:00","closed_at":"2025-12-31T12:02:12.36682-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-ujn7","depends_on_id":"oaks-2d63","type":"blocks","created_at":"2025-12-30T19:02:11.875915-05:00","created_by":"daemon"}]}
{"id":"oaks-ry7","title":"Extract stable Header component","description":"Extract Header.svelte from App.svelte with stable structure:\n\n**Header contents:**\n- Logo (oak leaf SVG) + title 'Quercus Compendium' + subtitle\n- Search component\n- Clicking logo/title navigates to landing page (home)\n\n**Remove from header:**\n- View toggle buttons (moving to landing page per oaks-8gt)\n- Back button (breadcrumbs handle navigation)\n- All conditional rendering\n\n**Update views:**\n- Detail view: Add breadcrumb navigation in content\n- Remove header back buttons from App.svelte\n- TaxonView breadcrumbs already good","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-15T16:44:13.650634-05:00","updated_at":"2025-12-15T16:47:44.303795-05:00","closed_at":"2025-12-15T16:47:44.303795-05:00"}
{"id":"oaks-1tz","title":"Improve web app design and UI polish","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-14T14:10:19.74211-05:00","updated_at":"2025-12-14T14:10:19.74211-05:00"}
{"id":"oaks-4uq","title":"Add source browsing to landing page","description":"Add a Sources section to the landing page showing available data sources with basic stats and links to their detail pages.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T10:53:42.367609-05:00","updated_at":"2025-12-21T11:34:24.413139-05:00","closed_at":"2025-12-21T11:34:24.413139-05:00","dependencies":[{"issue_id":"oaks-4uq","depends_on_id":"oaks-b14","type":"blocks","created_at":"2025-12-21T10:53:53.824173-05:00","created_by":"daemon"}]}
{"id":"oaks-8dk9","title":"web-edit: Handle taxon delete with constraint checking","description":"Implement taxon deletion with referential integrity:\n\n**API constraints:**\n- Cannot delete taxon if species reference it (409 Conflict)\n- Cannot delete taxon if child taxa exist (409 Conflict)\n\n**Delete flow:**\n1. User clicks Delete\n2. Check for species using this taxon\n3. If species exist: show error \"Cannot delete: X species use this taxon\"\n4. If child taxa exist: show warning \"This taxon has Y child taxa that will be orphaned\" (or error)\n5. If deletable: show confirm dialog\n6. On confirm: call deleteTaxon()\n7. Handle 409 responses gracefully\n\n**UI:**\n- Pre-flight check before showing confirm dialog\n- Clear error messages explaining constraint violations","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T18:59:43.574563-05:00","updated_at":"2025-12-31T13:06:02.915226-05:00","closed_at":"2025-12-31T13:06:02.915226-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-8dk9","depends_on_id":"oaks-9r8n","type":"blocks","created_at":"2025-12-30T18:59:51.33315-05:00","created_by":"daemon"},{"issue_id":"oaks-8dk9","depends_on_id":"oaks-p7sc","type":"blocks","created_at":"2025-12-30T18:59:51.297337-05:00","created_by":"daemon"}]}
{"id":"oaks-wlz","title":"External links feature for species","description":"Add external links to species entries to connect to Wikipedia, iNaturalist, Flora of North America, FEIS, etc.\n\nArchitecture decision:\n- Universal links (Wikipedia, iNaturalist search): Hardcode URL patterns in UI, construct on the fly\n- Limited-coverage sites (FNA, FEIS): Would need per-species tracking if we add these later\n\nStart simple with universal links, add coverage tracking infrastructure only if needed.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-23T12:13:02.84894-05:00","updated_at":"2025-12-23T12:13:02.84894-05:00","dependencies":[{"issue_id":"oaks-wlz","depends_on_id":"oaks-iji","type":"blocks","created_at":"2025-12-23T12:13:24.213529-05:00","created_by":"daemon"},{"issue_id":"oaks-wlz","depends_on_id":"oaks-ze3","type":"blocks","created_at":"2025-12-23T12:13:24.312933-05:00","created_by":"daemon"}]}
{"id":"oaks-bx0","title":"Research: Header and navigation architecture","description":"The header currently disappears or changes dramatically between views (list, taxonomy, taxon, detail). This creates a janky UX and makes the code complex with multiple conditional branches.\n\n**Questions to answer:**\n1. What should be in the header across all views? (logo, search, nav links, back button?)\n2. Should the header be truly stable (same structure always) or contextual?\n3. How should navigation work? (breadcrumbs in content vs header, view toggles, etc.)\n4. Should we extract Header as its own component?\n5. How do taxon pages fit into the navigation model?\n\n**Current issues:**\n- Header conditionally renders different content for detail/taxon/browse views\n- Search box only shows in browse views\n- Back button replaces entire header in detail/taxon views\n- View toggle (list/tree) only in browse mode\n\n**Deliverable:** Design decision on header structure before implementing taxon pages properly.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-15T16:38:10.149651-05:00","updated_at":"2025-12-15T16:44:05.178469-05:00","closed_at":"2025-12-15T16:44:05.178469-05:00"}
{"id":"oaks-68l2","title":"web-edit: Create SourceEditForm component","description":"Create web/src/lib/components/SourceEditForm.svelte:\n\n**Fields:**\n- name (text input, required)\n- source_type (dropdown: Website, Book, Personal Observation, Database, etc.)\n- description (textarea)\n- author (text input)\n- year (number input)\n- url (text input, validate format)\n- isbn (text input)\n- doi (text input)\n- notes (textarea)\n\n**Validation:**\n- Name required\n- URL format validation (if provided)\n- DOI format validation (if provided)\n\n**Form behavior:**\n- Pre-fill for edit mode\n- Empty for create mode\n- toApiFormat conversion before submit","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T19:00:12.573621-05:00","updated_at":"2025-12-31T13:07:28.177354-05:00","closed_at":"2025-12-31T13:07:28.177354-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-68l2","depends_on_id":"oaks-2d63","type":"blocks","created_at":"2025-12-30T19:00:20.723682-05:00","created_by":"daemon"},{"issue_id":"oaks-68l2","depends_on_id":"oaks-7k7w","type":"blocks","created_at":"2025-12-30T19:00:20.763237-05:00","created_by":"daemon"}]}
{"id":"oaks-cnsw","title":"Expand test coverage to 60%+ on critical paths","description":"Add scraper integration tests with mock HTML. Implement CLI command tests with temporary database. Add Svelte component tests for SpeciesDetail, SourceComparison. Create end-to-end test for full data pipeline (scraper → CLI → web).","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T14:43:33.637403-05:00","updated_at":"2025-12-27T14:58:15.099328-05:00","closed_at":"2025-12-27T14:58:15.099328-05:00"}
{"id":"oaks-26qm.2.4","title":"api: Implement auth middleware","description":"Create API key authentication middleware for write operations.\n\n## File: cli/internal/api/auth.go\n\n## Key Design Decision\n**Reads are PUBLIC** - no authentication required for GET requests.\n**Writes require API key** - POST/PUT/DELETE must include valid Bearer token.\n\nThis enables:\n- Web app to fetch data without configuration\n- iOS app to browse species without auth setup\n- Only note submission/edits require the API key\n\n## Implementation\n```go\nfunc (s *Server) RequireAuth(next http.Handler) http.Handler\nfunc ValidateAPIKey(provided, expected string) bool\nfunc GenerateAPIKey() (string, error)  // 32 random bytes, base64\nfunc LoadAPIKey(path string) (string, error)\nfunc SaveAPIKey(path string, key string) error\n```\n\n## Behavior\n- Check Authorization header: Bearer \u003ckey\u003e\n- Compare with constant-time comparison (crypto/subtle)\n- Return 401 if missing or invalid\n- Only applied to POST/PUT/DELETE routes (not GET)\n\n## API Key Storage\n- Default path: ~/.oak/api_key\n- Environment override: OAK_API_KEY\n- Generate on first run if missing\n- --regenerate-key flag to create new key\n\n## Security\n- Never log API key values\n- Use crypto/rand for generation\n- Constant-time comparison to prevent timing attacks","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T17:25:35.139779-05:00","updated_at":"2025-12-30T10:55:26.304522-05:00","closed_at":"2025-12-30T10:55:26.304522-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-26qm.2.4","depends_on_id":"oaks-26qm.2.3","type":"blocks","created_at":"2025-12-29T17:26:58.306722-05:00","created_by":"daemon"},{"issue_id":"oaks-26qm.2.4","depends_on_id":"oaks-26qm.2","type":"parent-child","created_at":"2025-12-29T17:25:35.140303-05:00","created_by":"daemon"}]}
{"id":"oaks-2d63","title":"web-edit: Create EditModal component","description":"Create web/src/lib/components/EditModal.svelte:\n\n**Features:**\n- Reusable modal container for edit forms\n- Scrollable content area for long forms\n- Header with title and close button\n- Footer with Cancel/Save buttons\n- Loading state for save operations\n- Disable submit during data refresh\n\n**Accessibility:**\n- Focus trap (Tab cycles within modal)\n- Escape to close\n- Return focus to trigger element on close\n- ARIA labels (dialog, labelledby, describedby)\n- role=\"dialog\" with aria-modal=\"true\"\n\n**Props:**\n- title: string\n- isOpen: boolean\n- isSaving: boolean\n- onClose: () =\u003e void\n- onSave: () =\u003e void\n\n**Slots:**\n- default: form content\n- footer: optional custom footer","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T18:57:49.125821-05:00","updated_at":"2025-12-31T11:03:55.017346-05:00","closed_at":"2025-12-31T11:03:55.017346-05:00","created_by":"jeff"}
{"id":"oaks-cgv","title":"Populate taxonomy tables with known taxa","description":"Add subgenera (Quercus, Cerris, Cyclobalanopsis), sections (Lobatae, Quercus, Ilex, etc.), subsections (Coccineae, Dumosae, Albae, etc.), and known complexes to the database","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T16:46:08.420576-05:00","updated_at":"2025-12-15T10:14:35.774971-05:00","closed_at":"2025-12-15T10:14:35.774971-05:00"}
{"id":"oaks-3hun","title":"web: Display taxa content on taxon pages","description":"Add content display to TaxonView component.\n\nImplementation:\n1. Update fetchTaxon() to include content field (already returned by API after handler update)\n2. Add content section to TaxonView.svelte\n3. Use MarkdownRenderer for display\n4. Handle empty content gracefully (no section shown)\n5. Show content_updated_at timestamp if present\n\nUX:\n- Content section appears after taxa metadata\n- No content = no section (graceful handling)\n\nPart of: Content Expansion (Phase 1: Taxa Content)\nSpec: openspec/changes/add-content-expansion/specs/taxa-content/spec.md","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-02T13:52:12.148495-05:00","updated_at":"2026-01-02T13:52:12.148495-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-3hun","depends_on_id":"oaks-szyx","type":"blocks","created_at":"2026-01-02T13:53:36.897865-05:00","created_by":"daemon"},{"issue_id":"oaks-3hun","depends_on_id":"oaks-4oed","type":"blocks","created_at":"2026-01-02T13:53:37.072086-05:00","created_by":"daemon"}]}
{"id":"oaks-bxjm","title":"Escape SQL LIKE pattern special characters","description":"HIGH: cli/internal/db/db.go:390,550 SearchTaxa/SearchEntries don't escape % and _ in LIKE patterns. User input can manipulate query semantics. Add escapeLike() helper.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-27T14:21:46.186316-05:00","updated_at":"2025-12-27T16:35:48.439584-05:00","closed_at":"2025-12-27T16:35:48.439584-05:00"}
{"id":"oaks-n9is","title":"Create species-name-parser spec proposal","description":"## Context\n\nThe `add-content-expansion` proposal needs a species name parser for auto-linking species mentions in markdown content. Rather than hack together regexes, we need a proper parser using parser combinators.\n\n## Prompt for New Proposal\n\nCreate an OpenSpec proposal for a `species-name-parser` capability.\n\n### Requirements\n\nThe parser should handle these species name forms:\n- Full form: `Quercus alba`\n- Abbreviated: `Q. alba`, `Q.alba` \n- Hybrids: `Quercus ×bebbiana`, `Q. ×alba`\n- Infraspecific: `Quercus alba var. latiloba`, `Q. alba subsp. foo`\n- With/without author citations: `Quercus alba L.`\n\n### Use Cases\n\n1. **Auto-linking**: Find species mentions in markdown, replace with links\n2. **Search parsing**: Parse user search input to extract species names\n3. **Validation**: Validate species name format on input\n4. **Import parsing**: Extract species names from unstructured text\n\n### Technical Direction\n\n- Use parser combinator approach (not regex)\n- JavaScript implementation for web app\n- Consider: parsimmon, arcsecond, or minimal custom combinators\n- Parser should return structured data (genus, species, hybrid flag, infraspecific rank, author)\n- Should handle detecting multiple species in a text block\n\n### Relationship to add-content-expansion\n\nThe `species-linking` spec in `add-content-expansion` depends on this parser. Once this spec is complete:\n1. Update `add-content-expansion/design.md` to reference the parser\n2. Update `add-content-expansion/specs/species-linking/spec.md` scenarios to use parser\n\n### Files to Review\n\n- `openspec/changes/add-content-expansion/specs/species-linking/spec.md` - what needs the parser\n- `openspec/changes/add-content-expansion/design.md` - current broken algorithm to replace","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-01T20:32:36.271722-05:00","updated_at":"2026-01-01T20:36:01.04758-05:00","closed_at":"2026-01-01T20:36:01.04758-05:00","created_by":"jeff"}
{"id":"oaks-cya","title":"Add landmark regions for screen readers","description":"Use semantic HTML5 landmarks (main, nav, header, footer, aside) or ARIA landmarks (role=main, etc.) to help screen reader users navigate page structure.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T21:47:58.340589-05:00","updated_at":"2025-12-23T19:01:03.983732-05:00","closed_at":"2025-12-23T19:01:03.983732-05:00"}
{"id":"oaks-b83","title":"Add navigation to comparison tool","description":"Add route and entry point for the source comparison tool. Determine if accessed from species detail page, a separate page, or both.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-16T10:45:15.32971-05:00","updated_at":"2025-12-23T19:37:47.095959-05:00","closed_at":"2025-12-23T19:37:47.095962-05:00","dependencies":[{"issue_id":"oaks-b83","depends_on_id":"oaks-1i8","type":"blocks","created_at":"2025-12-16T10:45:30.257993-05:00","created_by":"daemon"}]}
{"id":"oaks-koo8","title":"web-edit: Create SpeciesEditForm component","description":"Create web/src/lib/components/SpeciesEditForm.svelte:\n\n**Core fields:**\n- scientific_name (text input, required)\n- author (text input)\n- is_hybrid (checkbox)\n- conservation_status (dropdown: LC, NT, VU, EN, CR, EW, EX, DD, NE)\n\n**Taxonomy fields (using TaxonSelect):**\n- subgenus (dropdown)\n- section (autocomplete)\n- subsection (autocomplete)\n- complex (autocomplete)\n\n**Array fields (using TagInput):**\n- synonyms\n- subspecies_varieties\n- hybrids\n- closely_related_to\n\n**Hybrid parent fields (when is_hybrid=true):**\n- parent1 (species autocomplete)\n- parent2 (species autocomplete)\n\n**Form behavior:**\n- Pre-fill from existing species (edit mode)\n- Empty for new species (create mode)\n- Validate required fields client-side\n- Call toApiFormat before submit\n- Show inline validation errors\n- Unsaved changes warning on close","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T18:58:28.400939-05:00","updated_at":"2025-12-31T12:04:20.824071-05:00","closed_at":"2025-12-31T12:04:20.824071-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-koo8","depends_on_id":"oaks-d1d3","type":"blocks","created_at":"2025-12-30T18:58:43.090763-05:00","created_by":"daemon"},{"issue_id":"oaks-koo8","depends_on_id":"oaks-v3qw","type":"blocks","created_at":"2025-12-30T18:58:43.126844-05:00","created_by":"daemon"},{"issue_id":"oaks-koo8","depends_on_id":"oaks-ujn7","type":"blocks","created_at":"2025-12-30T19:02:11.912124-05:00","created_by":"daemon"},{"issue_id":"oaks-koo8","depends_on_id":"oaks-2d63","type":"blocks","created_at":"2025-12-30T18:58:43.019228-05:00","created_by":"daemon"},{"issue_id":"oaks-koo8","depends_on_id":"oaks-7k7w","type":"blocks","created_at":"2025-12-30T18:58:43.055185-05:00","created_by":"daemon"}]}
{"id":"oaks-djd6","title":"Rethink search: expand content coverage and improve performance","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-01T20:34:59.151981-05:00","updated_at":"2026-01-01T20:34:59.151981-05:00","created_by":"jeff"}
{"id":"oaks-j46k","title":"cli-Add tests for CLI/API split","description":"Test coverage for new CLI client and profile features.\n\nSee: openspec/changes/refactor-cli-api-split/tasks.md Section 7\n\nTasks:\n- Ensure all existing API tests pass in new location\n- Add CLI client tests with mock server\n- Add profile configuration tests\n- Add version compatibility tests\n- Integration test: CLI → API → Database round-trip","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T13:22:48.093552-05:00","updated_at":"2025-12-30T15:59:11.32106-05:00","closed_at":"2025-12-30T15:59:11.32106-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-j46k","depends_on_id":"oaks-hecy","type":"blocks","created_at":"2025-12-30T14:06:38.880483-05:00","created_by":"daemon"},{"issue_id":"oaks-j46k","depends_on_id":"oaks-v2fg","type":"blocks","created_at":"2025-12-30T14:06:38.926505-05:00","created_by":"daemon"}]}
{"id":"oaks-xvus","title":"web-edit: Add admin mode indicator to header","description":"Modify web/src/lib/components/Header.svelte:\n\n- Show \"Admin\" badge/indicator when isAuthenticated is true\n- Link to /settings page\n- Visual distinction (icon, colored badge, etc.)\n- Tooltip: \"Editing enabled. Click to manage settings.\"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T18:55:46.609195-05:00","updated_at":"2025-12-31T11:52:50.256506-05:00","closed_at":"2025-12-31T11:52:50.256506-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-xvus","depends_on_id":"oaks-ipzv","type":"blocks","created_at":"2025-12-30T18:56:07.111103-05:00","created_by":"daemon"}]}
{"id":"oaks-8vb","title":"Add CLI command to remove items from array fields","description":"The import-bulk command can add items to array fields (hybrids, synonyms, closely_related_to, subspecies_varieties) but there's no way to remove items. Need a command like 'oak remove-from-array \u003cspecies\u003e --field=hybrids --value=saulei' or similar. Use case: cleaning up OOTW typo names from hybrids arrays (e.g., removing 'saulei' now that we have correct 'saulii').","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-15T21:36:37.086647-05:00","updated_at":"2025-12-15T21:41:04.967592-05:00","closed_at":"2025-12-15T21:41:04.967592-05:00"}
{"id":"oaks-vhk2","title":"web-edit: Add 'Add Source Data' for new source records","description":"Enable adding data from a new source to an existing species:\n\n**Use case:**\n- Species \"alba\" has data from Sources 1 and 2\n- User wants to add personal notes (Source 3)\n- Click \"Add Source Data\" → select source → fill form → save\n\n**UI:**\n- \"Add Source Data\" button in species detail (when canEdit)\n- Opens source selector dropdown\n- Only show sources not already present for this species\n- After selection, open SpeciesSourceEditForm for new source\n- Call createSpeciesSource(speciesName, sourceId, data)\n\n**Validation:**\n- Prevent adding duplicate source for same species","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T18:59:10.144726-05:00","updated_at":"2025-12-31T12:18:51.161183-05:00","closed_at":"2025-12-31T12:18:51.161183-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-vhk2","depends_on_id":"oaks-metl","type":"blocks","created_at":"2025-12-30T18:59:20.478995-05:00","created_by":"daemon"},{"issue_id":"oaks-vhk2","depends_on_id":"oaks-9r8n","type":"blocks","created_at":"2025-12-30T18:59:20.51218-05:00","created_by":"daemon"}]}
{"id":"oaks-eth7","title":"web-editing: Add Web Editing with API Key Auth","description":"Enable CRUD operations for species, taxa, and sources from the browser with API key authentication. See openspec/changes/add-web-editing/ for full design.\n\n**Scope:**\n- API key auth with localStorage persistence\n- Species CRUD (including per-source data editing)\n- Taxa CRUD\n- Sources CRUD\n- Offline handling (editing disabled when offline)\n- Data refresh after edits\n\n**Non-Goals:**\n- Multi-user support\n- OAuth/role-based access\n- Offline queuing of edits\n\n**Estimated effort:** 10-12 days\n\n---\n\n## Work Structure (5 Layers with Dependencies)\n\n### Layer 1: Foundation (Ready to Start - No Blockers)\nThese can all be worked on **in parallel**:\n\n| ID | Title | Type |\n|----|-------|------|\n| oaks-p0ma | Fix synonym search for string array format | bug |\n| oaks-cifv | Add toApiFormat mapping functions | task |\n| oaks-ipzv | Create authStore with key persistence | task |\n| oaks-2d63 | Create EditModal component | task |\n| oaks-7k7w | Create FormField component | task |\n| oaks-d1d3 | Create TagInput component for array fields | task |\n| oaks-p7sc | Create DeleteConfirmDialog component | task |\n| oaks-v3qw | Create TaxonSelect component | task |\n| oaks-tpq9 | Create LoadingSpinner component | task |\n| oaks-utut | Create Toast notification component | task |\n\n### Layer 2: Infrastructure (Blocked by Layer 1)\n| ID | Title | Blocked By |\n|----|-------|------------|\n| oaks-9z6s | Create settings page | authStore |\n| oaks-xvus | Add admin indicator to header | authStore |\n| oaks-d66k | Handle 401 responses globally | authStore |\n| oaks-81fv | Add canEdit store + connectivity | authStore |\n| oaks-9r8n | Add fetchApiAuthenticated + write methods | authStore |\n| oaks-ujn7 | Design scrollable modal with sections | EditModal |\n\n### Layer 3: Features (Blocked by Layer 2)\n| Section | Beads |\n|---------|-------|\n| **Species Editing** | oaks-9n4n, oaks-koo8, oaks-rkr4, oaks-30ot, oaks-w75d |\n| **Species-Source Editing** | oaks-hoyx, oaks-metl, oaks-vhk2, oaks-fszu |\n| **Taxa Editing** | oaks-pvxf, oaks-ux10, oaks-r2tn, oaks-8dk9 |\n| **Sources Editing** | oaks-qxov, oaks-68l2, oaks-cml1, oaks-jc6e |\n\n### Layer 4: Integration \u0026 Polish\n| ID | Title |\n|----|-------|\n| oaks-mi2t | Implement full data refresh after writes |\n| oaks-4v56 | Add session timeout for API key |\n| oaks-om2g | Add input sanitization and length limits |\n| oaks-2ac6 | Add unsaved changes warning |\n| oaks-awpj | Add keyboard accessibility |\n| oaks-pqh2 | Add ARIA labels and focus management |\n\n### Layer 5: Testing \u0026 Documentation\n| ID | Title |\n|----|-------|\n| oaks-q6gt | End-to-end testing for all CRUD operations |\n| oaks-yhyi | Test auth flow and session management |\n| oaks-pmyp | Test mobile responsiveness of edit forms |\n| oaks-p93e | Update web/CLAUDE.md with editing docs |\n| oaks-vtpw | Document delete cascade behavior |\n\n---\n\n## Parallelization Opportunities\n\n**Maximum parallel work in Layer 1**: 10 beads can be done simultaneously\n- Data model fixes (2 beads)\n- Auth infrastructure (1 bead)\n- UI components (7 beads)\n\n**After Layer 1 completes**, Layer 2's 6 beads can run in parallel.\n\n**In Layer 3**, all 4 feature sections (Species, Species-Source, Taxa, Sources) can be worked in parallel once their shared dependencies are met.\n\nUse `bd ready | grep web-edit` to see which beads are currently unblocked.","status":"closed","priority":2,"issue_type":"epic","created_at":"2025-12-30T18:55:17.425032-05:00","updated_at":"2026-01-03T12:34:12.167213-05:00","closed_at":"2026-01-03T12:34:12.167213-05:00","created_by":"jeff"}
{"id":"oaks-pqi","title":"Add unit tests for CLI","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T19:16:00.441775-05:00","updated_at":"2025-12-23T18:12:52.693821-05:00","closed_at":"2025-12-23T18:12:52.693821-05:00"}
{"id":"oaks-iv64","title":"cli: Prevent oak commands from creating db in wrong directory","description":"## Problem\n\nClaude sessions sometimes run `oak` commands from the project root instead of `cli/`, which creates an empty `oak_compendium.db` in the wrong location. The authoritative database is `cli/oak_compendium.db`.\n\nThis has happened multiple times despite CLAUDE.md stating: 'Always run oak commands from the cli/ directory'.\n\n## Potential Solutions\n\n1. **CLI guard**: Have `oak` refuse to create a new database unless:\n   - An explicit `-d` path is provided, OR\n   - A new `oak init` command is used\n   \n2. **CLI warning**: If no db exists in CWD, warn and require confirmation\n\n3. **Look for project markers**: If the CLI detects it's in a directory with `.beads/` or other project markers but no db, it could warn that it might be in the wrong directory\n\n## Evidence\n\nEmpty db found at root on 2025-12-29, likely from a previous Claude session.","status":"open","priority":2,"issue_type":"bug","created_at":"2025-12-29T11:56:19.874498-05:00","updated_at":"2025-12-29T11:56:35.067807-05:00","created_by":"jeff"}
{"id":"oaks-7lh","title":"TaxonView shows wrong level label for subsections","description":"When viewing any subsection detail page (e.g., /taxonomy/Cerris/Cerris/Cerris/), the page header shows 'Complex Q.' instead of the correct 'Subsection [name]'.\n\nThis affects ALL subsections, not just Cerris. The issue only occurs on the subsection detail page itself, not in the parent taxonomy tree.\n\nThe getTaxonLevelLabel() function in TaxonView.svelte maps path depth to level names:\n- depth 1 = Subgenus\n- depth 2 = Section  \n- depth 3 = Subsection\n- depth 4 = Complex\n\nThe template has special handling for complexes that prepends 'Q.' - this logic is incorrectly triggering for subsections:\n\n```svelte\n{#if taxonLevel === 'complex'}Q. {/if}{taxonName}\n```\n\nLikely the taxonLevel variable is being set to 'complex' when it should be 'subsection' at depth 3.\n\nFile: web/src/lib/components/TaxonView.svelte","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-17T16:41:22.669663-05:00","updated_at":"2025-12-19T15:45:20.426203-05:00","closed_at":"2025-12-19T15:45:20.426203-05:00"}
{"id":"oaks-bjg","title":"Clean up corrupted quercus_data.json from bad import","description":"The root quercus_data.json was corrupted during an Oaks of the World import (commit 26d9502). Contains 987 species with 134 duplicates (entries exist both as 'name' and '× name').\n\n**Root cause:** Import was done without proper duplicate/conflict resolution strategy.\n\n**Current state:**\n- Root quercus_data.json: 987 species, 134 duplicates (corrupted)\n- Initial commit (685802b): 673 species, 0 duplicates (clean)\n- web/public/quercus_data.json: 682 species, 0 duplicates (modified working copy, appears clean)\n\n**Needs:**\n1. Define proper merge/conflict strategy for data imports\n2. Clean up the root data file\n3. Ensure IndexedDB gets fresh data (fix version check bug in db.js)\n4. Re-run import with proper strategy if needed","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-15T17:00:00.696661-05:00","updated_at":"2025-12-15T17:28:59.513224-05:00","closed_at":"2025-12-15T17:28:59.513224-05:00"}
{"id":"oaks-cpw","title":"Enhance search to include sources","description":"Update search to match on source name/author. Add result type differentiation (species vs source) with visual indicators and ranking logic.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T10:53:42.580898-05:00","updated_at":"2025-12-21T15:15:01.808657-05:00","closed_at":"2025-12-21T15:15:01.808657-05:00","dependencies":[{"issue_id":"oaks-cpw","depends_on_id":"oaks-b14","type":"blocks","created_at":"2025-12-21T10:53:53.923525-05:00","created_by":"daemon"}]}
{"id":"oaks-97p","title":"Design CLI import workflow for scraper output","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T14:13:35.288907-05:00","updated_at":"2025-12-23T18:47:00.480503-05:00","closed_at":"2025-12-23T18:47:00.480503-05:00","dependencies":[{"issue_id":"oaks-97p","depends_on_id":"oaks-1hy","type":"blocks","created_at":"2025-12-14T14:13:53.374944-05:00","created_by":"daemon"}]}
{"id":"oaks-3v1","title":"Audit documentation for DB schema conformance","description":"Review all documentation (CLAUDE.md, web/CLAUDE.md, README.md, AGENTS.md) to ensure they accurately reflect:\n- Current database schema (oak_entries, taxa, sources, species_sources tables)\n- Correct table/column names\n- Current data flow architecture\n- Any outdated references to old schema designs","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T17:08:14.228667-05:00","updated_at":"2025-12-15T17:25:11.459314-05:00","closed_at":"2025-12-15T17:25:11.459314-05:00"}
{"id":"oaks-nq6","title":"Consolidate temp files into single tmp/ directory","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T11:11:10.635162-05:00","updated_at":"2025-12-15T11:22:42.86675-05:00","closed_at":"2025-12-15T11:22:42.86675-05:00"}
{"id":"oaks-hdur","title":"api: Parser core types (ParseResult, Infraspecific)","description":"Create api/internal/parser/parser.go with core types.\n\n## Implementation\n\n1. Create package at `api/internal/parser/`\n2. Define core types:\n   ```go\n   type ParseResult struct {\n       Genus         string          // \"Quercus\" or \"Q.\"\n       Species       string          // The specific epithet\n       IsHybrid      bool            // true if × or x present\n       Infraspecific *Infraspecific  // nil if not present\n       Author        string          // empty if not present\n       Raw           string          // Original matched text\n       Start         int             // Position in source text\n       End           int             // End position\n   }\n\n   type Infraspecific struct {\n       Rank    string  // \"subsp.\", \"var.\", \"subvar.\", \"f.\", \"subf.\"\n       Epithet string\n   }\n   ```\n3. Define composable regex pattern constants (named, testable components):\n   ```go\n   var (\n       genusPattern   = `(?:Quercus|Q\\.)`\n       hybridPattern  = `[×xX]`\n       epithetPattern = `[a-z]+(?:-[a-z]+)?`\n       rankPattern    = `(?i:subsp|ssp|subspecies|var|varietas|variety|...)`\n   )\n   ```\n4. Create parser_test.go with tests for pattern matching\n\n## Design Notes\n- Grammar is REGULAR (no recursion needed)\n- Use composable patterns, not monolithic regex\n- Each pattern should be separately testable\n- See gnparser (github.com/gnames/gnparser) for reference\n\n## Reference\n- openspec/changes/add-species-name-parser/design.md\n- cli/docs/infraspecific-ranks.md for rank research\n\nBlocks (1):\n  ← oaks-ixue: api: Parser grammar (ParseSpecies function) [P1 - open]","status":"tombstone","priority":1,"issue_type":"task","created_at":"2026-01-02T14:03:32.403143-05:00","updated_at":"2026-01-02T14:41:21.994457-05:00","created_by":"jeff","deleted_at":"2026-01-02T14:41:21.994457-05:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"oaks-pt4","title":"Add view toggle to App.svelte","description":"Integrate tree view into app routing and navigation.\n\n**Changes to App.svelte:**\n1. Import TaxonomyTree component\n2. Add browseMode state: 'list' | 'taxonomy'\n3. Add toggle buttons in header (list icon / tree icon)\n4. Update routing: view = 'list' | 'taxonomy' | 'detail'\n5. Use effectiveView = $searchQuery ? 'list' : view (auto-switch to list when searching)\n6. Update history state to include fromView for back navigation\n\n**Toggle button icons:**\n- List: horizontal lines (grid icon)\n- Tree: hierarchical/outline icon\n\n**Search behavior:**\n- When searchQuery is non-empty, show list view\n- When search cleared, return to previous browseMode\n\n**File:** web/src/App.svelte\n\n**Testing checklist (verify after implementation):**\n- [ ] Tree renders all subgenera with correct counts\n- [ ] Expand/collapse works at all levels\n- [ ] Species without subsection shown under section\n- [ ] 'Unknown' subgenus appears last\n- [ ] Click species → detail view\n- [ ] Browser back → returns to tree\n- [ ] Search → auto-switch to list\n- [ ] Clear search → return to tree\n- [ ] View toggle buttons work","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T11:55:21.431402-05:00","updated_at":"2025-12-15T12:06:52.714474-05:00","closed_at":"2025-12-15T12:06:52.714474-05:00","dependencies":[{"issue_id":"oaks-pt4","depends_on_id":"oaks-jqj","type":"blocks","created_at":"2025-12-15T11:55:27.331107-05:00","created_by":"daemon"}]}
{"id":"oaks-26qm.1","title":"api: Operations \u0026 Security","description":"Backup system, security review, and operational concerns.\n\n## Backup System\n- POST /api/v1/backup - manual trigger (auth required, 1/min rate limit)\n- Daily automatic backup at 3 AM UTC via in-process goroutine\n- Upload to S3-compatible storage (provider TBD)\n- Retention: 30 daily, 12 monthly\n- Restore documentation\n\n## Security Review Checklist\n- [ ] All write endpoints require authentication\n- [ ] SQL injection prevented (parameterized queries)\n- [ ] Input validation on all endpoints\n- [ ] CORS configured for oakcompendium.org/com only\n- [ ] API keys not logged\n- [ ] Rate limiting effective\n- [ ] govulncheck passes\n\n## Monitoring\n- Fly.io built-in metrics dashboard\n- Structured JSON logs via slog\n- Request ID tracing\n\n## Storage Provider Evaluation (TODO)\nEvaluate before implementation:\n- Backblaze B2: 10GB free, $0.005/GB, S3-compatible\n- Cloudflare R2: 10GB free, no egress fees\n- AWS S3: Industry standard, complex pricing","status":"closed","priority":2,"issue_type":"epic","created_at":"2025-12-29T17:22:57.460373-05:00","updated_at":"2025-12-30T12:56:27.928984-05:00","closed_at":"2025-12-30T12:56:27.928984-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-26qm.1","depends_on_id":"oaks-26qm","type":"parent-child","created_at":"2025-12-29T17:22:57.46322-05:00","created_by":"daemon"},{"issue_id":"oaks-26qm.1","depends_on_id":"oaks-26qm.4","type":"blocks","created_at":"2025-12-29T17:26:34.183408-05:00","created_by":"daemon"}]}
{"id":"oaks-s9j","title":"Manage focus on route changes (SPA)","description":"When navigating between views in the SPA, focus should move to new content or a heading. Announce route changes to screen readers. Prevent focus from getting lost.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T21:47:58.527407-05:00","updated_at":"2025-12-23T19:01:57.997574-05:00","closed_at":"2025-12-23T19:01:57.997574-05:00"}
{"id":"oaks-s4lg","title":"web: Articles display (list, view, tags)","description":"Add articles section to web app.\n\nComponents:\n1. ArticleList.svelte - displays article list with tag filtering\n2. ArticleView.svelte - single article display with MarkdownRenderer\n3. Add /articles route\n4. Add /articles/:slug route\n5. Add articles link to navigation\n6. Add articles section to landing page\n\nAPI client:\n- fetchArticles(tag?: string): Promise\u003cArticle[]\u003e\n- fetchArticle(slug: string): Promise\u003cArticle\u003e\n- fetchArticleTags(): Promise\u003cstring[]\u003e\n\nUX:\n- Articles show title, date, tags\n- Click tag to filter\n- Published articles only (unless authenticated)\n\nPart of: Content Expansion (Phase 2: Reference Articles)\nSpec: openspec/changes/add-content-expansion/specs/reference-articles/spec.md","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-02T13:52:40.68774-05:00","updated_at":"2026-01-02T13:52:40.68774-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-s4lg","depends_on_id":"oaks-j28k","type":"blocks","created_at":"2026-01-02T13:53:39.243138-05:00","created_by":"daemon"},{"issue_id":"oaks-s4lg","depends_on_id":"oaks-szyx","type":"blocks","created_at":"2026-01-02T13:53:40.166716-05:00","created_by":"daemon"}]}
{"id":"oaks-qinn","title":"api-security: Implement authentication and security","description":"Secure the API for single-user access.\n\n## Authentication\n- API key authentication (simple, sufficient for single user)\n- Key passed in header: X-API-Key\n- Key stored as environment variable\n\n## Transport Security\n- HTTPS/TLS (Let's Encrypt or hosting platform provides)\n- HSTS headers\n\n## Input Validation\n- Validate all input before DB operations\n- Sanitize strings\n- Reject malformed requests\n\n## Other\n- Rate limiting (optional, nice to have)\n- CORS configuration for web client\n- Security headers (CSP, X-Frame-Options, etc.)","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-29T16:25:36.99363-05:00","updated_at":"2025-12-29T17:16:03.784054-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-qinn","depends_on_id":"oaks-t41l","type":"blocks","created_at":"2025-12-29T16:25:48.844005-05:00","created_by":"daemon"}],"deleted_at":"2025-12-29T17:16:03.784054-05:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"oaks-9z6s","title":"web-edit: Create settings page with API key management","description":"Create web/src/routes/settings/+page.svelte with:\n\n**API Key Management:**\n- Input field for API key (password type, toggle visibility)\n- \"Save\" button that validates key via `GET /api/v1/auth/verify`\n- Error display for invalid keys\n- \"Clear API Key\" / Logout button\n\n**Session Settings:**\n- Session timeout display/configuration (24h default)\n\n**Security Information:**\n- Note about key storage in localStorage\n- Link to documentation","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T18:55:46.444366-05:00","updated_at":"2025-12-31T11:54:02.796783-05:00","closed_at":"2025-12-31T11:54:02.796783-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-9z6s","depends_on_id":"oaks-ipzv","type":"blocks","created_at":"2025-12-30T18:56:07.076692-05:00","created_by":"daemon"}]}
{"id":"oaks-qxov","title":"web-edit: Add Edit/Delete buttons to sources list","description":"Modify sources list page to enable editing:\n\n**Current behavior:**\n- Sources list shows all data sources (iNaturalist, Oaks of the World, etc.)\n- Each source displays name, type, description, URL\n\n**Add edit controls:**\n- Edit button (pencil) for each source row\n- Delete button (trash) for each source row\n- Both visible only when canEdit is true\n\n**Button behavior:**\n- Edit: opens SourceEditForm modal\n- Delete: opens DeleteConfirmDialog with constraint check","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T19:00:12.38915-05:00","updated_at":"2025-12-31T13:07:12.066851-05:00","closed_at":"2025-12-31T13:07:12.066851-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-qxov","depends_on_id":"oaks-81fv","type":"blocks","created_at":"2025-12-30T19:00:20.682133-05:00","created_by":"daemon"}]}
{"id":"oaks-3sq","title":"Search doesn't work when viewing species detail page","description":"When navigating to a species detail page, the search input in the header doesn't function. Typing in the search box has no effect because the search results are not visible - the detail view is displayed instead of the species list. Need to either: (1) navigate back to the list view when search is activated, or (2) show search results in an overlay/dropdown.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-15T18:19:44.122711-05:00","updated_at":"2025-12-15T20:42:09.929321-05:00","closed_at":"2025-12-15T20:42:09.929321-05:00"}
{"id":"oaks-2f7","title":"Update scraper to output schema-compatible format","description":"Modify scraper to output JSON matching export_schema.json, or create transformation script. Schema is defined in cli/schema/export_schema.json.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T16:46:09.246499-05:00","updated_at":"2025-12-14T20:23:23.242505-05:00","closed_at":"2025-12-14T20:23:23.242505-05:00","dependencies":[{"issue_id":"oaks-2f7","depends_on_id":"oaks-1hy","type":"blocks","created_at":"2025-12-14T16:51:25.213896-05:00","created_by":"daemon"}]}
{"id":"oaks-dhm","title":"Update documentation with Bear workflow","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-19T14:04:39.232475-05:00","updated_at":"2025-12-19T14:07:39.853994-05:00","closed_at":"2025-12-19T14:07:39.853994-05:00"}
{"id":"oaks-c6s","title":"Fix hybrid naming inconsistencies in species data","description":"Hybrid names have inconsistencies - e.g., Q. alba's hybrids list shows names that don't match our DB naming convention (with × prefix). Need to audit and normalize hybrid name references across the data.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-15T18:18:04.551924-05:00","updated_at":"2025-12-17T15:32:44.97178-05:00","closed_at":"2025-12-17T15:32:44.97178-05:00"}
{"id":"oaks-ipmg","title":"rust-parser: Compose parse_species function","description":"Compose all grammar components into the main parse_species function.\n\n## Tasks\n- [ ] Create `parse_species(input: \u0026str) -\u003e Option\u003cParseResult\u003e` function\n- [ ] Compose parsers in order: genus, space?, hybrid?, space?, epithet, infraspecific?, author?\n- [ ] Populate all ParseResult fields including raw, start, end positions\n- [ ] Handle partial matches gracefully (return what we can parse)\n- [ ] Write integration tests matching ALL scenarios from spec:\n  - Full names: Quercus alba\n  - Abbreviated: Q. alba, Q.alba\n  - Hybrids: ×bebbiana, xbebbiana, Xbebbiana, × bebbiana\n  - Infraspecific: all rank types\n  - Authors: all citation patterns\n  - Combinations: Q. alba var. latiloba (L.) Pers.\n\n## Acceptance Criteria\n- All scenarios from openspec/changes/add-wasm-species-linker/specs/species-linker/spec.md pass\n- Partial results returned for recoverable cases\n- nil/None for complete non-matches (no error)\n\n## Reference\n- openspec/changes/add-species-name-parser/specs/species-name-parser/spec.md (test scenarios)","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-02T14:53:05.983479-05:00","updated_at":"2026-01-02T14:53:05.983479-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-ipmg","depends_on_id":"oaks-3hbq","type":"blocks","created_at":"2026-01-02T14:53:16.84555-05:00","created_by":"daemon"}]}
{"id":"oaks-7040","title":"iOS: Speech dictation","description":"Implement SpeechService with SFSpeechRecognizer. Build DictationModal with live transcription. Add permission request flow.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T16:05:55.776455-05:00","updated_at":"2025-12-27T17:36:35.977857-05:00","closed_at":"2025-12-27T17:36:35.977857-05:00","dependencies":[{"issue_id":"oaks-7040","depends_on_id":"oaks-3y5u","type":"blocks","created_at":"2025-12-27T16:06:04.958588-05:00","created_by":"daemon"}]}
{"id":"oaks-xb5","title":"Implement map component","description":"Create a reusable map component (Leaflet or MapLibre) that can highlight arbitrary administrative regions. Should load boundary data efficiently and support zoom/pan.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-16T10:45:14.596084-05:00","updated_at":"2025-12-16T10:45:14.596084-05:00","dependencies":[{"issue_id":"oaks-xb5","depends_on_id":"oaks-koq","type":"blocks","created_at":"2025-12-16T10:45:30.027136-05:00","created_by":"daemon"}]}
{"id":"oaks-ipa","title":"Remove OOTW typo names from hybrids arrays","description":"Remove the following OOTW typo hybrid names from species hybrids arrays:\n\nTYPOS TO REMOVE (OOTW name -\u003e correct DB name):\n- palaelithicola -\u003e palaeolithicola\n- shuettei -\u003e schuettei\n- demarei -\u003e demareei\n- macdanielli -\u003e macdanielii\n- bernardensis -\u003e bernardiensis\n- saulei -\u003e saulii\n\nSPECIES TO UPDATE:\n- alba: remove 'saulei'\n- bicolor: remove 'shuettei'\n- ellipsoidalis: remove 'palaelithicola'\n- macrocarpa: remove 'macdanielli', 'shuettei'\n- montana: remove 'saulei', 'bernardensis'\n- nigra: remove 'demarei'\n- robur: remove 'macdanielli'\n- stellata: remove 'bernardensis'\n- velutina: remove 'demarei', 'palaelithicola'\n\nTotal: 9 species, 12 removals","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T21:37:31.45806-05:00","updated_at":"2025-12-15T21:42:33.494573-05:00","closed_at":"2025-12-15T21:42:33.494573-05:00","dependencies":[{"issue_id":"oaks-ipa","depends_on_id":"oaks-8vb","type":"blocks","created_at":"2025-12-15T21:37:37.831109-05:00","created_by":"daemon"}]}
{"id":"oaks-p5o","title":"Test SvelteKit migration and fix issues","description":"Comprehensive testing of migrated app:\n- Test all routes and navigation\n- Test browser back/forward\n- Test deep linking (direct URL access)\n- Test search functionality\n- Test PWA installation and offline mode\n- Test GitHub Pages deployment\n- Fix any issues found","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T15:24:43.404418-05:00","updated_at":"2025-12-17T16:27:46.550226-05:00","closed_at":"2025-12-17T16:27:46.550226-05:00","dependencies":[{"issue_id":"oaks-p5o","depends_on_id":"oaks-niv","type":"blocks","created_at":"2025-12-17T15:25:01.209958-05:00","created_by":"daemon"},{"issue_id":"oaks-p5o","depends_on_id":"oaks-9yx","type":"blocks","created_at":"2025-12-17T15:25:01.363383-05:00","created_by":"daemon"},{"issue_id":"oaks-p5o","depends_on_id":"oaks-vzk","type":"blocks","created_at":"2025-12-17T15:25:01.240507-05:00","created_by":"daemon"},{"issue_id":"oaks-p5o","depends_on_id":"oaks-yzn","type":"blocks","created_at":"2025-12-17T15:25:01.332675-05:00","created_by":"daemon"},{"issue_id":"oaks-p5o","depends_on_id":"oaks-9et","type":"blocks","created_at":"2025-12-17T15:25:01.425799-05:00","created_by":"daemon"},{"issue_id":"oaks-p5o","depends_on_id":"oaks-6m2","type":"blocks","created_at":"2025-12-17T15:25:01.302479-05:00","created_by":"daemon"},{"issue_id":"oaks-p5o","depends_on_id":"oaks-p89","type":"blocks","created_at":"2025-12-17T15:25:01.393459-05:00","created_by":"daemon"},{"issue_id":"oaks-p5o","depends_on_id":"oaks-fb8","type":"blocks","created_at":"2025-12-17T15:25:01.271311-05:00","created_by":"daemon"}]}
{"id":"oaks-26qm.3.5","title":"api: Implement species-sources endpoints","description":"Create CRUD endpoints for species_sources table.\n\n## File: cli/internal/api/handlers/species_sources.go\n\n## Endpoints\nGET    /api/v1/species/:name/sources            - List sources for species\nGET    /api/v1/species/:name/sources/:sourceId  - Get specific\nPOST   /api/v1/species/:name/sources            - Add (auth required)\nPUT    /api/v1/species/:name/sources/:sourceId  - Update (auth required)\nDELETE /api/v1/species/:name/sources/:sourceId  - Delete (auth required)\n\n## Request Body\n```json\n{\n  \"source_id\": 3,\n  \"local_names\": [\"white oak\", \"eastern white oak\"],\n  \"range\": \"Eastern North America\",\n  \"growth_habit\": \"Large deciduous tree to 30m\",\n  \"leaves\": \"5-9 rounded lobes...\",\n  \"flowers\": \"...\",\n  \"fruits\": \"Acorn with shallow cup...\",\n  \"bark\": \"Light gray, scaly\",\n  \"twigs\": \"...\",\n  \"buds\": \"Clustered at tips\",\n  \"hardiness_habitat\": \"...\",\n  \"miscellaneous\": \"...\",\n  \"url\": \"https://...\",\n  \"is_preferred\": true\n}\n```\n\n## Validation\n- Parent species must exist (404 if not)\n- source_id must reference valid source\n- Unique constraint: (scientific_name, source_id)\n\n## Notes\n- Nested resource under species\n- Ordered by is_preferred DESC, source_id","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T17:25:37.92479-05:00","updated_at":"2025-12-30T11:17:59.170439-05:00","closed_at":"2025-12-30T11:17:59.170439-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-26qm.3.5","depends_on_id":"oaks-26qm.3","type":"parent-child","created_at":"2025-12-29T17:25:37.925296-05:00","created_by":"daemon"},{"issue_id":"oaks-26qm.3.5","depends_on_id":"oaks-26qm.3.2","type":"blocks","created_at":"2025-12-29T17:27:08.842433-05:00","created_by":"daemon"},{"issue_id":"oaks-26qm.3.5","depends_on_id":"oaks-26qm.3.4","type":"blocks","created_at":"2025-12-29T17:27:08.876004-05:00","created_by":"daemon"}]}
{"id":"oaks-81fv","title":"web-edit: Add canEdit derived store and connectivity handling","description":"Create connectivity management for edit operations:\n\n**canEdit derived store:**\n```javascript\nexport const canEdit = derived(\n  [isAuthenticated, isOnline, apiAvailable],\n  ([$auth, $online, $api]) =\u003e $auth \u0026\u0026 $online \u0026\u0026 $api\n);\n```\n\n**API health check:**\n- Check `GET /health` every 60 seconds when page visible\n- 3 second timeout (fail fast)\n- Debounce if check already in flight\n- Pause when tab hidden (Visibility API)\n- Update `apiAvailable` store on success/failure\n\n**UI integration:**\n- Hide/disable edit buttons when canEdit is false\n- Add tooltips explaining why (\"Not authenticated\", \"Offline\", \"API unavailable\")\n- Handle connection loss mid-edit (disable submit, preserve form)\n- Re-enable on connection restore","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T18:57:03.443694-05:00","updated_at":"2025-12-31T11:59:56.128669-05:00","closed_at":"2025-12-31T11:59:56.128669-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-81fv","depends_on_id":"oaks-ipzv","type":"blocks","created_at":"2025-12-30T18:57:48.929656-05:00","created_by":"daemon"}]}
{"id":"oaks-xwmt","title":"cli-Cleanup after CLI/API split","description":"Final cleanup and verification.\n\nSee: openspec/changes/refactor-cli-api-split/tasks.md Section 9\n\nTasks:\n- Remove old cli/Dockerfile\n- Verify no dead code remains\n- Run go mod tidy in both modules\n- Final verification of all tests passing","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T13:22:48.464476-05:00","updated_at":"2025-12-31T10:44:11.074188-05:00","closed_at":"2025-12-31T10:44:11.074188-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-xwmt","depends_on_id":"oaks-j46k","type":"blocks","created_at":"2025-12-30T14:06:53.434574-05:00","created_by":"daemon"},{"issue_id":"oaks-xwmt","depends_on_id":"oaks-fol8","type":"blocks","created_at":"2025-12-30T14:06:53.478453-05:00","created_by":"daemon"}]}
{"id":"oaks-xzc7","title":"iOS: iCloud export","description":"Implement MarkdownService matching Bear format. CloudExportService with UIDocumentPicker. Export confirmation and tracking.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-27T16:05:56.222799-05:00","updated_at":"2025-12-27T16:05:56.222799-05:00","dependencies":[{"issue_id":"oaks-xzc7","depends_on_id":"oaks-07sg","type":"blocks","created_at":"2025-12-27T16:06:05.168872-05:00","created_by":"daemon"}]}
{"id":"oaks-16zq","title":"Update documentation for consolidated architecture","description":"**Spec Reference:** openspec/changes/consolidate-db-code/tasks.md Section 7\n\nUpdate documentation to reflect new CLI/API architecture.\n\n**Tasks:**\n- [ ] Update CLAUDE.md architecture diagram (CLI↔API relationship)\n- [ ] Update CLI README with embedded vs remote mode docs\n- [ ] Remove references to cli/internal/db package where applicable\n- [ ] Add examples for --local and --profile usage","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-30T17:04:20.287242-05:00","updated_at":"2025-12-30T18:15:38.901565-05:00","closed_at":"2025-12-30T18:15:38.901565-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-16zq","depends_on_id":"oaks-ub3s","type":"blocks","created_at":"2025-12-30T17:04:37.744177-05:00","created_by":"daemon"}]}
{"id":"oaks-yzn","title":"Convert TaxonView to SvelteKit dynamic route","description":"Convert TaxonView to SvelteKit dynamic route\n\nDONE:\n- Created src/routes/taxonomy/[...path]/+page.svelte\n\nTODO:\n- Update TaxonView.svelte imports (./dataStore.js -\u003e $lib/stores/dataStore.js)\n- Remove onSelectSpecies, onNavigateToTaxon, onGoHome props\n- Convert breadcrumb buttons to \u003ca\u003e links\n- Convert sub-taxon buttons to \u003ca\u003e links  \n- Convert species buttons to \u003ca\u003e links\n- Add text-decoration: none to link styles","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T15:24:42.559001-05:00","updated_at":"2025-12-17T16:17:32.252027-05:00","closed_at":"2025-12-17T16:17:32.252027-05:00","dependencies":[{"issue_id":"oaks-yzn","depends_on_id":"oaks-bfk","type":"blocks","created_at":"2025-12-17T15:25:00.558629-05:00","created_by":"daemon"}]}
{"id":"oaks-yh14","title":"cli-Extract API server to standalone binary","description":"Move API server code from cli/ to new api/ module.\n\nSee: openspec/changes/refactor-cli-api-split/tasks.md Section 2\nSee: openspec/changes/refactor-cli-api-split/specs/api-server/spec.md\n\nTasks:\n- Create api/main.go with server startup\n- Move cli/internal/api/ to api/internal/handlers/\n- Move/copy cli/internal/db/ to api/internal/db/\n- Move/copy cli/internal/models/ to shared location\n- Create api/internal/export/ for export functionality\n- Update all import paths in moved files\n- Add version info to health endpoint response\n- Create api/Makefile (build, lint, test, clean, docker-build)\n- Verify API server builds","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T13:22:20.885168-05:00","updated_at":"2025-12-30T15:05:35.214466-05:00","closed_at":"2025-12-30T15:05:35.214466-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-yh14","depends_on_id":"oaks-q8of","type":"blocks","created_at":"2025-12-30T13:26:18.958692-05:00","created_by":"daemon"}]}
{"id":"oaks-26qm.4.4","title":"api: Seed production database","description":"Copy database to Fly.io volume.\n\n## Method 1: Interactive SFTP (Recommended)\n```bash\n# Start interactive SFTP session\nfly ssh sftp shell\n\n# In SFTP session:\nput cli/oak_compendium.db /data/oak_compendium.db\nexit\n```\n\n## Method 2: Direct put command\n```bash\nfly ssh sftp put cli/oak_compendium.db /data/oak_compendium.db\n```\n\n## Method 3: Using cat pipe (fallback)\n```bash\ncat cli/oak_compendium.db | fly ssh console -C \"cat \u003e /data/oak_compendium.db\"\n```\n\n## Verification\n```bash\nfly ssh console -C \"sqlite3 /data/oak_compendium.db 'SELECT COUNT(*) FROM oak_entries'\"\n```\n\nExpected output: ~670 (species count)\n\n## Notes\n- Only needed once for initial setup\n- Future updates via API or CLI export/import\n- Database file is ~5MB\n- See: https://fly.io/docs/flyctl/ssh-sftp/","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T17:26:04.157917-05:00","updated_at":"2025-12-30T11:38:44.322788-05:00","closed_at":"2025-12-30T11:38:44.322788-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-26qm.4.4","depends_on_id":"oaks-26qm.4","type":"parent-child","created_at":"2025-12-29T17:26:04.158464-05:00","created_by":"daemon"},{"issue_id":"oaks-26qm.4.4","depends_on_id":"oaks-26qm.4.3","type":"blocks","created_at":"2025-12-29T17:28:01.071124-05:00","created_by":"daemon"}]}
{"id":"oaks-07sg","title":"iOS: Note editor view","description":"Build NoteEditorView with field buttons. FieldButtonGrid triggering dictation. Species name input, hybrid toggle. Auto-save on changes.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T16:05:56.001542-05:00","updated_at":"2025-12-29T16:01:51.472095-05:00","closed_at":"2025-12-29T16:01:51.472095-05:00","dependencies":[{"issue_id":"oaks-07sg","depends_on_id":"oaks-7040","type":"blocks","created_at":"2025-12-27T16:06:05.064472-05:00","created_by":"daemon"}]}
{"id":"oaks-qwjb","title":"web-css-badges: Add badge/pill utility classes","description":"## Goal\nConsolidate the 6+ badge/pill variations into a base utility with modifiers.\n\n## Current State\nMultiple badge patterns:\n- `.pill-tag` (SpeciesDetail)\n- `.conservation-badge` (SpeciesDetail)\n- `.preferred-badge` (SpeciesDetail, SourceComparison)\n- `.license-badge` (SourceDetail)\n- `.primary-badge` (LandingPage)\n- `.coming-soon-badge` (LandingPage)\n- `.species-level` / `.taxon-level` (SpeciesDetail, TaxonView)\n\nCommon patterns:\n- border-radius: 9999px\n- small padding\n- small font-size\n- font-weight: 500-600\n\n## Implementation\n1. Add to app.css:\n```css\n@layer components {\n  .badge {\n    display: inline-flex;\n    align-items: center;\n    padding: 0.25rem 0.625rem;\n    border-radius: 9999px;\n    font-size: 0.75rem;\n    font-weight: 500;\n  }\n  \n  .badge-sm {\n    padding: 0.125rem 0.5rem;\n    font-size: 0.6875rem;\n  }\n  \n  .badge-forest {\n    background-color: var(--color-forest-200);\n    color: var(--color-forest-700);\n  }\n  \n  .badge-muted {\n    background-color: var(--color-stone-100);\n    color: var(--color-text-secondary);\n  }\n  \n  .badge-uppercase {\n    text-transform: uppercase;\n    letter-spacing: 0.05em;\n    font-weight: 600;\n  }\n}\n```\n\n2. Update components to compose: `class=\"badge badge-sm badge-forest badge-uppercase\"`\n\n## Estimated Savings\n~50 lines of CSS","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-29T11:07:33.082899-05:00","updated_at":"2025-12-29T11:34:39.501584-05:00","closed_at":"2025-12-29T11:34:39.501584-05:00","created_by":"jeff"}
{"id":"oaks-26qm.4.1","title":"api: Create Dockerfile","description":"Create multi-stage Dockerfile for the API server.\n\n## File: cli/Dockerfile\n\n## Multi-stage Build\n```dockerfile\n# Build stage\nFROM golang:1.23-alpine AS builder\nRUN apk add --no-cache gcc musl-dev\nWORKDIR /app\nCOPY go.mod go.sum ./\nRUN go mod download\nCOPY . .\nRUN CGO_ENABLED=1 go build -o oak .\n\n# Runtime stage\nFROM alpine:3.19\nRUN apk add --no-cache ca-certificates sqlite\nWORKDIR /app\nCOPY --from=builder /app/oak /app/oak\nEXPOSE 8080\nCMD [\"/app/oak\", \"serve\", \"--host\", \"0.0.0.0\"]\n```\n\n## Notes\n- Go 1.23 matches go.mod version\n- CGO required for go-sqlite3\n- Alpine for small image size\n- Include ca-certificates for HTTPS\n- sqlite package for backup command\n\n## Build Test\n```bash\ndocker build -t oak-api -f cli/Dockerfile cli/\ndocker run -p 8080:8080 -v $(pwd)/cli/oak_compendium.db:/data/oak_compendium.db oak-api\n```","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T17:25:59.312047-05:00","updated_at":"2025-12-30T11:01:12.065266-05:00","closed_at":"2025-12-30T11:01:12.065266-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-26qm.4.1","depends_on_id":"oaks-26qm.4","type":"parent-child","created_at":"2025-12-29T17:25:59.314179-05:00","created_by":"daemon"}]}
{"id":"oaks-nff","title":"Figure out site deployment strategy","status":"closed","priority":2,"issue_type":"epic","created_at":"2025-12-16T10:38:36.150523-05:00","updated_at":"2025-12-19T16:21:08.117039-05:00","closed_at":"2025-12-19T16:21:08.117039-05:00","dependencies":[{"issue_id":"oaks-nff","depends_on_id":"oaks-cws","type":"blocks","created_at":"2025-12-16T12:16:27.051022-05:00","created_by":"daemon"},{"issue_id":"oaks-nff","depends_on_id":"oaks-rrg","type":"blocks","created_at":"2025-12-16T12:16:27.081973-05:00","created_by":"daemon"},{"issue_id":"oaks-nff","depends_on_id":"oaks-dbq","type":"blocks","created_at":"2025-12-16T12:16:27.112829-05:00","created_by":"daemon"},{"issue_id":"oaks-nff","depends_on_id":"oaks-k7h","type":"blocks","created_at":"2025-12-16T12:16:26.957399-05:00","created_by":"daemon"},{"issue_id":"oaks-nff","depends_on_id":"oaks-0mo","type":"blocks","created_at":"2025-12-16T12:16:26.988276-05:00","created_by":"daemon"},{"issue_id":"oaks-nff","depends_on_id":"oaks-4qf","type":"blocks","created_at":"2025-12-16T12:16:27.020441-05:00","created_by":"daemon"}]}
{"id":"oaks-jhat","title":"iOS: Core data models","description":"Implement SpeciesNote, NoteField, TaxonomyPath models. Implement StorageService for local JSON persistence.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T16:05:55.346975-05:00","updated_at":"2025-12-27T16:42:12.259127-05:00","closed_at":"2025-12-27T16:42:12.259127-05:00","dependencies":[{"issue_id":"oaks-jhat","depends_on_id":"oaks-frzg","type":"blocks","created_at":"2025-12-27T16:06:04.755402-05:00","created_by":"daemon"}]}
{"id":"oaks-oan7","title":"Fix silent error swallowing in Go db.go","description":"Critical: ~15 instances of json.Unmarshal errors silently ignored. Also LastInsertId errors swallowed (line 700). Data corruption fails silently. Pattern: json.Unmarshal(...) with no error check. Fix: Capture and return/log all unmarshal errors.","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-12-27T14:48:08.335648-05:00","updated_at":"2025-12-27T15:58:08.672956-05:00","closed_at":"2025-12-27T15:58:08.672956-05:00"}
{"id":"oaks-t1o","title":"Sort external links by title and add better icons","description":"UI improvements for external links section on species detail page:\n\n1. Sort external links alphabetically by title/name\n2. Add recognizable icons/logos for known sources:\n   - FNA (Flora of North America)\n   - FEIS (Fire Effects Information System)\n   - Wikipedia\n   - iNaturalist\n   \nCurrently links display in insertion order with no icons.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-23T21:08:22.175386-05:00","updated_at":"2025-12-23T21:13:55.436619-05:00","closed_at":"2025-12-23T21:13:55.436619-05:00"}
{"id":"oaks-lbk","title":"Design data model for species-region associations","description":"Design schema for linking species to geographic regions at varying granularity (country → state → county). Consider how to reference external boundary data and handle multi-region species.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-16T10:45:14.254623-05:00","updated_at":"2025-12-16T10:45:14.254623-05:00","dependencies":[{"issue_id":"oaks-lbk","depends_on_id":"oaks-koq","type":"blocks","created_at":"2025-12-16T10:45:29.963867-05:00","created_by":"daemon"}]}
{"id":"oaks-d88","title":"Research and requirements for ID tool","description":"Gather requirements for the oak identification tool through a PM-style interview with the user. Understand user goals, target audience, key features, and success criteria before design work begins.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-21T10:48:37.402876-05:00","updated_at":"2025-12-21T10:48:37.402876-05:00"}
{"id":"oaks-vq2","title":"Add source attribution display with name and external link","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T15:17:31.973053-05:00","updated_at":"2025-12-15T16:22:41.32394-05:00","closed_at":"2025-12-15T16:22:41.32394-05:00"}
{"id":"oaks-26qm.2.2","title":"api: Implement Server struct","description":"Create the core API server struct with lifecycle methods.\n\n## File: cli/internal/api/server.go\n\n## Implementation\n```go\ntype Server struct {\n    router     chi.Router\n    db         *db.Database\n    httpServer *http.Server\n    apiKey     string\n    logger     *slog.Logger\n}\n\nfunc New(db *db.Database, apiKey string, logger *slog.Logger) *Server\nfunc (s *Server) Start(addr string) error\nfunc (s *Server) Shutdown(ctx context.Context) error\n```\n\n## Features\n- Graceful shutdown with context timeout\n- Router setup with middleware chain\n- Health check routes (no auth)\n- API v1 routes (with appropriate auth)\n\n## Tests\n- Server starts and responds to health check\n- Graceful shutdown completes pending requests","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T17:25:34.830903-05:00","updated_at":"2025-12-29T19:54:41.208681-05:00","closed_at":"2025-12-29T19:54:41.208681-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-26qm.2.2","depends_on_id":"oaks-26qm.2","type":"parent-child","created_at":"2025-12-29T17:25:34.831405-05:00","created_by":"daemon"},{"issue_id":"oaks-26qm.2.2","depends_on_id":"oaks-26qm.2.1","type":"blocks","created_at":"2025-12-29T17:26:58.228027-05:00","created_by":"daemon"}]}
{"id":"oaks-ktcn","title":"cli: Refactor runNoteList to reduce cognitive complexity (45→20)","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-29T20:43:14.087859-05:00","updated_at":"2025-12-29T20:43:14.087859-05:00","created_by":"jeff"}
{"id":"oaks-rwz0","title":"api: Taxa schema migration (notes→content)","description":"Rename taxa table 'notes' column to 'content' and add 'content_updated_at' timestamp.\n\nImplementation:\n- SQLite requires table rebuild (notes column currently unused - 0 rows have data)\n- Add content_updated_at TEXT column\n- Update taxa model in api/internal/models/\n- Write migration script if needed\n\nSchema change:\n```sql\nALTER TABLE taxa RENAME TO taxa_old;\nCREATE TABLE taxa (\n    name TEXT NOT NULL,\n    level TEXT NOT NULL CHECK(level IN ('subgenus','section','subsection','complex')),\n    parent TEXT,\n    author TEXT,\n    content TEXT,              -- renamed from 'notes'\n    content_updated_at TEXT,   -- new\n    links TEXT,\n    PRIMARY KEY (name, level)\n);\nINSERT INTO taxa SELECT name,level,parent,author,notes,NULL,links FROM taxa_old;\nDROP TABLE taxa_old;\n```\n\nPart of: Content Expansion (Phase 1: Taxa Content)\nSpec: openspec/changes/add-content-expansion/specs/taxa-content/spec.md","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-02T13:52:11.628906-05:00","updated_at":"2026-01-02T13:52:11.628906-05:00","created_by":"jeff"}
{"id":"oaks-t4v","title":"Taxa list tree doesn't show section-level complexes","description":"The 'oak taxa list' command displays a hierarchical tree but only shows complexes nested under subsections. Complexes whose parent is a section (like 'ilex' under section Ilex, 'robur' under section Quercus) don't appear in the tree output. The data is correctly stored in the database, it's just a display issue in cli/cmd/taxa.go runTaxaList().","status":"closed","priority":3,"issue_type":"bug","created_at":"2025-12-15T10:15:31.763178-05:00","updated_at":"2025-12-15T10:55:57.171316-05:00","closed_at":"2025-12-15T10:55:57.171316-05:00"}
{"id":"oaks-26qm.1.1","title":"api: Implement backup system","description":"Create database backup functionality.\n\n## Files\n- cli/internal/api/backup.go\n- cli/internal/api/handlers/backup.go\n\n## Endpoint\nPOST /api/v1/backup - Trigger manual backup (auth required)\n\nResponse:\n```json\n{\n  \"filename\": \"oak_compendium_2025-01-15_103000.db\",\n  \"size_bytes\": 5242880,\n  \"timestamp\": \"2025-01-15T10:30:00Z\",\n  \"storage\": \"s3://bucket/backups/...\"\n}\n```\n\n## Automatic Backup\n- Run daily at 3 AM UTC\n- In-process goroutine (no external scheduler)\n- Use time.AfterFunc or ticker\n\n## Backup Process\n1. SQLite backup command: .backup /tmp/backup.db\n2. Compress with gzip\n3. Upload to S3-compatible storage\n4. Log success/failure\n\n## S3 Client\nUse aws-sdk-go-v2 with custom endpoint for B2/R2/S3 compatibility\n\n## Rate Limit\n- 1 backup per minute per IP\n- Prevent abuse of expensive operation\n\n## Storage Provider\n**DECISION NEEDED** - Evaluate before implementing:\n- Backblaze B2: Cheap, S3-compatible\n- Cloudflare R2: No egress fees, S3-compatible\n- AWS S3: Standard, more expensive\n- Other alternatives\n\nWill be configured via environment:\n- BACKUP_S3_ENDPOINT\n- BACKUP_S3_BUCKET\n- BACKUP_S3_ACCESS_KEY\n- BACKUP_S3_SECRET_KEY","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T17:25:29.047967-05:00","updated_at":"2025-12-30T12:56:27.786575-05:00","closed_at":"2025-12-30T12:56:27.786575-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-26qm.1.1","depends_on_id":"oaks-26qm.1","type":"parent-child","created_at":"2025-12-29T17:25:29.048528-05:00","created_by":"daemon"},{"issue_id":"oaks-26qm.1.1","depends_on_id":"oaks-26qm.4.4","type":"blocks","created_at":"2025-12-29T17:28:13.764861-05:00","created_by":"daemon"}]}
{"id":"oaks-61hc","title":"web: Display backlinks on species pages","description":"Show content that references the current species.\n\nImplementation:\n1. Add fetchBacklinks(speciesName) to API client\n2. Create SpeciesBacklinks.svelte component\n3. Add backlinks section to SpeciesDetail page\n4. Handle empty backlinks gracefully (hide section)\n\nUX:\n- Section labeled 'Referenced In' or 'See Also'\n- Each backlink shows type icon + title\n- Backlinks are clickable, navigate to source\n\nDisplay:\n- Taxa: 'Section Quercus' (links to taxon page)\n- Articles: 'How to Document an Oak' (links to article)\n\nPart of: Content Expansion (Phase 3: Species Auto-Linking)\nSpec: openspec/changes/add-content-expansion/specs/species-linking/spec.md","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-02T13:53:02.535593-05:00","updated_at":"2026-01-02T13:53:02.535593-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-61hc","depends_on_id":"oaks-s96y","type":"blocks","created_at":"2026-01-02T13:53:46.735688-05:00","created_by":"daemon"}]}
{"id":"oaks-2qm","title":"Implement SQLite to JSON export in CLI","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-14T14:13:35.130144-05:00","updated_at":"2025-12-15T11:01:46.837299-05:00","closed_at":"2025-12-15T11:01:46.837299-05:00","dependencies":[{"issue_id":"oaks-2qm","depends_on_id":"oaks-e85","type":"blocks","created_at":"2025-12-14T14:13:53.508283-05:00","created_by":"daemon"},{"issue_id":"oaks-2qm","depends_on_id":"oaks-e9p","type":"blocks","created_at":"2025-12-14T14:13:53.638805-05:00","created_by":"daemon"}]}
{"id":"oaks-vvm6","title":"web: Add make targets for regression testing","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T11:24:00.042261-05:00","updated_at":"2026-01-02T15:00:39.586757-05:00","closed_at":"2026-01-02T15:00:39.586757-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-vvm6","depends_on_id":"oaks-qefu","type":"blocks","created_at":"2026-01-02T11:24:09.631051-05:00","created_by":"daemon"},{"issue_id":"oaks-vvm6","depends_on_id":"oaks-luqy","type":"blocks","created_at":"2026-01-02T11:24:09.759201-05:00","created_by":"daemon"}]}
{"id":"oaks-piru","title":"Add CLI oak import-notes command","description":"CLI command to import markdown notes from iCloud folder.\n\n## Usage\n```bash\noak import-notes ~/Library/Mobile\\ Documents/com~apple~CloudDocs/OakNotes/\noak import-notes --dry-run  # preview what would be imported\n```\n\n## Behavior\n1. Scan directory for .md files\n2. Parse markdown (H1 = species, H2 = fields)\n3. Match species to existing entries\n4. Upsert into species_sources with source_id=3 (personal)\n5. Move processed files to 'imported/' subfolder\n\n## Edge Cases\n- Species not found in database\n- Partial entries (some fields only)\n- Duplicate imports (already processed)\n- Invalid markdown format","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-27T15:41:04.544435-05:00","updated_at":"2025-12-27T15:41:04.544435-05:00","dependencies":[{"issue_id":"oaks-piru","depends_on_id":"oaks-cpe8","type":"blocks","created_at":"2025-12-27T15:41:12.49572-05:00","created_by":"daemon"}]}
{"id":"oaks-s6p","title":"Species comparison tool for identification","description":"Compare multiple species side-by-side to help with field identification. Show key distinguishing features (leaf shape, acorn characteristics, bark, etc.) across selected species. Useful when you've narrowed an ID to 2-3 candidates and need to differentiate.","status":"open","priority":3,"issue_type":"epic","created_at":"2025-12-23T19:18:47.234805-05:00","updated_at":"2025-12-23T19:18:55.233976-05:00"}
{"id":"oaks-w973","title":"api-server: Build CRUD API for Oak Compendium","description":"Build a CRUD API server to serve as the central data access point for all clients (iOS app, web app, CLI).\n\n## Goals\n- Single source of truth with proper API access\n- Enable iOS app to read full species data and write notes\n- Potentially migrate web app from static JSON to live API\n- Simple, secure, maintainable\n\n## Decision\nAfter evaluating iCloud sync options, a simple CRUD API is less complex and more flexible than bidirectional iCloud sync.\n\n## Key Components\n1. API specification and design\n2. Server implementation (Go, reuse existing DB layer)\n3. Security (auth, TLS, input validation)\n4. Deployment and hosting\n5. iOS app integration\n6. Web app evaluation/migration\n7. Data flow documentation\n8. Testing\n\n## Non-Goals (for now)\n- Multi-user support\n- Complex auth (OAuth, social login)\n- Real-time/WebSocket updates","status":"tombstone","priority":1,"issue_type":"epic","created_at":"2025-12-29T16:25:03.318307-05:00","updated_at":"2025-12-29T17:16:03.781318-05:00","created_by":"jeff","deleted_at":"2025-12-29T17:16:03.781318-05:00","deleted_by":"daemon","delete_reason":"delete","original_type":"epic"}
{"id":"oaks-vzk","title":"Convert AboutPage to SvelteKit route","description":"Convert AboutPage.svelte to routes/about/+page.svelte:\n- Add svelte:head with 'About - Quercus Compendium' title\n- Straightforward conversion, minimal changes needed","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T15:24:41.950502-05:00","updated_at":"2025-12-17T16:08:34.66754-05:00","closed_at":"2025-12-17T16:08:34.66754-05:00","dependencies":[{"issue_id":"oaks-vzk","depends_on_id":"oaks-bfk","type":"blocks","created_at":"2025-12-17T15:25:00.089554-05:00","created_by":"daemon"}]}
{"id":"oaks-v3qw","title":"web-edit: Create TaxonSelect component","description":"Create web/src/lib/components/TaxonSelect.svelte:\n\n**Subgenus (dropdown):**\n- Fixed values: Quercus, Cerris, Cyclobalanopsis\n- Simple \u003cselect\u003e element\n\n**Section/Subsection/Complex (autocomplete):**\n- Text input with suggestions dropdown\n- Populate suggestions from /api/v1/taxa filtered by level\n- Allow custom values (API validates)\n- Show \"No matches\" when empty\n- Clear button\n\n**Props:**\n- level: 'subgenus' | 'section' | 'subsection' | 'complex'\n- value: string\n- onChange: (value: string) =\u003e void\n- parentTaxon?: string (for filtering sections within subgenus)\n\n**Accessibility:**\n- Combobox pattern for autocomplete\n- aria-expanded, aria-activedescendant\n- Arrow key navigation","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T18:57:49.819985-05:00","updated_at":"2025-12-31T11:07:28.230057-05:00","closed_at":"2025-12-31T11:07:28.230057-05:00","created_by":"jeff"}
{"id":"oaks-x3vk","title":"API: Add bidirectional parent-child relationship for hybrids","description":"The CLI's SaveOakEntry now maintains bidirectional parent-child relationships (commit c128e94), but the API has duplicated db code that lacks this fix. When editing a hybrid via the API and setting parent1/parent2, the parent species' hybrids lists are not updated. Ideally the CLI and API should share a common db package to avoid this duplication.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-30T16:52:03.081678-05:00","updated_at":"2025-12-30T17:09:14.360543-05:00","closed_at":"2025-12-30T17:09:14.360543-05:00","created_by":"jeff"}
{"id":"oaks-w46a","title":"WASM Species Parser","description":"Rust parser for oak species names, compiled to WASM.\n\nImplements the `add-wasm-species-linker` OpenSpec proposal (parser portion only, browser integration deferred).\n\n## Scope\n- Rust crate with nom parser combinators\n- Parse all ICN-compliant oak species name forms\n- Text scanning with skip regions (code blocks, links, URLs)\n- WASM build with wasm-pack\n- CI workflow for Rust/WASM\n\n## Out of Scope (Deferred)\n- Browser integration (web/src/lib/speciesLinker.js)\n- Markdown rendering integration\n- Backlinks\n- iOS integration\n\n## Reference\n- openspec/changes/add-wasm-species-linker/\n- cli/docs/infraspecific-ranks.md\n- Existing Rust reference: github.com/jeffdc/gallformers/usda_plants/src/plant.rs","status":"open","priority":1,"issue_type":"epic","created_at":"2026-01-02T14:51:36.139007-05:00","updated_at":"2026-01-02T14:51:36.139007-05:00","created_by":"jeff"}
{"id":"oaks-26qm.4.2","title":"api: Create fly.toml configuration","description":"Create Fly.io deployment configuration.\n\n## File: fly.toml (project root)\n\n## Configuration\n```toml\napp = \"oak-compendium-api\"\nprimary_region = \"sjc\"\n\n[build]\n  dockerfile = \"cli/Dockerfile\"\n\n[env]\n  OAK_DB_PATH = \"/data/oak_compendium.db\"\n  OAK_ENV = \"production\"\n\n[http_service]\n  internal_port = 8080\n  force_https = true\n  auto_stop_machines = false\n  auto_start_machines = true\n  min_machines_running = 1\n\n  [http_service.concurrency]\n    type = \"requests\"\n    hard_limit = 250\n    soft_limit = 200\n\n[[mounts]]\n  source = \"oak_data\"\n  destination = \"/data\"\n\n[[vm]]\n  cpu_kind = \"shared\"\n  cpus = 1\n  memory_mb = 256\n```\n\n## Key Decisions\n- auto_stop_machines = false: Keep responsive, avoid cold starts\n- min_machines_running = 1: Always have one instance\n- sjc region: Close to California\n- 256MB RAM: Sufficient for SQLite workload","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T17:25:59.465134-05:00","updated_at":"2025-12-30T10:59:13.36668-05:00","closed_at":"2025-12-30T10:59:13.36668-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-26qm.4.2","depends_on_id":"oaks-26qm.4","type":"parent-child","created_at":"2025-12-29T17:25:59.465658-05:00","created_by":"daemon"}]}
{"id":"oaks-huej","title":"web-css-taxonomy-nav: Extract shared taxonomy navigation styles","description":"## Goal\nExtract the duplicated taxonomy navigation styles shared by SpeciesDetail and TaxonView.\n\n## Current State\nExact duplicates in both components (~50 lines each):\n- `.taxonomy-nav`\n- `.taxonomy-label`\n- `.taxonomy-link`\n- `.taxonomy-name`\n- `.taxonomy-level-label`\n- `.taxonomy-separator`\n\n## Implementation Options\n\n**Option A: CSS Partial**\nCreate `src/lib/styles/taxonomy-nav.css` and import in both components.\n\n**Option B: Global Utility**\nAdd to app.css if used widely enough.\n\n## Recommended: Option A\nSince this is only used by 2 components and is a cohesive pattern, a CSS partial is cleaner.\n\n```css\n/* src/lib/styles/taxonomy-nav.css */\n.taxonomy-nav {\n  display: flex;\n  align-items: baseline;\n  flex-wrap: wrap;\n  gap: 0.5rem;\n  font-size: 0.875rem;\n}\n/* ... rest of styles */\n```\n\nThen in components:\n```svelte\n\u003cstyle\u003e\n  @import '$lib/styles/taxonomy-nav.css';\n  /* component-specific styles */\n\u003c/style\u003e\n```\n\n## Estimated Savings\n~50 lines of CSS","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T11:07:57.936544-05:00","updated_at":"2025-12-29T11:30:16.806114-05:00","closed_at":"2025-12-29T11:30:16.806114-05:00","created_by":"jeff"}
{"id":"oaks-pvxf","title":"web-edit: Add Edit/Delete buttons to TaxonView","description":"Modify taxonomy browser to enable editing:\n\n**Add buttons to each taxon in tree/list:**\n- Edit button (pencil icon)\n- Delete button (trash icon)\n- Both visible only when canEdit is true\n\n**Button behavior:**\n- Edit: opens TaxonEditForm modal\n- Delete: opens DeleteConfirmDialog\n\n**Placement:**\n- Inline with taxon name\n- Hidden by default, show on hover (desktop)\n- Always visible when canEdit (mobile)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T18:59:43.09027-05:00","updated_at":"2025-12-31T12:19:50.615373-05:00","closed_at":"2025-12-31T12:19:50.615373-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-pvxf","depends_on_id":"oaks-81fv","type":"blocks","created_at":"2025-12-30T18:59:50.957417-05:00","created_by":"daemon"}]}
{"id":"oaks-gptj","title":"Migrate CLI read commands to use API client","description":"**Spec Reference:** openspec/changes/consolidate-db-code/tasks.md Section 4\n\nUpdate read commands to use HTTP client instead of direct db access.\n\n**Commands to migrate:**\n- [ ] oak find - search via GET with query params\n- [ ] oak export - fetch export via GET /api/v1/export\n- [ ] oak source list/show - fetch sources via GET\n- [ ] oak taxa list/show - fetch taxa via GET\n- [ ] Other read-only commands\n\n**Notes:**\n- Can be done in parallel with write command migration\n- Preserve existing output formats","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T17:03:59.698342-05:00","updated_at":"2025-12-30T17:40:07.556026-05:00","closed_at":"2025-12-30T17:40:07.556026-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-gptj","depends_on_id":"oaks-p7dq","type":"blocks","created_at":"2025-12-30T17:04:37.196731-05:00","created_by":"daemon"},{"issue_id":"oaks-gptj","depends_on_id":"oaks-4271","type":"blocks","created_at":"2025-12-30T17:04:37.230491-05:00","created_by":"daemon"}]}
{"id":"oaks-q7i","title":"Add visible focus indicators to all interactive elements","description":"Ensure all buttons, links, and form controls have clear, visible focus indicators that meet WCAG 2.1 AA contrast requirements. Remove outline:none without replacement.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T21:47:41.752217-05:00","updated_at":"2025-12-23T18:59:59.527329-05:00","closed_at":"2025-12-23T18:59:59.527329-05:00"}
{"id":"oaks-bfk","title":"Create SvelteKit layout with Header","description":"Create +layout.svelte with shared UI:\n- Move Header component into layout\n- Add UpdatePrompt component\n- Set up main container with existing styling\n- Import app.css\n- Slot for page content","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T15:24:41.562942-05:00","updated_at":"2025-12-17T16:06:45.826531-05:00","closed_at":"2025-12-17T16:06:45.826531-05:00","dependencies":[{"issue_id":"oaks-bfk","depends_on_id":"oaks-5v8","type":"blocks","created_at":"2025-12-17T15:24:59.790952-05:00","created_by":"daemon"}]}
{"id":"oaks-jqj","title":"Create TaxonomyTree.svelte component","description":"New component with expand/collapse tree UI.\n\n**Visual hierarchy:**\n```\n▶ Subgenus Quercus (274)          [bold, serif, forest-800]\n  ▶ Section Lobatae (123)         [medium weight, forest-700]\n    ▶ Subsection Phellos (13)     [italic, secondary color]\n      ▶ Complex shumardii (11)    [italic, lighter weight]\n        × hybrida                 [species, clickable]\n        species1\n    species-without-subsection    [shown directly under section]\n```\n\n**Key features:**\n- Subscribe to `taxonomyTree` derived store\n- Local expansion state (not global store) - resets on view change\n- Nested rendering: subgenus → section → subsection → complex → species\n- Expand icons: ▶ collapsed, ▼ expanded\n- Counts in parentheses at each level\n- Species without subsection shown directly under section (no empty grouping)\n- Species without complex shown directly under subsection\n- Click handlers: toggle expand or navigate to species detail (calls onSelectSpecies)\n- Styling matches existing components (CSS variables, card style)\n\n**Species styling:**\n- Italic name\n- × prefix for hybrids\n- Hover highlight (forest-100 background)\n\n**Props:**\n- onSelectSpecies: callback function\n\n**File:** web/src/lib/TaxonomyTree.svelte (new)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T11:55:21.269983-05:00","updated_at":"2025-12-15T12:05:18.536733-05:00","closed_at":"2025-12-15T12:05:18.536733-05:00","dependencies":[{"issue_id":"oaks-jqj","depends_on_id":"oaks-22c","type":"blocks","created_at":"2025-12-15T11:55:27.299482-05:00","created_by":"daemon"}]}
{"id":"oaks-e85","title":"Define unified data schema across all components","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-14T14:13:34.662127-05:00","updated_at":"2025-12-14T16:22:17.663379-05:00","closed_at":"2025-12-14T16:22:17.663379-05:00"}
{"id":"oaks-cz5v","title":"cli: Refactor NewSource to reduce cognitive complexity (30→20)","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-29T20:43:14.578587-05:00","updated_at":"2025-12-29T20:43:14.578587-05:00","created_by":"jeff"}
{"id":"oaks-8qs","title":"Add ARIA labels and roles where needed","description":"Add appropriate ARIA attributes: aria-label for icon buttons, aria-expanded for expandable sections, aria-current for navigation, role attributes for custom widgets. Ensure screen readers announce UI state changes.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T21:47:42.104266-05:00","updated_at":"2025-12-23T18:59:59.528297-05:00","closed_at":"2025-12-23T18:59:59.528297-05:00"}
{"id":"oaks-f4j4","title":"web-css-cards: Add card base and interactive utilities","description":"## Goal\nAdd `.card-base` and `.card-interactive` utility classes to consolidate card/section patterns.\n\n## Current State\nSimilar card patterns repeated across:\n- `.detail-section` (SpeciesDetail)\n- `.sub-taxa-section`, `.species-section` (TaxonView)\n- `.metadata-section` (SourceDetail)\n- `.featured-card`, `.browse-card` (LandingPage)\n- `.results-list` (SearchResults)\n\nCommon patterns:\n- background-color: var(--color-surface)\n- border: 1px solid var(--color-border)\n- border-radius: 0.5-0.75rem\n- box-shadow: var(--shadow-sm)\n\n## Implementation\n1. Add to app.css:\n```css\n@layer components {\n  .card-base {\n    background-color: var(--color-surface);\n    border: 1px solid var(--color-border);\n    border-radius: 0.75rem;\n    box-shadow: var(--shadow-sm);\n  }\n  \n  .card-interactive {\n    transition: all 0.15s ease;\n    cursor: pointer;\n  }\n  .card-interactive:hover {\n    border-color: var(--color-forest-400);\n    transform: translateY(-1px);\n    box-shadow: var(--shadow-md);\n  }\n  .card-interactive:focus-visible {\n    outline: none;\n    border-color: var(--color-forest-600);\n    box-shadow: 0 0 0 3px rgba(30, 126, 75, 0.15);\n  }\n}\n```\n\n2. Update components to use these classes, keeping only unique styles in component blocks\n\n## Estimated Savings\n~80 lines of CSS","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T11:07:32.885663-05:00","updated_at":"2025-12-29T11:28:10.837023-05:00","closed_at":"2025-12-29T11:28:10.837023-05:00","created_by":"jeff"}
{"id":"oaks-22c","title":"Add taxonomyTree derived store to dataStore.js","description":"Create derived store that transforms flat species array into nested taxonomy hierarchy.\n\n**Code pattern:**\n```javascript\nexport const taxonomyTree = derived(allSpecies, ($allSpecies) =\u003e {\n  const tree = {};\n  for (const species of $allSpecies) {\n    // Group by subgenus → section → subsection → complex\n    // Handle null values for missing intermediate levels\n  }\n  return tree;\n});\n```\n\n**Data Structure:**\n```javascript\n{\n  'Quercus': {\n    count: 274,\n    sections: {\n      'Lobatae': {\n        count: 123,\n        subsections: {\n          null: { complexes: { null: { species: [...] } } },  // no subsection\n          'Phellos': { count: 13, complexes: { ... } }\n        }\n      }\n    }\n  }\n}\n```\n\n**Key decisions:**\n- Use null keys to group species that skip intermediate levels (subsection/complex)\n- Sort subgenera with 'Unknown' last\n- Computed client-side (673 species is trivial)\n\n**File:** web/src/lib/dataStore.js (add after speciesCounts)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T11:55:21.113057-05:00","updated_at":"2025-12-15T12:04:36.367372-05:00","closed_at":"2025-12-15T12:04:36.367372-05:00"}
{"id":"oaks-q6gt","title":"web-edit: End-to-end testing for all CRUD operations","description":"Comprehensive testing of all editing flows:\n\n**Species CRUD:**\n- Create new species → verify in list\n- Edit species fields → verify changes persisted\n- Delete species → verify removed + sources cleaned\n\n**Species-Source CRUD:**\n- Edit source data for existing species\n- Add data from new source\n- Delete source data → verify other sources remain\n\n**Taxa CRUD:**\n- Create new taxon in hierarchy\n- Edit taxon fields\n- Delete taxon (verify constraint handling)\n\n**Sources CRUD:**\n- Create new source\n- Edit source metadata\n- Delete source (verify constraint handling)\n\n**Error scenarios:**\n- Invalid data (validation errors)\n- Network failure mid-edit\n- Rate limiting (429)\n- Session expiry (401)\n\n**Offline scenarios:**\n- Edit buttons disabled when offline\n- Connection loss during edit\n- Connection restore re-enables editing","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T19:01:47.155915-05:00","updated_at":"2025-12-31T13:25:58.415803-05:00","closed_at":"2025-12-31T13:25:58.415803-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-q6gt","depends_on_id":"oaks-rkr4","type":"blocks","created_at":"2025-12-30T19:01:55.517153-05:00","created_by":"daemon"},{"issue_id":"oaks-q6gt","depends_on_id":"oaks-r2tn","type":"blocks","created_at":"2025-12-30T19:01:55.553791-05:00","created_by":"daemon"},{"issue_id":"oaks-q6gt","depends_on_id":"oaks-cml1","type":"blocks","created_at":"2025-12-30T19:01:55.587687-05:00","created_by":"daemon"}]}
{"id":"oaks-ze3","title":"Script to populate external links for species","description":"Script to bulk-add external links to species entries.\n\n## URL Pattern Research\n\n| Site | Pattern | Constructable? | Notes |\n|------|---------|----------------|-------|\n| Wikipedia | https://en.wikipedia.org/wiki/Quercus_{name} | ✅ Yes | Replace spaces with _ |\n| Flora of North America | https://floranorthamerica.org/Quercus_{name} | ✅ Yes | N. American species only |\n| FEIS | https://www.fs.usda.gov/database/feis/plants/tree/que{3letters}/all.html | ⚠️ Partial | e.g. quealb for alba, limited coverage |\n| iNaturalist | https://www.inaturalist.org/taxa/{ID}-Quercus-{species} | ❌ No | Needs numeric ID lookup |\n| GBIF | https://www.gbif.org/species/{ID} | ❌ No | Needs numeric ID lookup |\n| POWO | https://powo.science.kew.org/taxon/urn:lsid:ipni.org:names/{ID} | ❌ No | Needs IPNI ID lookup |\n| USDA Plants | https://plants.usda.gov/home/plantProfile?symbol={CODE} | ❌ No | Needs symbol code lookup |\n\nSearch URL alternatives for ID-based sites:\n- iNaturalist: https://www.inaturalist.org/search?q=Quercus+{name}\n- GBIF: https://www.gbif.org/species/search?q=Quercus%20{name}\n\n## Future: Online Herbaria\n\nWould like to include links to online herbaria collections. Need to research URL patterns for:\n- JSTOR Global Plants\n- SEINet\n- iDigBio\n- Consortium of California Herbaria (CCH2)\n- Others?\n\n## Design Thinking\n\nRather than store full URLs per-species, consider:\n\n1. **External links are conceptually like sources** - online references we link to but don't extract data from\n2. **Store resource definitions separately** - name, URL pattern, coverage scope\n3. **Mark which species are in which resource** - similar to species_sources junction\n4. **Construct URLs on the fly in UI** - from pattern + species name\n\nThis approach:\n- Normalizes URL patterns (update once if site changes)\n- Cleaner species data (stores relationships, not URLs)\n- Could extend existing sources table (add url_pattern, mark as external_link type)\n\n## Simplified Approach (Current Plan)\n\nSplit into two categories:\n\n**Universal links** (always show, construct in UI - no DB needed):\n- Wikipedia, iNaturalist search\n\n**Limited-coverage links** (need per-species tracking):\n- FNA, FEIS, herbaria, etc. - only show if species is known to be in that resource\n\nStart with universal links (oaks-iji ✅ DONE), add coverage tracking infrastructure later if needed.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T11:57:08.711556-05:00","updated_at":"2025-12-23T20:45:58.233525-05:00","closed_at":"2025-12-23T20:45:58.233525-05:00"}
{"id":"oaks-ena","title":"Search only works on list view and query persists across navigation","description":"Two related search issues after SvelteKit migration:\n\n1. Search input only works when on the /list/ route. On other pages (home, taxonomy, species detail, about), typing in search does nothing - user expects to be redirected to list view with filtered results.\n\n2. Search query is persistent in the store, so after searching and navigating away, the search box still shows the query and 'X species found' text. The query should clear when navigating to a non-list page, or search should work globally.\n\nPrevious behavior (hash routing): Search from any view would auto-switch to list view with filtered results.\n\nFiles involved:\n- web/src/lib/components/Header.svelte (Search component)\n- web/src/lib/components/Search.svelte\n- web/src/lib/stores/dataStore.js (searchQuery store)","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-17T16:37:58.266853-05:00","updated_at":"2025-12-19T15:41:51.371051-05:00","closed_at":"2025-12-19T15:41:51.371051-05:00"}
{"id":"oaks-jt0","title":"Search only works on alphabetical list page","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-19T12:45:11.876844-05:00","updated_at":"2025-12-19T15:41:51.374224-05:00","closed_at":"2025-12-19T15:41:51.374224-05:00"}
{"id":"oaks-1tc","title":"Design species_sources junction table schema","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T14:51:08.635708-05:00","updated_at":"2025-12-15T14:54:00.977095-05:00","closed_at":"2025-12-15T14:54:00.977095-05:00"}
{"id":"oaks-aaf","title":"Create data migration script for existing JSON","description":"One-time migration script to transform quercus_data.json into new schema format. Populate species, sources (oaksoftheworld.fr), and species_source_data tables.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T16:46:08.740831-05:00","updated_at":"2025-12-23T18:46:46.435685-05:00","closed_at":"2025-12-23T18:46:46.435685-05:00","dependencies":[{"issue_id":"oaks-aaf","depends_on_id":"oaks-7jl","type":"blocks","created_at":"2025-12-14T16:51:25.357284-05:00","created_by":"daemon"}]}
{"id":"oaks-inc8","title":"web: Add Playwright E2E test infrastructure with API mocking","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T11:23:59.733472-05:00","updated_at":"2026-01-02T14:41:20.952991-05:00","closed_at":"2026-01-02T14:41:20.952991-05:00","created_by":"jeff"}
{"id":"oaks-q8of","title":"cli-Setup Go workspace for multi-module project","description":"Create go.work file and api/ directory structure.\n\nSee: openspec/changes/refactor-cli-api-split/tasks.md Section 1\n\nTasks:\n- Create go.work file at repository root\n- Create api/ directory structure  \n- Initialize api/go.mod\n- Update cli/go.mod to remove API dependencies\n\nThis is the foundation - must be done first.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T13:22:06.812031-05:00","updated_at":"2025-12-30T14:23:58.672291-05:00","closed_at":"2025-12-30T14:23:58.672291-05:00","created_by":"jeff"}
{"id":"oaks-updl","title":"Build Oak Notes iOS app MVP","description":"Build minimal iOS app for field-by-field species dictation.\n\n## Core Features\n1. Species list view (from local storage or manual entry)\n2. Species edit view with field buttons\n3. Tap field → dictation modal → save text\n4. Export to iCloud as markdown\n\n## Tech Stack\n- SwiftUI\n- Speech framework for dictation\n- FileManager + iCloud container for storage\n\n## MVP Scope\n- Single source assumed (personal notes)\n- No OCR (future enhancement)\n- No sync back from CLI (one-way flow)\n\n## Out of Scope for MVP\n- Species lookup/autocomplete\n- Photo attachment\n- OCR\n- Offline species database","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-27T15:40:56.18689-05:00","updated_at":"2025-12-27T15:40:56.18689-05:00","dependencies":[{"issue_id":"oaks-updl","depends_on_id":"oaks-apqj","type":"blocks","created_at":"2025-12-27T15:41:12.395315-05:00","created_by":"daemon"},{"issue_id":"oaks-updl","depends_on_id":"oaks-xk6v","type":"blocks","created_at":"2025-12-27T16:06:05.376107-05:00","created_by":"daemon"},{"issue_id":"oaks-updl","depends_on_id":"oaks-cpe8","type":"blocks","created_at":"2025-12-27T15:41:12.295243-05:00","created_by":"daemon"}]}
{"id":"oaks-frzg","title":"iOS: Xcode project setup","description":"Create Xcode project with iOS 17 target. Add project to ios/ directory in repo. Configure Info.plist with privacy descriptions for microphone and speech recognition.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T16:05:55.125585-05:00","updated_at":"2025-12-27T16:13:02.001712-05:00","closed_at":"2025-12-27T16:13:02.001712-05:00"}
{"id":"oaks-dbq","title":"Configure custom domain for GitHub Pages","description":"Optional: Set up custom domain in GitHub Pages settings, configure DNS records, and verify HTTPS works. Update Vite base path if needed.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-16T12:16:17.614592-05:00","updated_at":"2025-12-21T12:34:16.121258-05:00","closed_at":"2025-12-21T12:34:16.121258-05:00","dependencies":[{"issue_id":"oaks-dbq","depends_on_id":"oaks-rrg","type":"blocks","created_at":"2025-12-16T12:16:26.829236-05:00","created_by":"daemon"}]}
{"id":"oaks-90w","title":"Refactor data model: replace data_points with species_sources junction table","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-15T14:51:08.477016-05:00","updated_at":"2025-12-15T15:00:27.794435-05:00","closed_at":"2025-12-15T15:00:27.794435-05:00"}
{"id":"oaks-cfu","title":"Add skip-to-content link","description":"Add a skip link at the top of the page that allows keyboard users to skip navigation and go directly to main content. Should be visually hidden until focused.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T21:47:41.424261-05:00","updated_at":"2025-12-23T18:59:59.52436-05:00","closed_at":"2025-12-23T18:59:59.52436-05:00"}
{"id":"oaks-9n4n","title":"web-edit: Add Edit button to SpeciesDetail","description":"Modify web/src/lib/components/SpeciesDetail.svelte:\n\n**Add Edit button:**\n- Visible only when `canEdit` is true\n- Position: top-right of detail header (near species name)\n- Opens SpeciesEditForm modal on click\n- Tooltip when disabled: shows why (not authenticated, offline, etc.)\n\n**Also add Delete button:**\n- Red/destructive styling\n- Opens DeleteConfirmDialog on click\n- Show cascade info (number of sources that will be removed)\n\n**Subscribe to:**\n- canEdit store for visibility\n- Current species data for pre-filling form","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T18:58:28.247237-05:00","updated_at":"2025-12-31T12:01:11.045647-05:00","closed_at":"2025-12-31T12:01:11.045647-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-9n4n","depends_on_id":"oaks-81fv","type":"blocks","created_at":"2025-12-30T18:58:42.980994-05:00","created_by":"daemon"}]}
{"id":"oaks-vmwd","title":"web-css-utilities: Add section-title, loading-spinner, and misc utilities","description":"## Goal\nAdd remaining small utility classes that are repeated across components.\n\n## Patterns to Extract\n\n### Section Title\nRepeated in 5+ components:\n```css\n.section-title {\n  font-family: var(--font-serif);\n  font-size: 1.25rem;\n  font-weight: 600;\n  color: var(--color-text-primary);\n  margin-bottom: 1rem;\n}\n```\n\n### Loading Spinner\nCurrently only in SourceDetail, but should be global:\n```css\n.loading-spinner {\n  width: 2rem;\n  height: 2rem;\n  border: 3px solid var(--color-border);\n  border-top-color: var(--color-forest-600);\n  border-radius: 50%;\n  animation: spin 0.8s linear infinite;\n}\n```\n\n### Empty State\nPattern for no-results messaging:\n```css\n.empty-state {\n  text-align: center;\n  padding: 3rem 2rem;\n  color: var(--color-text-secondary);\n}\n```\n\n### Header Box (gradient header pattern)\nShared by SpeciesDetail and TaxonView:\n```css\n.header-box {\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n  padding: 1rem 1.5rem;\n  background: linear-gradient(135deg, var(--color-forest-50) 0%, var(--color-forest-100) 100%);\n  border: 1px solid var(--color-forest-200);\n  border-radius: 0.75rem;\n}\n```\n\n## Estimated Savings\n~60 lines of CSS","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-29T11:07:58.126495-05:00","updated_at":"2025-12-29T11:39:31.508433-05:00","closed_at":"2025-12-29T11:39:31.508433-05:00","created_by":"jeff"}
{"id":"oaks-wgn7","title":"api: Parser linker (LinkSpecies function)","description":"Create api/internal/parser/linker.go for replacing species with markdown links.\n\n## Implementation\n\n1. Create linker.go\n2. Define Resolver interface:\n   ```go\n   type Resolver interface {\n       Resolve(species string) (path string, exists bool)\n   }\n   ```\n3. Implement LinkSpecies(text string, resolver Resolver) string\n4. Replace matched species with markdown links: [original](/species/name)\n5. Leave unresolved species as plain text\n6. Infraspecific names link to parent species:\n   - Input: \"Q. alba var. claudei\"\n   - Output: \"[Q. alba var. claudei](/species/alba)\"\n7. Write linker_test.go with mock resolver\n\n## Tasks from OpenSpec\n- 4.1-4.6 (see openspec/changes/add-species-name-parser/tasks.md)\n\n## Tests Required\n- Species resolved to link\n- Infraspecific resolved to species link\n- Unresolved species unchanged\n- Multiple species resolved\n- Surrounding text preserved\n\n## Reference\nSee: openspec/changes/add-species-name-parser/specs/species-name-parser/spec.md","status":"tombstone","priority":1,"issue_type":"task","created_at":"2026-01-02T14:04:20.013827-05:00","updated_at":"2026-01-02T14:41:21.998323-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-wgn7","depends_on_id":"oaks-pi38","type":"blocks","created_at":"2026-01-02T14:04:46.74579-05:00","created_by":"daemon"}],"deleted_at":"2026-01-02T14:41:21.998323-05:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"oaks-pio","title":"Show other parent species in hybrid detail view","description":"When viewing a species that has hybrids (e.g., Q. alba), the hybrid list should show/link to the other parent species for each hybrid. This information appears to be lost or not displayed.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-15T18:18:04.860789-05:00","updated_at":"2025-12-15T20:48:31.832072-05:00","closed_at":"2025-12-15T20:48:31.832072-05:00"}
{"id":"oaks-ub3s","title":"Remove duplicate db code from CLI","description":"**Spec Reference:** openspec/changes/consolidate-db-code/tasks.md Section 5\n\nAfter all commands are migrated to use API client, remove the duplicated database code.\n\n**Tasks:**\n- [ ] Identify which db functions are only used by bulk commands (keep those for now)\n- [ ] Delete duplicated non-bulk functions from cli/internal/db/\n- [ ] Delete cli/internal/models/ (use types from client responses)\n- [ ] Update all CLI imports\n- [ ] Run go mod tidy\n- [ ] Verify CLI builds and tests pass\n\n**Note:** Some db code may need to remain for bulk import commands until deferred bulk endpoint work is done.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T17:04:19.981236-05:00","updated_at":"2025-12-30T17:57:04.817401-05:00","closed_at":"2025-12-30T17:57:04.817401-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-ub3s","depends_on_id":"oaks-gptj","type":"blocks","created_at":"2025-12-30T17:04:37.43257-05:00","created_by":"daemon"},{"issue_id":"oaks-ub3s","depends_on_id":"oaks-rddo","type":"blocks","created_at":"2025-12-30T17:04:37.396283-05:00","created_by":"daemon"}]}
{"id":"oaks-d1d3","title":"web-edit: Create TagInput component for array fields","description":"Create web/src/lib/components/TagInput.svelte:\n\n**Use cases:**\n- local_names: [\"white oak\", \"eastern white oak\"]\n- hybrids: [\"bebbiana\", \"fernowii\"]  \n- synonyms: [\"alba var. repanda\"]\n\n**Features:**\n- Display values as removable chips/tags\n- Text input for adding new tags\n- Enter key or comma to add\n- Click X on chip to remove\n- Paste support (split on comma/newline)\n- Duplicate prevention\n\n**Props:**\n- values: string[]\n- placeholder?: string\n- onChange: (values: string[]) =\u003e void\n\n**Accessibility:**\n- Chips as list with proper ARIA\n- Remove buttons with accessible labels\n- Focus management after add/remove","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T18:57:49.64043-05:00","updated_at":"2025-12-31T11:03:35.284931-05:00","closed_at":"2025-12-31T11:03:35.284931-05:00","created_by":"jeff"}
{"id":"oaks-7sm","title":"Source comparison tool","status":"closed","priority":2,"issue_type":"epic","created_at":"2025-12-16T10:37:50.884499-05:00","updated_at":"2025-12-23T19:37:55.540128-05:00","closed_at":"2025-12-23T19:37:55.540128-05:00","dependencies":[{"issue_id":"oaks-7sm","depends_on_id":"oaks-1i8","type":"blocks","created_at":"2025-12-16T10:45:30.695167-05:00","created_by":"daemon"},{"issue_id":"oaks-7sm","depends_on_id":"oaks-b83","type":"blocks","created_at":"2025-12-16T10:45:30.725878-05:00","created_by":"daemon"},{"issue_id":"oaks-7sm","depends_on_id":"oaks-p2o","type":"blocks","created_at":"2025-12-16T10:45:30.664995-05:00","created_by":"daemon"}]}
{"id":"oaks-9et","title":"Set up PWA for SvelteKit","description":"Configure PWA support in SvelteKit:\n- Use @vite-pwa/sveltekit or manual service worker approach\n- Migrate manifest configuration from vite.config.js\n- Configure workbox caching strategies\n- Ensure quercus_data.json is precached\n- Test offline functionality","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T15:24:43.17848-05:00","updated_at":"2025-12-17T16:19:22.835082-05:00","closed_at":"2025-12-17T16:19:22.835082-05:00","dependencies":[{"issue_id":"oaks-9et","depends_on_id":"oaks-5v8","type":"blocks","created_at":"2025-12-17T15:25:01.044157-05:00","created_by":"daemon"}]}
{"id":"oaks-2ac6","title":"web-edit: Add unsaved changes warning","description":"Prevent accidental data loss:\n\n**Triggers:**\n- Browser close/refresh (beforeunload event)\n- Click Cancel button on edit form\n- Navigate away while form is dirty\n- Click outside modal (if implemented)\n\n**Implementation:**\n```javascript\n// Track form dirty state\nlet isDirty = false;\n\n// Browser close warning\nwindow.addEventListener('beforeunload', (e) =\u003e {\n  if (isDirty) {\n    e.preventDefault();\n    e.returnValue = '';\n  }\n});\n\n// In-app navigation\nfunction handleCancel() {\n  if (isDirty \u0026\u0026 !confirm('Discard unsaved changes?')) {\n    return;\n  }\n  closeModal();\n}\n```\n\n**Form dirty detection:**\n- Compare current form state to initial state\n- Any difference = dirty","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T19:01:08.109898-05:00","updated_at":"2025-12-31T13:20:26.742475-05:00","closed_at":"2025-12-31T13:20:26.742475-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-2ac6","depends_on_id":"oaks-2d63","type":"blocks","created_at":"2025-12-30T19:01:16.59017-05:00","created_by":"daemon"}]}
{"id":"oaks-26qm.4.6","title":"api: Create GitHub Actions deployment workflow","description":"Automate deployment on push to main.\n\n## File: .github/workflows/deploy-api.yml\n\n```yaml\nname: Deploy API\n\non:\n  push:\n    branches: [main]\n    paths:\n      - 'cli/**'\n      - 'fly.toml'\n      - '.github/workflows/deploy-api.yml'\n  workflow_dispatch:\n\njobs:\n  deploy:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n      \n      - uses: superfly/flyctl-actions/setup-flyctl@master\n      \n      - run: flyctl deploy --remote-only\n        env:\n          FLY_API_TOKEN: ${{ secrets.FLY_API_TOKEN }}\n```\n\n## Setup\n1. Generate deploy token: fly tokens create deploy\n2. Add to repo secrets: Settings \u003e Secrets \u003e FLY_API_TOKEN\n\n## Trigger Conditions\n- Push to main affecting cli/ or fly.toml\n- Manual dispatch for ad-hoc deploys\n\n## Notes\n- --remote-only: Build on Fly.io (faster)\n- Consider adding health check after deploy","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T17:26:09.80141-05:00","updated_at":"2025-12-30T11:39:54.410064-05:00","closed_at":"2025-12-30T11:39:54.410064-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-26qm.4.6","depends_on_id":"oaks-26qm.4.3","type":"blocks","created_at":"2025-12-29T17:28:01.139197-05:00","created_by":"daemon"},{"issue_id":"oaks-26qm.4.6","depends_on_id":"oaks-26qm.4","type":"parent-child","created_at":"2025-12-29T17:26:09.803882-05:00","created_by":"daemon"}]}
{"id":"oaks-rpv","title":"Add WASM feature detection with JSON fallback","notes":"Obsolete - abandoned SQLite WASM approach in favor of IndexedDB","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T14:23:06.297786-05:00","updated_at":"2025-12-14T20:17:16.579411-05:00","closed_at":"2025-12-14T15:41:40.094164-05:00","dependencies":[{"issue_id":"oaks-rpv","depends_on_id":"oaks-2qj","type":"blocks","created_at":"2025-12-14T14:23:15.655693-05:00","created_by":"daemon"}]}
{"id":"oaks-y3yj","title":"Web: Remove client-side persistence","description":"Remove all client-side data storage:\n\n1. Remove dexie from package.json\n2. Delete src/lib/db.js\n3. Delete static/quercus_data.json\n4. Remove all imports of db.js\n5. Update apiClient.js:\n   - Add fetchSpeciesFull(name)\n   - Add retry logic with exponential backoff\n   - Remove fetchExport()\n   - Update error handling\n6. Simplify dataStore.js:\n   - Remove global allSpecies/allSources stores\n   - Remove loadSpeciesData(), refreshData()\n   - Remove all IndexedDB-related code\n\nSee tasks.md sections 5, 6, 7","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-31T19:56:46.105647-05:00","updated_at":"2025-12-31T19:56:46.105647-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-y3yj","depends_on_id":"oaks-4eui","type":"blocks","created_at":"2025-12-31T19:57:28.454207-05:00","created_by":"daemon"}]}
{"id":"oaks-brse","title":"Improve search filtering performance","description":"filteredSpecies derived store: O(n²) worst case - searches ALL synonyms and local_names for every keystroke. Add debounce (already have 150ms but may need more). Consider memoization or Trie for prefix matching.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-27T14:48:09.709471-05:00","updated_at":"2025-12-27T14:48:09.709471-05:00"}
{"id":"oaks-v9od","title":"Add null safety checks in web dataStore.js","description":"Line 70 accesses source.local_names without null guard. filteredSpecies assumes all species have sources array. Fix: Add defensive checks like (species.sources || []).some(...)","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-27T14:48:08.797034-05:00","updated_at":"2025-12-27T16:35:48.440569-05:00","closed_at":"2025-12-27T16:35:48.440569-05:00"}
{"id":"oaks-qg8t","title":"Document data contracts with JSON Schema","description":"Create JSON Schema file for quercus_data.json export format. Document species-intrinsic vs source-attributed data distinction. Add schema version to exported JSON. Consider using schema for validation in web app.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-27T14:43:33.84972-05:00","updated_at":"2025-12-27T14:43:33.84972-05:00"}
{"id":"oaks-y8q","title":"Security audit of codebase","description":"Review codebase for security vulnerabilities including OWASP top 10, injection risks, authentication issues, and data exposure risks","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T14:16:35.286389-05:00","updated_at":"2025-12-27T14:22:07.705884-05:00","closed_at":"2025-12-27T14:22:07.705884-05:00"}
{"id":"oaks-t41l","title":"api-spec: Design API endpoints and data contracts","description":"Design the REST API specification.\n\n## Endpoints to Define\n- Species: GET /api/species, GET /api/species/:name\n- Notes: CRUD /api/notes\n- Sources: CRUD /api/sources\n- Taxonomy: GET /api/taxonomy\n- Health: GET /api/health\n\n## Deliverables\n- OpenAPI/Swagger spec or markdown doc\n- Request/response schemas\n- Error format conventions\n- Versioning strategy (if any)","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-29T16:25:36.647673-05:00","updated_at":"2025-12-29T17:16:03.782659-05:00","created_by":"jeff","deleted_at":"2025-12-29T17:16:03.782659-05:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"oaks-59n","title":"V1 cleanup: Review and finalize data initialization strategy","description":"Once we reach V1 release, review the data initialization approach:\n\n- Evaluate if taxonomy seed file is still needed or if we have a better approach\n- Clean up any dev-time workarounds for data corruption issues\n- Finalize the canonical data import/export workflow\n- Remove or archive temporary data recovery tools\n- Document the production data management strategy\n\nThis is a follow-up to oaks-856 (taxonomy seed file) for post-V1 cleanup.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-15T17:08:38.233664-05:00","updated_at":"2025-12-23T18:50:17.738194-05:00","closed_at":"2025-12-23T18:50:17.738194-05:00","dependencies":[{"issue_id":"oaks-59n","depends_on_id":"oaks-856","type":"blocks","created_at":"2025-12-15T17:08:43.547012-05:00","created_by":"daemon"}]}
{"id":"oaks-26qm.3.6","title":"api: Implement export endpoint","description":"Create endpoint to export full database as JSON.\n\n## File: cli/internal/api/handlers/export.go\n\n## Endpoint\nGET /api/v1/export - Full database export\n\n## Response Format\nMatch existing quercus_data.json structure:\n```json\n{\n  \"species\": [\n    {\n      \"name\": \"alba\",\n      \"author\": \"L. 1753\",\n      \"is_hybrid\": false,\n      \"taxonomy\": {\n        \"genus\": \"Quercus\",\n        \"subgenus\": \"Quercus\",\n        \"section\": \"Quercus\"\n      },\n      \"sources\": [...]\n    }\n  ]\n}\n```\n\n## Implementation\n- Reuse existing export logic from cmd/export.go\n- Stream response for large datasets (don't buffer entire JSON)\n- Set Content-Type: application/json\n- Consider adding Last-Modified header\n\n## Performance\n- ~670 species, ~1-2MB output\n- Should complete in \u003c1 second\n- No pagination (full export only)","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T17:25:38.081165-05:00","updated_at":"2025-12-30T11:17:58.350747-05:00","closed_at":"2025-12-30T11:17:58.350747-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-26qm.3.6","depends_on_id":"oaks-26qm.3","type":"parent-child","created_at":"2025-12-29T17:25:38.08166-05:00","created_by":"daemon"},{"issue_id":"oaks-26qm.3.6","depends_on_id":"oaks-26qm.3.2","type":"blocks","created_at":"2025-12-29T17:27:08.912546-05:00","created_by":"daemon"}]}
{"id":"oaks-bt7","title":"Add Markdown rendering to web app","description":"Render Markdown content in the web UI:\n- Add markdown rendering library (marked, markdown-it, or similar)\n- Update SpeciesDetail.svelte to render text fields as HTML\n- Handle both legacy plain text and new Markdown content gracefully\n- Consider sanitization for safety","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T10:24:48.482646-05:00","updated_at":"2025-12-19T15:59:35.937542-05:00","closed_at":"2025-12-19T15:59:35.937542-05:00","dependencies":[{"issue_id":"oaks-bt7","depends_on_id":"oaks-791","type":"blocks","created_at":"2025-12-19T10:24:57.527874-05:00","created_by":"daemon"}]}
{"id":"oaks-2fz","title":"Add Source pages to the site","description":"Add dedicated Source pages to the web app. Sources should be browsable from the landing page, searchable from main search (with result type differentiation), and have detail pages showing full metadata plus coverage summary with expandable species lists.","status":"closed","priority":3,"issue_type":"epic","created_at":"2025-12-20T10:56:14.125688-05:00","updated_at":"2025-12-23T18:54:05.713821-05:00","closed_at":"2025-12-23T18:54:05.713821-05:00","dependencies":[{"issue_id":"oaks-2fz","depends_on_id":"oaks-5se","type":"blocks","created_at":"2025-12-21T10:53:53.090264-05:00","created_by":"daemon"},{"issue_id":"oaks-2fz","depends_on_id":"oaks-4uq","type":"blocks","created_at":"2025-12-21T10:53:53.194172-05:00","created_by":"daemon"},{"issue_id":"oaks-2fz","depends_on_id":"oaks-cpw","type":"blocks","created_at":"2025-12-21T10:53:53.305838-05:00","created_by":"daemon"},{"issue_id":"oaks-2fz","depends_on_id":"oaks-g0h","type":"blocks","created_at":"2025-12-21T10:53:53.41425-05:00","created_by":"daemon"},{"issue_id":"oaks-2fz","depends_on_id":"oaks-b14","type":"blocks","created_at":"2025-12-21T10:53:52.978677-05:00","created_by":"daemon"}]}
{"id":"oaks-10bq","title":"web: Taxa content editing (authenticated)","description":"Add editing capability for taxa content when authenticated.\n\nImplementation:\n1. Add 'Edit Content' or 'Add Content' button to TaxonView (when authenticated)\n2. Create TaxonContentEditor component with:\n   - Markdown textarea\n   - Live preview using MarkdownRenderer\n   - Save/Cancel buttons\n3. Save via PUT /api/v1/taxa/:level/:name\n\nDependencies:\n- Requires web auth state management (see oaks-eth7 epic)\n- Requires API taxa handlers updated\n\nPart of: Content Expansion (Phase 1: Taxa Content)\nSpec: openspec/changes/add-content-expansion/specs/taxa-content/spec.md","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-02T13:52:12.324058-05:00","updated_at":"2026-01-02T13:52:12.324058-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-10bq","depends_on_id":"oaks-3hun","type":"blocks","created_at":"2026-01-02T13:53:37.249902-05:00","created_by":"daemon"},{"issue_id":"oaks-10bq","depends_on_id":"oaks-eth7","type":"blocks","created_at":"2026-01-02T13:53:37.431519-05:00","created_by":"daemon"}]}
{"id":"oaks-61fd","title":"cli: Add tests for internal/export package","description":"The internal/export package has 0% test coverage. This is critical as it handles the JSON export logic that feeds the web app.\n\nFiles needing tests:\n- internal/export/export.go (142 lines)\n- internal/export/types.go (87 lines)\n\nTest cases needed:\n- Build() with empty database\n- Build() with species but no sources\n- Build() with full data (species + sources)\n- nonEmptySlice() helper function\n- Verify JSON structure matches expected schema","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-30T11:35:04.044413-05:00","updated_at":"2025-12-30T11:35:04.044413-05:00","created_by":"jeff"}
{"id":"oaks-k8f","title":"Audit and fix color contrast ratios","description":"Check all text and UI elements meet WCAG 2.1 AA contrast ratios: 4.5:1 for normal text, 3:1 for large text and UI components. Fix any failing elements.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T21:47:41.932728-05:00","updated_at":"2025-12-23T18:59:59.527884-05:00","closed_at":"2025-12-23T18:59:59.527884-05:00"}
{"id":"oaks-ipzv","title":"web-edit: Create authStore with key persistence","description":"Create web/src/lib/stores/authStore.js with:\n\n- Svelte writable store for API key\n- localStorage persistence (key: 'oak_api_key')\n- `setKey(key)` - validate and store\n- `clearKey()` - logout functionality\n- Derived `isAuthenticated` store (boolean)\n\n**Session timeout:**\n- Store timestamp with key\n- Check on load, clear if \u003e24 hours old\n- Configurable timeout (localStorage setting)\n\nSee design.md for implementation sketch.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T18:55:46.278725-05:00","updated_at":"2025-12-31T10:58:15.925095-05:00","closed_at":"2025-12-31T10:58:15.925095-05:00","created_by":"jeff"}
{"id":"oaks-0mo","title":"Create GitHub Actions deploy workflow","description":"Create .github/workflows/deploy.yml that builds the web app and deploys to GitHub Pages on push to main. Use actions/checkout, actions/setup-node, and peaceiris/actions-gh-pages.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-16T12:16:16.928775-05:00","updated_at":"2025-12-16T12:49:41.366437-05:00","closed_at":"2025-12-16T12:49:41.366437-05:00"}
{"id":"oaks-r7jm","title":"Fix API SaveOakEntry bidirectional relationship management","description":"**Spec Reference:** openspec/changes/consolidate-db-code/specs/api-server/spec.md\n\n**Problem:**\nAPI's SaveOakEntry() is missing bidirectional parent-child relationship management that CLI has. When saving a hybrid via API, parent species' `hybrids` lists are NOT updated.\n\n**CLI version** (cli/internal/db/db.go:471-529):\n- Uses transaction\n- Tracks old vs new parents\n- Calls addHybridToParentTx() and removeHybridFromParentTx()\n\n**API version** (api/internal/db/db.go:448-493):\n- No transaction\n- Just marshals JSON and INSERT OR REPLACE\n- Parents' hybrids lists never updated\n\n**Tasks:**\n- [ ] Port getOakEntryTx() to API\n- [ ] Port addHybridToParentTx() to API\n- [ ] Port removeHybridFromParentTx() to API\n- [ ] Port SaveOakEntry() transaction logic to API\n- [ ] Add tests for bidirectional relationships\n- [ ] Audit existing hybrids for correct parent references","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-30T17:03:39.432465-05:00","updated_at":"2025-12-30T17:24:32.184207-05:00","closed_at":"2025-12-30T17:24:32.184207-05:00","created_by":"jeff"}
{"id":"oaks-cml1","title":"web-edit: Add 'Create Source' button and flow","description":"Add entry point for creating new sources:\n\n**UI:**\n- \"+\" or \"Create Source\" button in sources page header\n- Visible only when canEdit is true\n\n**Create flow:**\n1. Click button → open SourceEditForm in create mode\n2. Fill required fields (name, type)\n3. Submit → API creates source\n4. On success: toast, refresh, navigate to new source\n5. On error: show validation errors\n\n**Note:** New sources are rare but needed when adding data from a new reference (book, paper, etc.)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T19:00:12.756483-05:00","updated_at":"2025-12-31T13:08:31.027875-05:00","closed_at":"2025-12-31T13:08:31.027875-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-cml1","depends_on_id":"oaks-68l2","type":"blocks","created_at":"2025-12-30T19:00:20.901626-05:00","created_by":"daemon"},{"issue_id":"oaks-cml1","depends_on_id":"oaks-9r8n","type":"blocks","created_at":"2025-12-30T19:00:20.935743-05:00","created_by":"daemon"}]}
{"id":"oaks-nio5","title":"Add input validation for import file paths","description":"MEDIUM: cli/cmd/import_bulk.go:57 reads files without validation. Check file is regular, readable, and within size limits before reading.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-27T14:21:58.221644-05:00","updated_at":"2025-12-29T11:06:36.965297-05:00","closed_at":"2025-12-29T11:06:36.965297-05:00"}
{"id":"oaks-d5r","title":"Investigate duplicate hybrid entries in data import","description":"Hybrids like 'riparia' appear twice in the database, causing display issues like 'Quercus × × riparia'. Need to:\n1. Check quercus_data.json for duplicates\n2. Investigate how duplicates were introduced\n3. Clean up the data\n4. Add safeguards against future duplicates","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-15T16:54:11.554037-05:00","updated_at":"2025-12-15T16:56:36.069489-05:00","closed_at":"2025-12-15T16:56:36.069489-05:00"}
{"id":"oaks-8pp9","title":"OOTW hybrids not in iNat taxonomy - review needed","description":"20 hybrids from Oaks of the World are referenced in parent species hybrids arrays but do not exist in the database (not in iNaturalist taxonomy).\n\nMissing Hybrids: alvesii, andrewsii, aruciensis, barcarrotensis, budensis, cantabrica, diversifrons, fenchengensis, fontanesii, grandidentata, hopeiensis, kiusiana, lagunai, macon, parkeri, pendulina, roseoides, thellungii, urartensis, yokohamensis\n\nReferences: canariensis-\u003elagunai, dentata-\u003efenchengensis/hopeiensis, engelmannii-\u003egrandidentata, faginea-\u003earuciensis, floribunda-\u003eparkeri, glauca-\u003ekiusiana, macranthera-\u003emacon, macrocarpa-\u003eandrewsii, petraea-\u003ecantabrica/diversifrons/roseoides, pubescens-\u003ebarcarrotensis/budensis/thellungii, pyrenaica-\u003ecantabrica, robur-\u003ethellungii/pendulina, rotundifolia-\u003ealvesii/urartensis, suber-\u003efontanesii, takaoyamensis-\u003eyokohamensis, undulata-\u003eandrewsii\n\nNeed to determine best approach for handling these. Some initial options considered: remove dangling refs, add as OOTW-only stubs, leave as-is. Other approaches may exist.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-29T11:19:14.514445-05:00","updated_at":"2025-12-29T11:44:56.890207-05:00","closed_at":"2025-12-29T11:44:56.890207-05:00","created_by":"jeff"}
{"id":"oaks-p0ma","title":"web-edit: Fix synonym search for string array format","description":"Fix dataStore.js:101-103 to handle synonyms as `[]string` format.\n\n**Current code (broken):**\n```javascript\nspecies.synonyms.some(syn =\u003e syn.name?.toLowerCase().includes(query))\n```\n\n**Fixed code:**\n```javascript\nspecies.synonyms.some(syn =\u003e\n  (typeof syn === 'string' ? syn : syn.name)?.toLowerCase().includes(query)\n)\n```\n\n**Context:** Export format (api/internal/export/types.go:54) sends `[]string` but search expected `{name: string}[]`.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-30T18:55:45.944141-05:00","updated_at":"2025-12-31T10:58:14.495801-05:00","closed_at":"2025-12-31T10:58:14.495801-05:00","created_by":"jeff"}
{"id":"oaks-hm0o","title":"Web: Deploy to production","description":"Deploy updated web app:\n\n1. Run web tests locally\n2. Test all views manually (list, detail, taxonomy, search)\n3. Test all edit flows (create, update, delete)\n4. Test delete cascade error handling\n5. Deploy to production\n\nSee tasks.md section 15","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-31T19:57:03.163038-05:00","updated_at":"2025-12-31T19:57:03.163038-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-hm0o","depends_on_id":"oaks-61dx","type":"blocks","created_at":"2025-12-31T19:57:28.749751-05:00","created_by":"daemon"}]}
{"id":"oaks-j4jx","title":"cli: Add database interface for testability","description":"The db.Database struct is concrete, not an interface. This makes unit testing cmd/ layer difficult without a real SQLite database.\n\nCurrent state:\n- cmd/ package has only 7.1% test coverage\n- 14 of 15 cmd files have no tests\n- Tests require real database (in-memory SQLite)\n\nSolution:\n1. Extract interface from db.Database with commonly used methods\n2. Use interface in cmd/ functions that need DB access\n3. Create mock implementation for testing\n\nThis would enable proper unit tests for:\n- add_value.go, delete.go, edit.go, export.go\n- find.go, new.go, note.go, source.go, taxa.go\n- serve.go, import_*.go, generate_bear_notes.go","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-30T11:36:01.919863-05:00","updated_at":"2025-12-30T11:36:01.919863-05:00","created_by":"jeff"}
{"id":"oaks-5jf","title":"Redo About page with licensing, GitHub link, background, and bio","description":"Redesign the About page with the following changes:\n\n1. **Add data licensing section** - Document the licensing terms for the oak species data\n2. **Add GitHub project link** - Link to the project repository\n3. **Add site background** - Explain the motivation and purpose behind creating the site\n4. **Add author biography** - Include a bio section about the site creator\n5. **Remove site features section** - This section is no longer needed","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-16T12:51:16.976716-05:00","updated_at":"2025-12-16T13:21:00.735324-05:00","closed_at":"2025-12-16T13:21:00.735324-05:00"}
{"id":"oaks-ph4u","title":"Fix scraper dual-output confusion","description":"Scraper outputs to both tmp/scraper/oaksoftheworld.json AND root quercus_data.json. Consolidate to single output path or clarify the workflow. Currently confusing which file is authoritative.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-27T14:43:34.067855-05:00","updated_at":"2025-12-29T12:10:07.56457-05:00","closed_at":"2025-12-29T12:10:07.56457-05:00"}
{"id":"oaks-0dwi","title":"api: Integrate species parser for auto-linking on save","description":"Integrate species-name-parser to auto-link species mentions when content is saved.\n\nImplementation:\n1. Call parser when taxa content is saved (PUT /api/v1/taxa/:level/:name)\n2. Call parser when articles are created/updated (POST/PUT /api/v1/articles)\n3. Replace species mentions with markdown links: 'Q. alba' → '[Q. alba](/species/alba)'\n\nParser requirements (from oaks-lqfj):\n- Find species mentions: 'Quercus alba', 'Q. alba', 'Q.alba'\n- Skip unknown species (leave as plain text)\n- Skip already-linked text\n- Skip code blocks\n\nLink format: [original text](/species/{species-name})\nExample: 'The white oaks include Q. alba and Q. macrocarpa.'\nBecomes: 'The white oaks include [Q. alba](/species/alba) and [Q. macrocarpa](/species/macrocarpa).'\n\nBLOCKED BY: oaks-lqfj (species-name-parser Go implementation)\n\nPart of: Content Expansion (Phase 3: Species Auto-Linking)\nSpec: openspec/changes/add-content-expansion/specs/species-linking/spec.md","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-02T13:53:02.234952-05:00","updated_at":"2026-01-02T14:41:22.0005-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-0dwi","depends_on_id":"oaks-4oed","type":"blocks","created_at":"2026-01-02T13:53:43.897265-05:00","created_by":"daemon"},{"issue_id":"oaks-0dwi","depends_on_id":"oaks-j28k","type":"blocks","created_at":"2026-01-02T13:53:44.838138-05:00","created_by":"daemon"},{"issue_id":"oaks-0dwi","depends_on_id":"oaks-lxcc","type":"blocks","created_at":"2026-01-02T14:04:47.039006-05:00","created_by":"daemon"}],"deleted_at":"2026-01-02T14:41:22.0005-05:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"oaks-iji","title":"Add universal external links to species detail UI","description":"Add hardcoded external link patterns to the species detail page in the web app.\n\nUniversal links to add (always shown, constructed from species name):\n- Wikipedia: https://en.wikipedia.org/wiki/Quercus_{name}\n- iNaturalist search: https://www.inaturalist.org/search?q=Quercus+{name}\n\nNo database changes needed - just UI code to construct and display links.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T12:13:08.675915-05:00","updated_at":"2025-12-23T12:38:46.697599-05:00","closed_at":"2025-12-23T12:38:46.697599-05:00"}
{"id":"oaks-jz5","title":"Principal Engineer code review","description":"Clean up code, identify shortcuts, bad practices, anti-patterns. Thorough review as if done by a Principal Engineer with high standards","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T14:16:35.492041-05:00","updated_at":"2025-12-27T14:48:44.392642-05:00","closed_at":"2025-12-27T14:48:44.392642-05:00"}
{"id":"oaks-lqfj","title":"Update species-name-parser proposal: JavaScript → Go","description":"## Context\n\nThe `add-species-name-parser` proposal was written for JavaScript (browser-side), but `add-content-expansion` now requires server-side linking in Go.\n\n## Required Changes\n\nUpdate `openspec/changes/add-species-name-parser/` to:\n\n1. **Change language from JavaScript to Go**\n   - Implementation at `api/internal/parser/`\n   - Use Go parser combinator library (e.g., `participle`, or custom combinators)\n\n2. **Update design.md**\n   - Remove JavaScript code examples\n   - Add Go implementation examples\n   - Update constraints (remove \"Must work in browser\")\n\n3. **Update tasks.md**\n   - Remove `web/src/lib/speciesParser.js`\n   - Add `api/internal/parser/` location\n   - Update test file locations\n\n4. **Integration with add-content-expansion**\n   - Parser called when taxa content or articles are saved via API\n   - Returns list of species mentions with positions\n   - Used to replace mentions with markdown links\n\n## Why Server-Side\n\n- Content processed once at save time, not on every page view\n- Parser complexity stays in Go, web just renders standard markdown\n- Stored content contains resolved links: `[Q. alba](/species/alba)`\n- Backlinks computed by grepping stored content for `/species/{name}` pattern","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-01T20:51:42.680859-05:00","updated_at":"2026-01-02T14:05:06.151145-05:00","closed_at":"2026-01-02T14:05:06.151145-05:00","created_by":"jeff"}
{"id":"oaks-p89","title":"Update dataStore for SvelteKit","description":"Adapt dataStore.js for SvelteKit:\n- Keep existing store pattern (works fine with SvelteKit)\n- Consider using +layout.js load function for initial data fetch\n- Ensure data is loaded before routes that need it\n- Update any navigation-related store logic","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T15:24:42.973909-05:00","updated_at":"2025-12-17T16:19:22.833935-05:00","closed_at":"2025-12-17T16:19:22.833935-05:00","dependencies":[{"issue_id":"oaks-p89","depends_on_id":"oaks-5v8","type":"blocks","created_at":"2025-12-17T15:25:00.888241-05:00","created_by":"daemon"}]}
{"id":"oaks-26qm.5","title":"api: Web App Hybrid Integration","description":"Migrate web app to use API with offline fallback (future phase).\n\n## Overview\nUpdate the Svelte PWA to fetch data from the API when online, falling back to cached data for offline use.\n\n## Strategy\n1. On load, check if API is reachable\n2. If online: fetch from API, update IndexedDB\n3. If offline: serve from IndexedDB cache\n4. Service worker handles caching\n\n## Implementation\n- web/src/lib/apiClient.js - API communication\n- Update dataStore.js for hybrid loading\n- Service worker caching of API responses\n- Offline indicator in UI\n\n## Dependencies\n- Requires API deployment complete (oaks-26qm.4)\n- Can be done after iOS integration\n\n## OpenSpec Reference\nSee add-crud-api-server/tasks.md section 16","status":"closed","priority":3,"issue_type":"epic","created_at":"2025-12-29T17:28:26.829609-05:00","updated_at":"2025-12-30T12:11:24.682747-05:00","closed_at":"2025-12-30T12:11:24.682747-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-26qm.5","depends_on_id":"oaks-26qm.4","type":"blocks","created_at":"2025-12-29T17:28:44.429454-05:00","created_by":"daemon"},{"issue_id":"oaks-26qm.5","depends_on_id":"oaks-26qm","type":"parent-child","created_at":"2025-12-29T17:28:26.831878-05:00","created_by":"daemon"}]}
{"id":"oaks-p2o","title":"Design source comparison UI","description":"Design the UI for source comparison tool.\n\n**Purpose**: Compare what different sources say about the same species, to help curate the preferred source.\n\n**Key decisions**:\n- **Layout**: Field-oriented rows (one row per field: leaves, fruits, etc.) with source columns\n- **Source selection**: Picker to select 2-3 sources to compare (will have 12+ sources for NA oaks)\n- **Missing fields**: Show '—' placeholder when a source lacks data for a field\n- **Entry point**: Button on species detail page → /compare/:species route\n- **Scope**: Single species at a time (v1)\n\n**Navigation note**: Keep distinct from future species comparison tool (oaks-s6p) which compares different species for ID purposes.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-16T10:45:14.9537-05:00","updated_at":"2025-12-23T19:37:42.573297-05:00","closed_at":"2025-12-23T19:37:42.573301-05:00"}
{"id":"oaks-1woa","title":"Add Content Security Policy headers","description":"MEDIUM: Web app lacks CSP headers. Add headers to restrict script sources and mitigate XSS impact. Configure in deployment.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T14:21:58.42866-05:00","updated_at":"2025-12-29T12:57:18.566589-05:00","closed_at":"2025-12-29T12:57:18.566589-05:00"}
{"id":"oaks-metl","title":"web-edit: Create SpeciesSourceEditForm component","description":"Create web/src/lib/components/SpeciesSourceEditForm.svelte:\n\n**Fields (source-attributed data):**\n- local_names (TagInput)\n- range (textarea)\n- growth_habit (textarea)\n- leaves (textarea)\n- flowers (textarea)\n- fruits (textarea)\n- bark_twigs_buds (textarea - maps to bark)\n- hardiness_habitat (textarea)\n- miscellaneous (textarea)\n- url (text input)\n\n**Form behavior:**\n- Pre-fill from current source's data\n- Show source name in modal title: \"Edit Oaks of the World Data\"\n- is_preferred checkbox\n- Validate URL format if provided\n\n**Save:**\n- Call updateSpeciesSource(speciesName, sourceId, data)\n- On success: toast, refresh, close\n- On error: show validation errors","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T18:59:09.986274-05:00","updated_at":"2025-12-31T12:12:09.300287-05:00","closed_at":"2025-12-31T12:12:09.300287-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-metl","depends_on_id":"oaks-d1d3","type":"blocks","created_at":"2025-12-30T18:59:20.348605-05:00","created_by":"daemon"},{"issue_id":"oaks-metl","depends_on_id":"oaks-2d63","type":"blocks","created_at":"2025-12-30T18:59:20.278927-05:00","created_by":"daemon"},{"issue_id":"oaks-metl","depends_on_id":"oaks-7k7w","type":"blocks","created_at":"2025-12-30T18:59:20.31466-05:00","created_by":"daemon"}]}
{"id":"oaks-vhwv","title":"ios-notes-list: Remove timestamp from notes list","description":"Remove the timestamp display from the Oak Notes list screen - not needed.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-29T16:02:14.64132-05:00","updated_at":"2025-12-29T16:02:14.64132-05:00","created_by":"jeff"}
{"id":"oaks-oxo","title":"Remove --no-ssl-verify flag from scraper","description":"HIGH: scrapers/oaksoftheworld/scraper.py:68-73 allows disabling SSL verification, enabling MITM attacks. Remove flag entirely.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-27T14:21:45.584455-05:00","updated_at":"2025-12-27T16:35:48.435126-05:00","closed_at":"2025-12-27T16:35:48.435126-05:00"}
{"id":"oaks-xjul","title":"Improve error handling across components","description":"Scraper: Add structured error logging with severity levels. CLI: Implement rollback for partial bulk imports. Web: Validate JSON schema before IndexedDB population. Add retry logic with exponential backoff for network requests.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-27T14:43:33.428615-05:00","updated_at":"2025-12-27T14:43:33.428615-05:00"}
{"id":"oaks-cifv","title":"web-edit: Add toApiFormat mapping functions","description":"Add utility functions to convert web format (display-friendly) to API format (database-aligned).\n\n**Species mapping (apiClient.js):**\n```javascript\nfunction toApiFormat(species) {\n  return {\n    scientific_name: species.name,\n    author: species.author,\n    is_hybrid: species.is_hybrid,\n    conservation_status: species.conservation_status,\n    subgenus: species.taxonomy?.subgenus,\n    section: species.taxonomy?.section,\n    subsection: species.taxonomy?.subsection,\n    complex: species.taxonomy?.complex,\n    parent1: species.parent1,\n    parent2: species.parent2,\n    synonyms: species.synonyms?.map(s =\u003e typeof s === 'string' ? s : s.name),\n  };\n}\n```\n\n**Also add:**\n- toApiFormat for taxa (mostly 1:1)\n- toApiFormat for sources (mostly 1:1)\n- Update test fixtures if needed","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T18:55:46.114533-05:00","updated_at":"2025-12-31T10:59:27.323696-05:00","closed_at":"2025-12-31T10:59:27.323696-05:00","created_by":"jeff"}
{"id":"oaks-ecz","title":"Code quality and architecture audit","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-27T14:16:24.546433-05:00","updated_at":"2025-12-27T14:16:24.546433-05:00","dependencies":[{"issue_id":"oaks-ecz","depends_on_id":"oaks-sugk","type":"blocks","created_at":"2025-12-27T14:22:12.706929-05:00","created_by":"daemon"},{"issue_id":"oaks-ecz","depends_on_id":"oaks-nio5","type":"blocks","created_at":"2025-12-27T14:22:12.909106-05:00","created_by":"daemon"},{"issue_id":"oaks-ecz","depends_on_id":"oaks-83pl","type":"blocks","created_at":"2025-12-27T14:43:39.503292-05:00","created_by":"daemon"},{"issue_id":"oaks-ecz","depends_on_id":"oaks-qg8t","type":"blocks","created_at":"2025-12-27T14:43:39.303967-05:00","created_by":"daemon"},{"issue_id":"oaks-ecz","depends_on_id":"oaks-1woa","type":"blocks","created_at":"2025-12-27T14:22:13.008825-05:00","created_by":"daemon"},{"issue_id":"oaks-ecz","depends_on_id":"oaks-y8q","type":"blocks","created_at":"2025-12-27T14:16:48.950185-05:00","created_by":"daemon"},{"issue_id":"oaks-ecz","depends_on_id":"oaks-v9od","type":"blocks","created_at":"2025-12-27T14:48:17.249566-05:00","created_by":"daemon"},{"issue_id":"oaks-ecz","depends_on_id":"oaks-yd3","type":"blocks","created_at":"2025-12-27T14:22:12.411321-05:00","created_by":"daemon"},{"issue_id":"oaks-ecz","depends_on_id":"oaks-tzr","type":"blocks","created_at":"2025-12-27T14:16:49.152363-05:00","created_by":"daemon"},{"issue_id":"oaks-ecz","depends_on_id":"oaks-brse","type":"blocks","created_at":"2025-12-27T14:48:17.656563-05:00","created_by":"daemon"},{"issue_id":"oaks-ecz","depends_on_id":"oaks-15m2","type":"blocks","created_at":"2025-12-27T14:48:17.35082-05:00","created_by":"daemon"},{"issue_id":"oaks-ecz","depends_on_id":"oaks-ph4u","type":"blocks","created_at":"2025-12-27T14:43:39.404816-05:00","created_by":"daemon"},{"issue_id":"oaks-ecz","depends_on_id":"oaks-bxjm","type":"blocks","created_at":"2025-12-27T14:22:12.809193-05:00","created_by":"daemon"},{"issue_id":"oaks-ecz","depends_on_id":"oaks-2zrz","type":"blocks","created_at":"2025-12-27T14:48:17.143604-05:00","created_by":"daemon"},{"issue_id":"oaks-ecz","depends_on_id":"oaks-b8i","type":"blocks","created_at":"2025-12-27T14:16:49.253381-05:00","created_by":"daemon"},{"issue_id":"oaks-ecz","depends_on_id":"oaks-xjul","type":"blocks","created_at":"2025-12-27T14:43:39.103945-05:00","created_by":"daemon"},{"issue_id":"oaks-ecz","depends_on_id":"oaks-oan7","type":"blocks","created_at":"2025-12-27T14:48:17.043698-05:00","created_by":"daemon"},{"issue_id":"oaks-ecz","depends_on_id":"oaks-j05j","type":"blocks","created_at":"2025-12-27T14:48:17.55749-05:00","created_by":"daemon"},{"issue_id":"oaks-ecz","depends_on_id":"oaks-vwou","type":"blocks","created_at":"2025-12-27T14:22:13.106824-05:00","created_by":"daemon"},{"issue_id":"oaks-ecz","depends_on_id":"oaks-542","type":"blocks","created_at":"2025-12-27T14:22:12.310163-05:00","created_by":"daemon"},{"issue_id":"oaks-ecz","depends_on_id":"oaks-cnsw","type":"blocks","created_at":"2025-12-27T14:43:39.203136-05:00","created_by":"daemon"},{"issue_id":"oaks-ecz","depends_on_id":"oaks-1i43","type":"blocks","created_at":"2025-12-27T14:48:17.452955-05:00","created_by":"daemon"},{"issue_id":"oaks-ecz","depends_on_id":"oaks-tuf3","type":"blocks","created_at":"2025-12-27T14:48:17.756279-05:00","created_by":"daemon"},{"issue_id":"oaks-ecz","depends_on_id":"oaks-n75a","type":"blocks","created_at":"2025-12-27T14:22:13.207391-05:00","created_by":"daemon"},{"issue_id":"oaks-ecz","depends_on_id":"oaks-k7t","type":"blocks","created_at":"2025-12-27T14:22:12.607857-05:00","created_by":"daemon"},{"issue_id":"oaks-ecz","depends_on_id":"oaks-jz5","type":"blocks","created_at":"2025-12-27T14:16:49.051393-05:00","created_by":"daemon"},{"issue_id":"oaks-ecz","depends_on_id":"oaks-oxo","type":"blocks","created_at":"2025-12-27T14:22:12.511265-05:00","created_by":"daemon"}]}
{"id":"oaks-lxcc","title":"api: Database-backed species resolver","description":"Create api/internal/db/resolver.go implementing the parser's Resolver interface.\n\n## Implementation\n\n1. Create resolver.go in api/internal/db/\n2. Implement Resolver interface from parser package:\n   ```go\n   type DBResolver struct {\n       db *Database\n   }\n\n   func (r *DBResolver) Resolve(species string) (path string, exists bool) {\n       // Query oak_entries table for species name\n       // Return (\"/species/\" + species, true) if found\n       // Return (\"\", false) if not found\n   }\n   ```\n3. Handle case sensitivity (species names stored lowercase)\n4. Handle hybrid markers (strip × prefix for lookup)\n5. Add tests in resolver_test.go\n\n## Design Note\nThe Resolver interface is defined in api/internal/parser/ to keep the parser\npackage dependency-free. The DB implementation lives here in internal/db/\nto keep all database code together.\n\n## Reference\nSee: openspec/changes/add-species-name-parser/design.md (Decision: Link Resolution API)","status":"tombstone","priority":1,"issue_type":"task","created_at":"2026-01-02T14:04:30.27437-05:00","updated_at":"2026-01-02T14:41:21.999433-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-lxcc","depends_on_id":"oaks-wgn7","type":"blocks","created_at":"2026-01-02T14:04:46.891891-05:00","created_by":"daemon"}],"deleted_at":"2026-01-02T14:41:21.999433-05:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"oaks-rkr4","title":"web-edit: Implement species update flow","description":"Wire up species edit form → API → refresh:\n\n**Update flow:**\n1. User clicks Edit → modal opens with current data\n2. User modifies fields\n3. User clicks Save → show loading spinner\n4. Call updateSpecies(name, toApiFormat(data))\n5. On success:\n   - Close modal\n   - Show success toast\n   - Trigger full data refresh\n   - Navigate to updated species (name may have changed)\n6. On error:\n   - Show inline validation errors (400)\n   - Show error toast for other failures\n   - Keep modal open for correction\n\n**Create flow:**\n1. User clicks \"Add Species\" → empty modal opens\n2. Same flow, but calls createSpecies()\n3. On success, navigate to new species\n\n**Handle connection loss:**\n- If connection drops mid-edit, disable Save button\n- Show warning: \"Connection lost. Your changes are preserved.\"\n- Re-enable when connection restored","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T18:58:28.563046-05:00","updated_at":"2025-12-31T12:08:10.917853-05:00","closed_at":"2025-12-31T12:08:10.917853-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-rkr4","depends_on_id":"oaks-koo8","type":"blocks","created_at":"2025-12-30T18:58:43.272538-05:00","created_by":"daemon"},{"issue_id":"oaks-rkr4","depends_on_id":"oaks-9r8n","type":"blocks","created_at":"2025-12-30T18:58:43.310322-05:00","created_by":"daemon"},{"issue_id":"oaks-rkr4","depends_on_id":"oaks-cifv","type":"blocks","created_at":"2025-12-30T18:58:43.344402-05:00","created_by":"daemon"},{"issue_id":"oaks-rkr4","depends_on_id":"oaks-utut","type":"blocks","created_at":"2025-12-30T18:58:43.378396-05:00","created_by":"daemon"}]}
{"id":"oaks-9lkq","title":"api-dataflow: Document new data architecture","description":"Document the complete data flow with the API in place.\n\n## Diagrams to Create\n- System architecture diagram\n- Data flow for each client (iOS, web, CLI)\n- Deployment topology\n\n## Documentation\n- Update CLAUDE.md with new architecture\n- API usage examples\n- Local development setup\n- Production vs development configuration","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-29T16:25:37.7429-05:00","updated_at":"2025-12-29T17:16:03.786527-05:00","created_by":"jeff","deleted_at":"2025-12-29T17:16:03.786527-05:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"oaks-s1t5","title":"Release web 2026.01.03.1450","status":"in_progress","priority":0,"issue_type":"task","created_at":"2026-01-03T14:50:39.31756-05:00","updated_at":"2026-01-03T14:50:44.67594-05:00","created_by":"jeff"}
{"id":"oaks-26qm.2.5","title":"api: Implement error and response helpers","description":"Create consistent JSON response and error helpers.\n\n## Files\n- cli/internal/api/errors.go\n- cli/internal/api/response.go\n\n## Error Response Format\n```go\ntype APIError struct {\n    Code    string      `json:\"code\"`\n    Message string      `json:\"message\"`\n    Details interface{} `json:\"details,omitempty\"`\n}\n\ntype ErrorResponse struct {\n    Error APIError `json:\"error\"`\n}\n```\n\n## Error Codes\n- VALIDATION_ERROR (400)\n- UNAUTHORIZED (401)\n- NOT_FOUND (404)\n- CONFLICT (409)\n- RATE_LIMITED (429)\n- INTERNAL_ERROR (500)\n\n## Success Response Format\n```go\ntype ListResponse[T any] struct {\n    Data       []T        `json:\"data\"`\n    Pagination Pagination `json:\"pagination\"`\n}\n\ntype Pagination struct {\n    Total   int  `json:\"total\"`\n    Limit   int  `json:\"limit\"`\n    Offset  int  `json:\"offset\"`\n    HasMore bool `json:\"hasMore\"`\n}\n```\n\n## Helper Functions\n- RespondJSON(w, status, data)\n- RespondError(w, status, code, message)\n- RespondValidationError(w, errors)\n- RespondNotFound(w, resource, id)","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T17:25:35.293975-05:00","updated_at":"2025-12-29T20:02:01.558149-05:00","closed_at":"2025-12-29T20:02:01.558149-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-26qm.2.5","depends_on_id":"oaks-26qm.2.2","type":"blocks","created_at":"2025-12-29T17:26:58.344985-05:00","created_by":"daemon"},{"issue_id":"oaks-26qm.2.5","depends_on_id":"oaks-26qm.2","type":"parent-child","created_at":"2025-12-29T17:25:35.294487-05:00","created_by":"daemon"}]}
{"id":"oaks-d66k","title":"web-edit: Handle 401 responses globally","description":"In apiClient.js, add global 401 handling:\n\n- Detect 401 Unauthorized responses\n- Call authStore.clearKey() to remove stale key\n- Show toast notification: \"Session expired. Please re-enter your API key.\"\n- Redirect to settings page (optional)\n\nMust work with both authenticated and unauthenticated requests.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T18:55:46.780459-05:00","updated_at":"2026-01-03T12:27:25.5295-05:00","closed_at":"2026-01-03T12:27:25.5295-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-d66k","depends_on_id":"oaks-ipzv","type":"blocks","created_at":"2025-12-30T18:56:07.144655-05:00","created_by":"daemon"}]}
{"id":"oaks-7jl","title":"Implement CLI basic CRUD operations","description":"Implement create, read, update, delete operations for species, sources, and taxonomy entries. Use editor-based workflow as described in CLI spec.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-14T16:46:08.57633-05:00","updated_at":"2025-12-23T18:44:30.42706-05:00","closed_at":"2025-12-23T18:44:30.42706-05:00"}
{"id":"oaks-7fb","title":"Migrate CLI from Rust to Go","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T19:00:44.927773-05:00","updated_at":"2025-12-14T19:06:41.43255-05:00","closed_at":"2025-12-14T19:06:41.43255-05:00"}
{"id":"oaks-stiv","title":"cli: Code audit findings (2025-12-30)","description":"Full audit of cli/ subproject conducted 2025-12-30. Summary of findings:\n\n## Test Coverage\n| Package | Coverage |\n|---------|----------|\n| internal/export | 0% |\n| cmd/ | 7.1% |\n| internal/editor | 34.9% |\n| internal/db | 55.5% |\n| internal/api | 75.2% |\n| internal/schema | 82.5% |\n| internal/models | 100% |\n\n## Critical Issues (separate beads created)\n- Missing export tests\n- INSERT OR REPLACE ID bug\n- No database interface for mocking\n- Hardcoded rate limits\n- Ignored errors in production code\n\n## Minor Issues\n- No --version flag\n- No OpenAPI/Swagger documentation\n- Inconsistent error handling patterns in cmd/\n- Health endpoint doesn't verify DB connectivity\n- Fallback source name is placeholder text\n\n## Security (Good)\n- Constant-time API key comparison\n- Shell injection prevention in editor\n- SQL injection prevention (escapeLike)\n- Proper API key file permissions (0600)\n\n## What's Working Well\n- Clean architecture (cmd → internal layers)\n- Proper defer Close() patterns\n- Good error wrapping with context\n- Comprehensive API layer tests\n- Good Cobra command documentation","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-30T11:36:02.509738-05:00","updated_at":"2025-12-30T11:36:02.509738-05:00","created_by":"jeff"}
{"id":"oaks-bh14","title":"rust-parser: CI workflow for Rust/WASM","description":"Add GitHub Actions workflow for building and testing the Rust parser.\n\n## Tasks\n- [ ] Create `.github/workflows/rust-parser.yml`\n- [ ] Configure Rust toolchain installation\n- [ ] Add wasm-pack installation step\n- [ ] Run `cargo test` for unit tests\n- [ ] Run `wasm-pack build --target web --release`\n- [ ] Cache Cargo dependencies and build artifacts\n- [ ] Upload WASM artifacts (optional, for releases)\n- [ ] Add rust-toolchain.toml for version pinning\n\n## Workflow Triggers\n- Push to main (rust-parser/ changes)\n- Pull requests (rust-parser/ changes)\n\n## Acceptance Criteria\n- CI passes on clean checkout\n- Reasonable build time with caching\n- Artifacts available for download (optional)\n\n## Reference\n- Existing .github/workflows/ for patterns","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-02T14:54:06.822974-05:00","updated_at":"2026-01-02T14:54:06.822974-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-bh14","depends_on_id":"oaks-wtdy","type":"blocks","created_at":"2026-01-02T14:54:12.390055-05:00","created_by":"daemon"}]}
{"id":"oaks-iry","title":"Manage temp files for data imports and prevent git commits","description":"Currently temp files for data imports (CLI tool, scraper outputs) don't have a consistent location. Need to:\n\n1. Establish a standard temp directory (e.g., tmp/ or .tmp/) for data import operations\n2. Update .gitignore to exclude this directory and any temp file patterns\n3. Update CLI tool to use the standard temp location\n4. Document the temp file conventions in CLAUDE.md\n\nThis prevents accidental commits of large data files or intermediate processing artifacts.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T10:52:19.938098-05:00","updated_at":"2025-12-15T11:48:36.374942-05:00","closed_at":"2025-12-15T11:48:36.374942-05:00"}
{"id":"oaks-awpj","title":"web-edit: Add keyboard accessibility to forms","description":"Implement keyboard accessibility:\n\n**Tab order:**\n- Logical tab order through form fields\n- Skip hidden/disabled fields\n- Focus visible indicator on all interactive elements\n\n**Modal navigation:**\n- Escape to close modal\n- Enter to submit (when focus on submit button)\n- Tab cycles within modal (focus trap)\n\n**Form interactions:**\n- Enter in text field does not submit (unless single-field)\n- TagInput: Enter to add tag\n- TaxonSelect: Arrow keys for dropdown navigation\n\n**Implementation:**\n- Use Svelte actions or direct event handlers\n- Test with keyboard-only navigation\n- Ensure no focus traps (except intentional modal trap)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T19:01:08.277965-05:00","updated_at":"2025-12-31T13:23:54.274071-05:00","closed_at":"2025-12-31T13:23:54.274071-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-awpj","depends_on_id":"oaks-2d63","type":"blocks","created_at":"2025-12-30T19:01:16.624561-05:00","created_by":"daemon"}]}
{"id":"oaks-w75d","title":"web-edit: Add 'Create Species' button to list page","description":"Add species creation entry point:\n\n**Location:**\n- Species list page header\n- Visible only when canEdit is true\n\n**Behavior:**\n- Click opens SpeciesEditForm in create mode (empty form)\n- Same form component, different initial state\n- Create flow handles navigation to new species after success\n\n**UI:**\n- \"+\" or \"Add Species\" button\n- Consistent with other edit action styling","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T18:58:28.888992-05:00","updated_at":"2025-12-31T12:08:35.695577-05:00","closed_at":"2025-12-31T12:08:35.695577-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-w75d","depends_on_id":"oaks-81fv","type":"blocks","created_at":"2025-12-30T18:58:43.590185-05:00","created_by":"daemon"},{"issue_id":"oaks-w75d","depends_on_id":"oaks-koo8","type":"blocks","created_at":"2025-12-30T18:58:43.625405-05:00","created_by":"daemon"}]}
{"id":"oaks-1p3","title":"Remove legacy DB migration code once schema is stable","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T14:55:59.635216-05:00","updated_at":"2025-12-19T15:53:27.60129-05:00","closed_at":"2025-12-19T15:53:27.60129-05:00"}
{"id":"oaks-0kb","title":"Ensure keyboard navigation works throughout app","description":"Audit and fix keyboard navigation: all interactive elements must be focusable and operable with keyboard only. Tab order should be logical. Custom components (dropdowns, modals) need proper keyboard handling.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T21:47:41.582226-05:00","updated_at":"2025-12-23T18:59:59.528833-05:00","closed_at":"2025-12-23T18:59:59.528833-05:00"}
{"id":"oaks-0pg2","title":"rust-parser: Basic grammar parsers (genus, hybrid, epithet)","description":"Implement the basic nom parser combinators for species name components.\n\n## Tasks\n- [ ] Create `src/grammar.rs` module\n- [ ] Implement genus parser:\n  ```rust\n  fn genus(input: \u0026str) -\u003e IResult\u003c\u0026str, \u0026str\u003e {\n      alt((tag(\"Quercus\"), tag(\"Q.\")))(input)\n  }\n  ```\n- [ ] Implement hybrid marker parser (×, x, X with optional space)\n- [ ] Implement epithet parser (lowercase letters, allow hyphens for names like castello-paivae)\n- [ ] Write unit tests for each parser\n- [ ] Test edge cases: Q.alba (no space), various hybrid marker positions\n\n## Acceptance Criteria\n- Genus only matches \"Quercus\" or \"Q.\" (case-sensitive, capital Q required)\n- Epithet only matches lowercase (rejects \"Alba\", \"ALBA\")\n- Hybrid marker accepts ×, x, X\n\n## Reference\n- openspec/changes/add-wasm-species-linker/specs/species-linker/spec.md","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-02T14:52:07.152546-05:00","updated_at":"2026-01-02T14:52:07.152546-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-0pg2","depends_on_id":"oaks-qcti","type":"blocks","created_at":"2026-01-02T14:52:13.120451-05:00","created_by":"daemon"}]}
{"id":"oaks-jsh3","title":"Final cleanup and code review for DB consolidation","description":"**Spec Reference:** openspec/changes/consolidate-db-code/tasks.md Section 8\n\nFinal verification before closing the epic.\n\n**Tasks:**\n- [ ] Review for any remaining code duplication\n- [ ] Code review of all changes\n- [ ] Verify all tests pass\n- [ ] Archive the openspec change proposal","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-30T17:04:20.447751-05:00","updated_at":"2025-12-30T18:21:56.737922-05:00","closed_at":"2025-12-30T18:21:56.737922-05:00","created_by":"jeff","dependencies":[{"issue_id":"oaks-jsh3","depends_on_id":"oaks-16zq","type":"blocks","created_at":"2025-12-30T17:04:37.960155-05:00","created_by":"daemon"},{"issue_id":"oaks-jsh3","depends_on_id":"oaks-qsal","type":"blocks","created_at":"2025-12-30T17:04:37.918092-05:00","created_by":"daemon"}]}
{"id":"oaks-8i2","title":"Header site title link should not have link styling","description":"The site title 'Quercus Compendium' in the Header is now an \u003ca\u003e link (for SvelteKit navigation), but it has default link styling (underline/color). It should look like regular text while still being clickable.\n\nFile: web/src/lib/components/Header.svelte","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-17T16:35:44.347814-05:00","updated_at":"2025-12-19T15:41:51.374706-05:00","closed_at":"2025-12-19T15:41:51.374706-05:00"}
